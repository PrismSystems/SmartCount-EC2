(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))r(h);new MutationObserver(h=>{for(const S of h)if(S.type==="childList")for(const f of S.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function v(h){const S={};return h.integrity&&(S.integrity=h.integrity),h.referrerPolicy&&(S.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?S.credentials="include":h.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function r(h){if(h.ep)return;h.ep=!0;const S=v(h);fetch(h.href,S)}})();function _m(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var $r={exports:{}},fs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function g0(){if(bm)return fs;bm=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function v(r,h,S){var f=null;if(S!==void 0&&(f=""+S),h.key!==void 0&&(f=""+h.key),"key"in h){S={};for(var E in h)E!=="key"&&(S[E]=h[E])}else S=h;return h=S.ref,{$$typeof:o,type:r,key:f,ref:h!==void 0?h:null,props:S}}return fs.Fragment=u,fs.jsx=v,fs.jsxs=v,fs}var xm;function p0(){return xm||(xm=1,$r.exports=g0()),$r.exports}var s=p0(),Wr={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function y0(){if(vm)return Xe;vm=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),f=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),A=Symbol.iterator;function j(b){return b===null||typeof b!="object"?null:(b=A&&b[A]||b["@@iterator"],typeof b=="function"?b:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,_={};function Y(b,X,re){this.props=b,this.context=X,this.refs=_,this.updater=re||T}Y.prototype.isReactComponent={},Y.prototype.setState=function(b,X){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,X,"setState")},Y.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function P(){}P.prototype=Y.prototype;function K(b,X,re){this.props=b,this.context=X,this.refs=_,this.updater=re||T}var q=K.prototype=new P;q.constructor=K,Z(q,Y.prototype),q.isPureReactComponent=!0;var te=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},J=Object.prototype.hasOwnProperty;function z(b,X,re,I,de,Se){return re=Se.ref,{$$typeof:o,type:b,key:X,ref:re!==void 0?re:null,props:Se}}function Q(b,X){return z(b.type,X,void 0,void 0,void 0,b.props)}function ee(b){return typeof b=="object"&&b!==null&&b.$$typeof===o}function ce(b){var X={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(re){return X[re]})}var ge=/\/+/g;function ie(b,X){return typeof b=="object"&&b!==null&&b.key!=null?ce(""+b.key):X.toString(36)}function be(){}function ke(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(be,be):(b.status="pending",b.then(function(X){b.status==="pending"&&(b.status="fulfilled",b.value=X)},function(X){b.status==="pending"&&(b.status="rejected",b.reason=X)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function fe(b,X,re,I,de){var Se=typeof b;(Se==="undefined"||Se==="boolean")&&(b=null);var se=!1;if(b===null)se=!0;else switch(Se){case"bigint":case"string":case"number":se=!0;break;case"object":switch(b.$$typeof){case o:case u:se=!0;break;case g:return se=b._init,fe(se(b._payload),X,re,I,de)}}if(se)return de=de(b),se=I===""?"."+ie(b,0):I,te(de)?(re="",se!=null&&(re=se.replace(ge,"$&/")+"/"),fe(de,X,re,"",function(_t){return _t})):de!=null&&(ee(de)&&(de=Q(de,re+(de.key==null||b&&b.key===de.key?"":(""+de.key).replace(ge,"$&/")+"/")+se)),X.push(de)),1;se=0;var Ge=I===""?".":I+":";if(te(b))for(var Ie=0;Ie<b.length;Ie++)I=b[Ie],Se=Ge+ie(I,Ie),se+=fe(I,X,re,Se,de);else if(Ie=j(b),typeof Ie=="function")for(b=Ie.call(b),Ie=0;!(I=b.next()).done;)I=I.value,Se=Ge+ie(I,Ie++),se+=fe(I,X,re,Se,de);else if(Se==="object"){if(typeof b.then=="function")return fe(ke(b),X,re,I,de);throw X=String(b),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return se}function L(b,X,re){if(b==null)return b;var I=[],de=0;return fe(b,I,"","",function(Se){return X.call(re,Se,de++)}),I}function V(b){if(b._status===-1){var X=b._result;X=X(),X.then(function(re){(b._status===0||b._status===-1)&&(b._status=1,b._result=re)},function(re){(b._status===0||b._status===-1)&&(b._status=2,b._result=re)}),b._status===-1&&(b._status=0,b._result=X)}if(b._status===1)return b._result.default;throw b._result}var ue=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)};function xe(){}return Xe.Children={map:L,forEach:function(b,X,re){L(b,function(){X.apply(this,arguments)},re)},count:function(b){var X=0;return L(b,function(){X++}),X},toArray:function(b){return L(b,function(X){return X})||[]},only:function(b){if(!ee(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},Xe.Component=Y,Xe.Fragment=v,Xe.Profiler=h,Xe.PureComponent=K,Xe.StrictMode=r,Xe.Suspense=p,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(b){return R.H.useMemoCache(b)}},Xe.cache=function(b){return function(){return b.apply(null,arguments)}},Xe.cloneElement=function(b,X,re){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var I=Z({},b.props),de=b.key,Se=void 0;if(X!=null)for(se in X.ref!==void 0&&(Se=void 0),X.key!==void 0&&(de=""+X.key),X)!J.call(X,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&X.ref===void 0||(I[se]=X[se]);var se=arguments.length-2;if(se===1)I.children=re;else if(1<se){for(var Ge=Array(se),Ie=0;Ie<se;Ie++)Ge[Ie]=arguments[Ie+2];I.children=Ge}return z(b.type,de,void 0,void 0,Se,I)},Xe.createContext=function(b){return b={$$typeof:f,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:S,_context:b},b},Xe.createElement=function(b,X,re){var I,de={},Se=null;if(X!=null)for(I in X.key!==void 0&&(Se=""+X.key),X)J.call(X,I)&&I!=="key"&&I!=="__self"&&I!=="__source"&&(de[I]=X[I]);var se=arguments.length-2;if(se===1)de.children=re;else if(1<se){for(var Ge=Array(se),Ie=0;Ie<se;Ie++)Ge[Ie]=arguments[Ie+2];de.children=Ge}if(b&&b.defaultProps)for(I in se=b.defaultProps,se)de[I]===void 0&&(de[I]=se[I]);return z(b,Se,void 0,void 0,null,de)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(b){return{$$typeof:E,render:b}},Xe.isValidElement=ee,Xe.lazy=function(b){return{$$typeof:g,_payload:{_status:-1,_result:b},_init:V}},Xe.memo=function(b,X){return{$$typeof:y,type:b,compare:X===void 0?null:X}},Xe.startTransition=function(b){var X=R.T,re={};R.T=re;try{var I=b(),de=R.S;de!==null&&de(re,I),typeof I=="object"&&I!==null&&typeof I.then=="function"&&I.then(xe,ue)}catch(Se){ue(Se)}finally{R.T=X}},Xe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Xe.use=function(b){return R.H.use(b)},Xe.useActionState=function(b,X,re){return R.H.useActionState(b,X,re)},Xe.useCallback=function(b,X){return R.H.useCallback(b,X)},Xe.useContext=function(b){return R.H.useContext(b)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(b,X){return R.H.useDeferredValue(b,X)},Xe.useEffect=function(b,X,re){var I=R.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return I.useEffect(b,X)},Xe.useId=function(){return R.H.useId()},Xe.useImperativeHandle=function(b,X,re){return R.H.useImperativeHandle(b,X,re)},Xe.useInsertionEffect=function(b,X){return R.H.useInsertionEffect(b,X)},Xe.useLayoutEffect=function(b,X){return R.H.useLayoutEffect(b,X)},Xe.useMemo=function(b,X){return R.H.useMemo(b,X)},Xe.useOptimistic=function(b,X){return R.H.useOptimistic(b,X)},Xe.useReducer=function(b,X,re){return R.H.useReducer(b,X,re)},Xe.useRef=function(b){return R.H.useRef(b)},Xe.useState=function(b){return R.H.useState(b)},Xe.useSyncExternalStore=function(b,X,re){return R.H.useSyncExternalStore(b,X,re)},Xe.useTransition=function(){return R.H.useTransition()},Xe.version="19.1.0",Xe}var wm;function iu(){return wm||(wm=1,Wr.exports=y0()),Wr.exports}var H=iu();const b0=_m(H);var Fr={exports:{}},ms={},eu={exports:{}},tu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function x0(){return Sm||(Sm=1,function(o){function u(L,V){var ue=L.length;L.push(V);e:for(;0<ue;){var xe=ue-1>>>1,b=L[xe];if(0<h(b,V))L[xe]=V,L[ue]=b,ue=xe;else break e}}function v(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],ue=L.pop();if(ue!==V){L[0]=ue;e:for(var xe=0,b=L.length,X=b>>>1;xe<X;){var re=2*(xe+1)-1,I=L[re],de=re+1,Se=L[de];if(0>h(I,ue))de<b&&0>h(Se,I)?(L[xe]=Se,L[de]=ue,xe=de):(L[xe]=I,L[re]=ue,xe=re);else if(de<b&&0>h(Se,ue))L[xe]=Se,L[de]=ue,xe=de;else break e}}return V}function h(L,V){var ue=L.sortIndex-V.sortIndex;return ue!==0?ue:L.id-V.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var f=Date,E=f.now();o.unstable_now=function(){return f.now()-E}}var p=[],y=[],g=1,A=null,j=3,T=!1,Z=!1,_=!1,Y=!1,P=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function te(L){for(var V=v(y);V!==null;){if(V.callback===null)r(y);else if(V.startTime<=L)r(y),V.sortIndex=V.expirationTime,u(p,V);else break;V=v(y)}}function R(L){if(_=!1,te(L),!Z)if(v(p)!==null)Z=!0,J||(J=!0,ie());else{var V=v(y);V!==null&&fe(R,V.startTime-L)}}var J=!1,z=-1,Q=5,ee=-1;function ce(){return Y?!0:!(o.unstable_now()-ee<Q)}function ge(){if(Y=!1,J){var L=o.unstable_now();ee=L;var V=!0;try{e:{Z=!1,_&&(_=!1,K(z),z=-1),T=!0;var ue=j;try{t:{for(te(L),A=v(p);A!==null&&!(A.expirationTime>L&&ce());){var xe=A.callback;if(typeof xe=="function"){A.callback=null,j=A.priorityLevel;var b=xe(A.expirationTime<=L);if(L=o.unstable_now(),typeof b=="function"){A.callback=b,te(L),V=!0;break t}A===v(p)&&r(p),te(L)}else r(p);A=v(p)}if(A!==null)V=!0;else{var X=v(y);X!==null&&fe(R,X.startTime-L),V=!1}}break e}finally{A=null,j=ue,T=!1}V=void 0}}finally{V?ie():J=!1}}}var ie;if(typeof q=="function")ie=function(){q(ge)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ke=be.port2;be.port1.onmessage=ge,ie=function(){ke.postMessage(null)}}else ie=function(){P(ge,0)};function fe(L,V){z=P(function(){L(o.unstable_now())},V)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(L){L.callback=null},o.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<L?Math.floor(1e3/L):5},o.unstable_getCurrentPriorityLevel=function(){return j},o.unstable_next=function(L){switch(j){case 1:case 2:case 3:var V=3;break;default:V=j}var ue=j;j=V;try{return L()}finally{j=ue}},o.unstable_requestPaint=function(){Y=!0},o.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ue=j;j=L;try{return V()}finally{j=ue}},o.unstable_scheduleCallback=function(L,V,ue){var xe=o.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,L){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=ue+b,L={id:g++,callback:V,priorityLevel:L,startTime:ue,expirationTime:b,sortIndex:-1},ue>xe?(L.sortIndex=ue,u(y,L),v(p)===null&&L===v(y)&&(_?(K(z),z=-1):_=!0,fe(R,ue-xe))):(L.sortIndex=b,u(p,L),Z||T||(Z=!0,J||(J=!0,ie()))),L},o.unstable_shouldYield=ce,o.unstable_wrapCallback=function(L){var V=j;return function(){var ue=j;j=V;try{return L.apply(this,arguments)}finally{j=ue}}}}(tu)),tu}var jm;function v0(){return jm||(jm=1,eu.exports=x0()),eu.exports}var lu={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function w0(){if(Nm)return Ft;Nm=1;var o=iu();function u(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)y+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var r={d:{f:v,r:function(){throw Error(u(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},h=Symbol.for("react.portal");function S(p,y,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:A==null?null:""+A,children:p,containerInfo:y,implementation:g}}var f=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function E(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ft.createPortal=function(p,y){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(u(299));return S(p,y,null,g)},Ft.flushSync=function(p){var y=f.T,g=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=g,r.d.f()}},Ft.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Ft.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Ft.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var g=y.as,A=E(g,y.crossOrigin),j=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;g==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:j,fetchPriority:T}):g==="script"&&r.d.X(p,{crossOrigin:A,integrity:j,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ft.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var g=E(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:g,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Ft.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var g=y.as,A=E(g,y.crossOrigin);r.d.L(p,g,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ft.preloadModule=function(p,y){if(typeof p=="string")if(y){var g=E(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:g,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Ft.requestFormReset=function(p){r.d.r(p)},Ft.unstable_batchedUpdates=function(p,y){return p(y)},Ft.useFormState=function(p,y,g){return f.H.useFormState(p,y,g)},Ft.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ft.version="19.1.0",Ft}var Dm;function S0(){if(Dm)return lu.exports;Dm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),lu.exports=w0(),lu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em;function j0(){if(Em)return ms;Em=1;var o=v0(),u=iu(),v=S0();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function S(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function E(e){if(S(e)!==e)throw Error(r(188))}function p(e){var t=e.alternate;if(!t){if(t=S(e),t===null)throw Error(r(188));return t!==e?null:e}for(var l=e,n=t;;){var a=l.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){l=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===l)return E(a),e;if(i===n)return E(a),t;i=i.sibling}throw Error(r(188))}if(l.return!==n.return)l=a,n=i;else{for(var c=!1,d=a.child;d;){if(d===l){c=!0,l=a,n=i;break}if(d===n){c=!0,n=a,l=i;break}d=d.sibling}if(!c){for(d=i.child;d;){if(d===l){c=!0,l=i,n=a;break}if(d===n){c=!0,n=i,l=a;break}d=d.sibling}if(!c)throw Error(r(189))}}if(l.alternate!==n)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,A=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),q=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=ge&&e[ge]||e["@@iterator"],typeof e=="function"?e:null)}var be=Symbol.for("react.client.reference");function ke(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case Y:return"Profiler";case _:return"StrictMode";case R:return"Suspense";case J:return"SuspenseList";case ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case q:return(e.displayName||"Context")+".Provider";case K:return(e._context.displayName||"Context")+".Consumer";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return t=e.displayName||null,t!==null?t:ke(e.type)||"Memo";case Q:t=e._payload,e=e._init;try{return ke(e(t))}catch{}}return null}var fe=Array.isArray,L=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=v.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],b=-1;function X(e){return{current:e}}function re(e){0>b||(e.current=xe[b],xe[b]=null,b--)}function I(e,t){b++,xe[b]=e.current,e.current=t}var de=X(null),Se=X(null),se=X(null),Ge=X(null);function Ie(e,t){switch(I(se,t),I(Se,e),I(de,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Vf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Vf(t),e=Pf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(de),I(de,e)}function _t(){re(de),re(Se),re(se)}function nl(e){e.memoizedState!==null&&I(Ge,e);var t=de.current,l=Pf(t,e.type);t!==l&&(I(Se,e),I(de,l))}function al(e){Se.current===e&&(re(de),re(Se)),Ge.current===e&&(re(Ge),os._currentValue=ue)}var Be=Object.prototype.hasOwnProperty,it=o.unstable_scheduleCallback,Kt=o.unstable_cancelCallback,Yt=o.unstable_shouldYield,qt=o.unstable_requestPaint,wt=o.unstable_now,Ql=o.unstable_getCurrentPriorityLevel,tl=o.unstable_ImmediatePriority,il=o.unstable_UserBlockingPriority,gl=o.unstable_NormalPriority,Cl=o.unstable_LowPriority,Tl=o.unstable_IdlePriority,sn=o.log,on=o.unstable_setDisableYieldValue,Me=null,je=null;function Ce(e){if(typeof sn=="function"&&on(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Me,e)}catch{}}var Ye=Math.clz32?Math.clz32:Ue,Re=Math.log,gt=Math.LN2;function Ue(e){return e>>>=0,e===0?32:31-(Re(e)/gt|0)|0}var sl=256,Fe=4194304;function Dt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Rt(e,t,l){var n=e.pendingLanes;if(n===0)return 0;var a=0,i=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var d=n&134217727;return d!==0?(n=d&~i,n!==0?a=Dt(n):(c&=d,c!==0?a=Dt(c):l||(l=d&~e,l!==0&&(a=Dt(l))))):(d=n&~i,d!==0?a=Dt(d):c!==0?a=Dt(c):l||(l=n&~e,l!==0&&(a=Dt(l)))),a===0?0:t!==0&&t!==a&&(t&i)===0&&(i=a&-a,l=t&-t,i>=l||i===32&&(l&4194048)!==0)?t:a}function Jt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Vl(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $e(){var e=sl;return sl<<=1,(sl&4194048)===0&&(sl=256),e}function Xt(){var e=Fe;return Fe<<=1,(Fe&62914560)===0&&(Fe=4194304),e}function ol(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function Ot(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cn(e,t,l,n,a,i){var c=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var d=e.entanglements,N=e.expirationTimes,U=e.hiddenUpdates;for(l=c&~l;0<l;){var $=31-Ye(l),F=1<<$;d[$]=0,N[$]=-1;var B=U[$];if(B!==null)for(U[$]=null,$=0;$<B.length;$++){var G=B[$];G!==null&&(G.lane&=-536870913)}l&=~F}n!==0&&kt(e,n,0),i!==0&&a===0&&e.tag!==0&&(e.suspendedLanes|=i&~(c&~t))}function kt(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-Ye(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|l&4194090}function pl(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var n=31-Ye(l),a=1<<n;a&t|e[n]&t&&(e[n]|=t),l&=~a}}function bt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function yl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function w(){var e=V.p;return e!==0?e:(e=window.event,e===void 0?32:fm(e.type))}function It(e,t){var l=V.p;try{return V.p=e,t()}finally{V.p=l}}var ve=Math.random().toString(36).slice(2),St="__reactFiber$"+ve,Tt="__reactProps$"+ve,Pl="__reactContainer$"+ve,ea="__reactEvents$"+ve,di="__reactListeners$"+ve,va="__reactHandles$"+ve,ta="__reactResources$"+ve,ye="__reactMarker$"+ve;function le(e){delete e[St],delete e[Tt],delete e[ea],delete e[di],delete e[va]}function oe(e){var t=e[St];if(t)return t;for(var l=e.parentNode;l;){if(t=l[Pl]||l[St]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=$f(e);e!==null;){if(l=e[St])return l;e=$f(e)}return t}e=l,l=e.parentNode}return null}function Qe(e){if(e=e[St]||e[Pl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function he(e){var t=e[ta];return t||(t=e[ta]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ee(e){e[ye]=!0}var xt=new Set,tt={};function Le(e,t){qe(e,t),qe(e+"Capture",t)}function qe(e,t){for(tt[e]=t,e=0;e<t.length;e++)xt.add(t[e])}var ft=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ae={},at={};function Ut(e){return Be.call(at,e)?!0:Be.call(Ae,e)?!1:ft.test(e)?at[e]=!0:(Ae[e]=!0,!1)}function He(e,t,l){if(Ut(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function We(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function st(e,t,l,n){if(n===null)e.removeAttribute(l);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+n)}}var cl,Bl;function rl(e){if(cl===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);cl=t&&t[1]||"",Bl=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cl+e+Bl}var fi=!1;function mi(e,t){if(!e||fi)return"";fi=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var F=function(){throw Error()};if(Object.defineProperty(F.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(F,[])}catch(G){var B=G}Reflect.construct(e,[],F)}else{try{F.call()}catch(G){B=G}e.call(F.prototype)}}else{try{throw Error()}catch(G){B=G}(F=e())&&typeof F.catch=="function"&&F.catch(function(){})}}catch(G){if(G&&B&&typeof G.stack=="string")return[G.stack,B.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),c=i[0],d=i[1];if(c&&d){var N=c.split(`
`),U=d.split(`
`);for(a=n=0;n<N.length&&!N[n].includes("DetermineComponentFrameRoot");)n++;for(;a<U.length&&!U[a].includes("DetermineComponentFrameRoot");)a++;if(n===N.length||a===U.length)for(n=N.length-1,a=U.length-1;1<=n&&0<=a&&N[n]!==U[a];)a--;for(;1<=n&&0<=a;n--,a--)if(N[n]!==U[a]){if(n!==1||a!==1)do if(n--,a--,0>a||N[n]!==U[a]){var $=`
`+N[n].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=n&&0<=a);break}}}finally{fi=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?rl(l):""}function ko(e){switch(e.tag){case 26:case 27:case 5:return rl(e.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 15:return mi(e.type,!1);case 11:return mi(e.type.render,!1);case 1:return mi(e.type,!0);case 31:return rl("Activity");default:return""}}function gs(e){try{var t="";do t+=ko(e),e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ul(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ps(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uo(e){var t=ps(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var a=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(c){n=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return n},setValue:function(c){n=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wa(e){e._valueTracker||(e._valueTracker=Uo(e))}function ys(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),n="";return e&&(n=ps(e)?e.checked?"true":"false":e.value),e=n,e!==l?(t.setValue(e),!0):!1}function Sa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ho=/[\n"\\]/g;function dl(e){return e.replace(Ho,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ja(e,t,l,n,a,i,c,d){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ul(t)):e.value!==""+ul(t)&&(e.value=""+ul(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?hi(e,c,ul(t)):l!=null?hi(e,c,ul(l)):n!=null&&e.removeAttribute("value"),a==null&&i!=null&&(e.defaultChecked=!!i),a!=null&&(e.checked=a&&typeof a!="function"&&typeof a!="symbol"),d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.name=""+ul(d):e.removeAttribute("name")}function bs(e,t,l,n,a,i,c,d){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||l!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;l=l!=null?""+ul(l):"",t=t!=null?""+ul(t):l,d||t===e.value||(e.value=t),e.defaultValue=t}n=n??a,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=d?e.checked:!!n,e.defaultChecked=!!n,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function hi(e,t,l){t==="number"&&Sa(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Nn(e,t,l,n){if(e=e.options,t){t={};for(var a=0;a<l.length;a++)t["$"+l[a]]=!0;for(l=0;l<e.length;l++)a=t.hasOwnProperty("$"+e[l].value),e[l].selected!==a&&(e[l].selected=a),a&&n&&(e[l].defaultSelected=!0)}else{for(l=""+ul(l),t=null,a=0;a<e.length;a++){if(e[a].value===l){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function gi(e,t,l){if(t!=null&&(t=""+ul(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+ul(l):""}function xs(e,t,l,n){if(t==null){if(n!=null){if(l!=null)throw Error(r(92));if(fe(n)){if(1<n.length)throw Error(r(93));n=n[0]}l=n}l==null&&(l=""),t=l}l=ul(t),e.defaultValue=l,n=e.textContent,n===l&&n!==""&&n!==null&&(e.value=n)}function Dn(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Bo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vs(e,t,l){var n=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,l):typeof l!="number"||l===0||Bo.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function ws(e,t,l){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,l!=null){for(var n in l)!l.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&l[a]!==n&&vs(e,a,n)}else for(var i in t)t.hasOwnProperty(i)&&vs(e,i,t[i])}function pi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ss=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Go=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(e){return Go.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var yi=null;function bi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var En=null,Cn=null;function js(e){var t=Qe(e);if(t&&(e=t.stateNode)){var l=e[Tt]||null;e:switch(e=t.stateNode,t.type){case"input":if(ja(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+dl(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var n=l[t];if(n!==e&&n.form===e.form){var a=n[Tt]||null;if(!a)throw Error(r(90));ja(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<l.length;t++)n=l[t],n.form===e.form&&ys(n)}break e;case"textarea":gi(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&Nn(e,!!l.multiple,t,!1)}}}var xi=!1;function Ns(e,t,l){if(xi)return e(t,l);xi=!0;try{var n=e(t);return n}finally{if(xi=!1,(En!==null||Cn!==null)&&(mo(),En&&(t=En,e=Cn,Cn=En=null,js(t),e)))for(t=0;t<e.length;t++)js(e[t])}}function la(e,t){var l=e.stateNode;if(l===null)return null;var n=l[Tt]||null;if(n===null)return null;l=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(r(231,t,typeof l));return l}var Gl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Da=!1;if(Gl)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){Da=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Da=!1}var Kl=null,vi=null,Ea=null;function Ds(){if(Ea)return Ea;var e,t=vi,l=t.length,n,a="value"in Kl?Kl.value:Kl.textContent,i=a.length;for(e=0;e<l&&t[e]===a[e];e++);var c=l-e;for(n=1;n<=c&&t[l-n]===a[i-n];n++);return Ea=a.slice(e,1<n?1-n:void 0)}function Jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ca(){return!0}function Tn(){return!1}function $t(e){function t(l,n,a,i,c){this._reactName=l,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(l=e[d],this[d]=l?l(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ca:Tn,this.isPropagationStopped=Tn,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ca)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ca)},persist:function(){},isPersistent:Ca}),t}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=$t(rn),na=g({},rn,{view:0,detail:0}),Yo=$t(na),wi,Si,aa,Aa=g({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ma,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==aa&&(aa&&e.type==="mousemove"?(wi=e.screenX-aa.screenX,Si=e.screenY-aa.screenY):Si=wi=0,aa=e),wi)},movementY:function(e){return"movementY"in e?e.movementY:Si}}),Es=$t(Aa),qo=g({},Aa,{dataTransfer:0}),Xo=$t(qo),Zo=g({},na,{relatedTarget:0}),ji=$t(Zo),Qo=g({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),Vo=$t(Qo),Po=g({},rn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ko=$t(Po),Jo=g({},rn,{data:0}),Cs=$t(Jo),Io={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wo[e])?!!t[e]:!1}function Ma(){return Fo}var ec=g({},na,{key:function(e){if(e.key){var t=Io[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$o[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ma,charCode:function(e){return e.type==="keypress"?Jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tc=$t(ec),lc=g({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ts=$t(lc),nc=g({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ma}),ac=$t(nc),ic=g({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),sc=$t(ic),oc=g({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),As=$t(oc),Ni=g({},rn,{newState:0,oldState:0}),cc=$t(Ni),Ms=[9,13,27,32],_a=Gl&&"CompositionEvent"in window,An=null;Gl&&"documentMode"in document&&(An=document.documentMode);var _s=Gl&&"TextEvent"in window&&!An,Di=Gl&&(!_a||An&&8<An&&11>=An),m=" ",x=!1;function D(e,t){switch(e){case"keyup":return Ms.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ae=!1;function ne(e,t){switch(e){case"compositionend":return M(t);case"keypress":return t.which!==32?null:(x=!0,m);case"textInput":return e=t.data,e===m&&x?null:e;default:return null}}function me(e,t){if(ae)return e==="compositionend"||!_a&&D(e,t)?(e=Ds(),Ea=vi=Kl=null,ae=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Di&&t.locale!=="ko"?null:t.data;default:return null}}var De={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ne(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!De[e.type]:t==="textarea"}function Pe(e,t,l,n){En?Cn?Cn.push(n):Cn=[n]:En=n,t=xo(t,"onChange"),0<t.length&&(l=new Ta("onChange","change",null,l,n),e.push({event:l,listeners:t}))}var bl=null,Al=null;function Rs(e){Yf(e,0)}function Ra(e){var t=pe(e);if(ys(t))return e}function Os(e,t){if(e==="change")return t}var Oa=!1;if(Gl){var Mn;if(Gl){var Ei="oninput"in document;if(!Ei){var Ml=document.createElement("div");Ml.setAttribute("oninput","return;"),Ei=typeof Ml.oninput=="function"}Mn=Ei}else Mn=!1;Oa=Mn&&(!document.documentMode||9<document.documentMode)}function uu(){bl&&(bl.detachEvent("onpropertychange",du),Al=bl=null)}function du(e){if(e.propertyName==="value"&&Ra(Al)){var t=[];Pe(t,Al,e,bi(e)),Ns(Rs,t)}}function Qm(e,t,l){e==="focusin"?(uu(),bl=t,Al=l,bl.attachEvent("onpropertychange",du)):e==="focusout"&&uu()}function Vm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ra(Al)}function Pm(e,t){if(e==="click")return Ra(t)}function Km(e,t){if(e==="input"||e==="change")return Ra(t)}function Jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xl=typeof Object.is=="function"?Object.is:Jm;function Ci(e,t){if(xl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),n=Object.keys(t);if(l.length!==n.length)return!1;for(n=0;n<l.length;n++){var a=l[n];if(!Be.call(t,a)||!xl(e[a],t[a]))return!1}return!0}function fu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,t){var l=fu(e);e=0;for(var n;l;){if(l.nodeType===3){if(n=e+l.textContent.length,e<=t&&n>=t)return{node:l,offset:t-e};e=n}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=fu(l)}}function hu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Sa(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=Sa(e.document)}return t}function rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Im=Gl&&"documentMode"in document&&11>=document.documentMode,La=null,uc=null,Ti=null,dc=!1;function pu(e,t,l){var n=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;dc||La==null||La!==Sa(n)||(n=La,"selectionStart"in n&&rc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ti&&Ci(Ti,n)||(Ti=n,n=xo(uc,"onSelect"),0<n.length&&(t=new Ta("onSelect","select",null,t,l),e.push({event:t,listeners:n}),t.target=La)))}function ia(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var za={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},fc={},yu={};Gl&&(yu=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function sa(e){if(fc[e])return fc[e];if(!za[e])return e;var t=za[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in yu)return fc[e]=t[l];return e}var bu=sa("animationend"),xu=sa("animationiteration"),vu=sa("animationstart"),$m=sa("transitionrun"),Wm=sa("transitionstart"),Fm=sa("transitioncancel"),wu=sa("transitionend"),Su=new Map,mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mc.push("scrollEnd");function ql(e,t){Su.set(e,t),Le(t,[e])}var ju=new WeakMap;function _l(e,t){if(typeof e=="object"&&e!==null){var l=ju.get(e);return l!==void 0?l:(t={value:e,source:t,stack:gs(t)},ju.set(e,t),t)}return{value:e,source:t,stack:gs(t)}}var Rl=[],ka=0,hc=0;function Ls(){for(var e=ka,t=hc=ka=0;t<e;){var l=Rl[t];Rl[t++]=null;var n=Rl[t];Rl[t++]=null;var a=Rl[t];Rl[t++]=null;var i=Rl[t];if(Rl[t++]=null,n!==null&&a!==null){var c=n.pending;c===null?a.next=a:(a.next=c.next,c.next=a),n.pending=a}i!==0&&Nu(l,a,i)}}function zs(e,t,l,n){Rl[ka++]=e,Rl[ka++]=t,Rl[ka++]=l,Rl[ka++]=n,hc|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function gc(e,t,l,n){return zs(e,t,l,n),ks(e)}function Ua(e,t){return zs(e,null,null,t),ks(e)}function Nu(e,t,l){e.lanes|=l;var n=e.alternate;n!==null&&(n.lanes|=l);for(var a=!1,i=e.return;i!==null;)i.childLanes|=l,n=i.alternate,n!==null&&(n.childLanes|=l),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(a=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,a&&t!==null&&(a=31-Ye(l),e=i.hiddenUpdates,n=e[a],n===null?e[a]=[t]:n.push(t),t.lane=l|536870912),i):null}function ks(e){if(50<Fi)throw Fi=0,wr=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ha={};function eh(e,t,l,n){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vl(e,t,l,n){return new eh(e,t,l,n)}function pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function un(e,t){var l=e.alternate;return l===null?(l=vl(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Du(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Us(e,t,l,n,a,i){var c=0;if(n=e,typeof e=="function")pc(e)&&(c=1);else if(typeof e=="string")c=l0(e,l,de.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ee:return e=vl(31,l,t,a),e.elementType=ee,e.lanes=i,e;case Z:return oa(l.children,a,i,t);case _:c=8,a|=24;break;case Y:return e=vl(12,l,t,a|2),e.elementType=Y,e.lanes=i,e;case R:return e=vl(13,l,t,a),e.elementType=R,e.lanes=i,e;case J:return e=vl(19,l,t,a),e.elementType=J,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:case q:c=10;break e;case K:c=9;break e;case te:c=11;break e;case z:c=14;break e;case Q:c=16,n=null;break e}c=29,l=Error(r(130,e===null?"null":typeof e,"")),n=null}return t=vl(c,l,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function oa(e,t,l,n){return e=vl(7,e,n,t),e.lanes=l,e}function yc(e,t,l){return e=vl(6,e,null,t),e.lanes=l,e}function bc(e,t,l){return t=vl(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ba=[],Ga=0,Hs=null,Bs=0,Ol=[],Ll=0,ca=null,dn=1,fn="";function ra(e,t){Ba[Ga++]=Bs,Ba[Ga++]=Hs,Hs=e,Bs=t}function Eu(e,t,l){Ol[Ll++]=dn,Ol[Ll++]=fn,Ol[Ll++]=ca,ca=e;var n=dn;e=fn;var a=32-Ye(n)-1;n&=~(1<<a),l+=1;var i=32-Ye(t)+a;if(30<i){var c=a-a%5;i=(n&(1<<c)-1).toString(32),n>>=c,a-=c,dn=1<<32-Ye(t)+a|l<<a|n,fn=i+e}else dn=1<<i|l<<a|n,fn=e}function xc(e){e.return!==null&&(ra(e,1),Eu(e,1,0))}function vc(e){for(;e===Hs;)Hs=Ba[--Ga],Ba[Ga]=null,Bs=Ba[--Ga],Ba[Ga]=null;for(;e===ca;)ca=Ol[--Ll],Ol[Ll]=null,fn=Ol[--Ll],Ol[Ll]=null,dn=Ol[--Ll],Ol[Ll]=null}var ll=null,jt=null,nt=!1,ua=null,Il=!1,wc=Error(r(519));function da(e){var t=Error(r(418,""));throw _i(_l(t,e)),wc}function Cu(e){var t=e.stateNode,l=e.type,n=e.memoizedProps;switch(t[St]=e,t[Tt]=n,l){case"dialog":Je("cancel",t),Je("close",t);break;case"iframe":case"object":case"embed":Je("load",t);break;case"video":case"audio":for(l=0;l<ts.length;l++)Je(ts[l],t);break;case"source":Je("error",t);break;case"img":case"image":case"link":Je("error",t),Je("load",t);break;case"details":Je("toggle",t);break;case"input":Je("invalid",t),bs(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),wa(t);break;case"select":Je("invalid",t);break;case"textarea":Je("invalid",t),xs(t,n.value,n.defaultValue,n.children),wa(t)}l=n.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||n.suppressHydrationWarning===!0||Qf(t.textContent,l)?(n.popover!=null&&(Je("beforetoggle",t),Je("toggle",t)),n.onScroll!=null&&Je("scroll",t),n.onScrollEnd!=null&&Je("scrollend",t),n.onClick!=null&&(t.onclick=vo),t=!0):t=!1,t||da(e)}function Tu(e){for(ll=e.return;ll;)switch(ll.tag){case 5:case 13:Il=!1;return;case 27:case 3:Il=!0;return;default:ll=ll.return}}function Ai(e){if(e!==ll)return!1;if(!nt)return Tu(e),nt=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Ur(e.type,e.memoizedProps)),l=!l),l&&jt&&da(e),Tu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(t===0){jt=Zl(e.nextSibling);break e}t--}else l!=="$"&&l!=="$!"&&l!=="$?"||t++;e=e.nextSibling}jt=null}}else t===27?(t=jt,Vn(e.type)?(e=Yr,Yr=null,jt=e):jt=t):jt=ll?Zl(e.stateNode.nextSibling):null;return!0}function Mi(){jt=ll=null,nt=!1}function Au(){var e=ua;return e!==null&&(hl===null?hl=e:hl.push.apply(hl,e),ua=null),e}function _i(e){ua===null?ua=[e]:ua.push(e)}var Sc=X(null),fa=null,mn=null;function _n(e,t,l){I(Sc,t._currentValue),t._currentValue=l}function hn(e){e._currentValue=Sc.current,re(Sc)}function jc(e,t,l){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===l)break;e=e.return}}function Nc(e,t,l,n){var a=e.child;for(a!==null&&(a.return=e);a!==null;){var i=a.dependencies;if(i!==null){var c=a.child;i=i.firstContext;e:for(;i!==null;){var d=i;i=a;for(var N=0;N<t.length;N++)if(d.context===t[N]){i.lanes|=l,d=i.alternate,d!==null&&(d.lanes|=l),jc(i.return,l,e),n||(c=null);break e}i=d.next}}else if(a.tag===18){if(c=a.return,c===null)throw Error(r(341));c.lanes|=l,i=c.alternate,i!==null&&(i.lanes|=l),jc(c,l,e),c=null}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===e){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}}function Ri(e,t,l,n){e=null;for(var a=t,i=!1;a!==null;){if(!i){if((a.flags&524288)!==0)i=!0;else if((a.flags&262144)!==0)break}if(a.tag===10){var c=a.alternate;if(c===null)throw Error(r(387));if(c=c.memoizedProps,c!==null){var d=a.type;xl(a.pendingProps.value,c.value)||(e!==null?e.push(d):e=[d])}}else if(a===Ge.current){if(c=a.alternate,c===null)throw Error(r(387));c.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(e!==null?e.push(os):e=[os])}a=a.return}e!==null&&Nc(t,e,l,n),t.flags|=262144}function Gs(e){for(e=e.firstContext;e!==null;){if(!xl(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ma(e){fa=e,mn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Mu(fa,e)}function Ys(e,t){return fa===null&&ma(e),Mu(e,t)}function Mu(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},mn===null){if(e===null)throw Error(r(308));mn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else mn=mn.next=t;return l}var th=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},lh=o.unstable_scheduleCallback,nh=o.unstable_NormalPriority,Lt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new th,data:new Map,refCount:0}}function Oi(e){e.refCount--,e.refCount===0&&lh(nh,function(){e.controller.abort()})}var Li=null,Ec=0,Ya=0,qa=null;function ah(e,t){if(Li===null){var l=Li=[];Ec=0,Ya=Tr(),qa={status:"pending",value:void 0,then:function(n){l.push(n)}}}return Ec++,t.then(_u,_u),t}function _u(){if(--Ec===0&&Li!==null){qa!==null&&(qa.status="fulfilled");var e=Li;Li=null,Ya=0,qa=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ih(e,t){var l=[],n={status:"pending",value:null,reason:null,then:function(a){l.push(a)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var a=0;a<l.length;a++)(0,l[a])(t)},function(a){for(n.status="rejected",n.reason=a,a=0;a<l.length;a++)(0,l[a])(void 0)}),n}var Ru=L.S;L.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&ah(e,t),Ru!==null&&Ru(e,t)};var ha=X(null);function Cc(){var e=ha.current;return e!==null?e:ht.pooledCache}function qs(e,t){t===null?I(ha,ha.current):I(ha,t.pool)}function Ou(){var e=Cc();return e===null?null:{parent:Lt._currentValue,pool:e}}var zi=Error(r(460)),Lu=Error(r(474)),Xs=Error(r(542)),Tc={then:function(){}};function zu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Zs(){}function ku(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Zs,Zs),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hu(e),e;default:if(typeof t.status=="string")t.then(Zs,Zs);else{if(e=ht,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var a=t;a.status="fulfilled",a.value=n}},function(n){if(t.status==="pending"){var a=t;a.status="rejected",a.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hu(e),e}throw ki=t,zi}}var ki=null;function Uu(){if(ki===null)throw Error(r(459));var e=ki;return ki=null,e}function Hu(e){if(e===zi||e===Xs)throw Error(r(483))}var Rn=!1;function Ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function On(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ln(e,t,l){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ot&2)!==0){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=ks(e),Nu(e,null,l),t}return zs(e,n,t,l),ks(e)}function Ui(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,l|=n,t.lanes=l,pl(e,l)}}function _c(e,t){var l=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,l===n)){var a=null,i=null;if(l=l.firstBaseUpdate,l!==null){do{var c={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};i===null?a=i=c:i=i.next=c,l=l.next}while(l!==null);i===null?a=i=t:i=i.next=t}else a=i=t;l={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var Rc=!1;function Hi(){if(Rc){var e=qa;if(e!==null)throw e}}function Bi(e,t,l,n){Rc=!1;var a=e.updateQueue;Rn=!1;var i=a.firstBaseUpdate,c=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var N=d,U=N.next;N.next=null,c===null?i=U:c.next=U,c=N;var $=e.alternate;$!==null&&($=$.updateQueue,d=$.lastBaseUpdate,d!==c&&(d===null?$.firstBaseUpdate=U:d.next=U,$.lastBaseUpdate=N))}if(i!==null){var F=a.baseState;c=0,$=U=N=null,d=i;do{var B=d.lane&-536870913,G=B!==d.lane;if(G?(et&B)===B:(n&B)===B){B!==0&&B===Ya&&(Rc=!0),$!==null&&($=$.next={lane:0,tag:d.tag,payload:d.payload,callback:null,next:null});e:{var ze=e,_e=d;B=t;var dt=l;switch(_e.tag){case 1:if(ze=_e.payload,typeof ze=="function"){F=ze.call(dt,F,B);break e}F=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=_e.payload,B=typeof ze=="function"?ze.call(dt,F,B):ze,B==null)break e;F=g({},F,B);break e;case 2:Rn=!0}}B=d.callback,B!==null&&(e.flags|=64,G&&(e.flags|=8192),G=a.callbacks,G===null?a.callbacks=[B]:G.push(B))}else G={lane:B,tag:d.tag,payload:d.payload,callback:d.callback,next:null},$===null?(U=$=G,N=F):$=$.next=G,c|=B;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;G=d,d=G.next,G.next=null,a.lastBaseUpdate=G,a.shared.pending=null}}while(!0);$===null&&(N=F),a.baseState=N,a.firstBaseUpdate=U,a.lastBaseUpdate=$,i===null&&(a.shared.lanes=0),qn|=c,e.lanes=c,e.memoizedState=F}}function Bu(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Gu(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Bu(l[e],t)}var Xa=X(null),Qs=X(0);function Yu(e,t){e=wn,I(Qs,e),I(Xa,t),wn=e|t.baseLanes}function Oc(){I(Qs,wn),I(Xa,Xa.current)}function Lc(){wn=Qs.current,re(Xa),re(Qs)}var zn=0,Ze=null,rt=null,At=null,Vs=!1,Za=!1,ga=!1,Ps=0,Gi=0,Qa=null,sh=0;function Et(){throw Error(r(321))}function zc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!xl(e[l],t[l]))return!1;return!0}function kc(e,t,l,n,a,i){return zn=i,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=e===null||e.memoizedState===null?Nd:Dd,ga=!1,i=l(n,a),ga=!1,Za&&(i=Xu(t,l,n,a)),qu(e),i}function qu(e){L.H=Fs;var t=rt!==null&&rt.next!==null;if(zn=0,At=rt=Ze=null,Vs=!1,Gi=0,Qa=null,t)throw Error(r(300));e===null||Ht||(e=e.dependencies,e!==null&&Gs(e)&&(Ht=!0))}function Xu(e,t,l,n){Ze=e;var a=0;do{if(Za&&(Qa=null),Gi=0,Za=!1,25<=a)throw Error(r(301));if(a+=1,At=rt=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}L.H=mh,i=t(l,n)}while(Za);return i}function oh(){var e=L.H,t=e.useState()[0];return t=typeof t.then=="function"?Yi(t):t,e=e.useState()[0],(rt!==null?rt.memoizedState:null)!==e&&(Ze.flags|=1024),t}function Uc(){var e=Ps!==0;return Ps=0,e}function Hc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Bc(e){if(Vs){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Vs=!1}zn=0,At=rt=Ze=null,Za=!1,Gi=Ps=0,Qa=null}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Ze.memoizedState=At=e:At=At.next=e,At}function Mt(){if(rt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=At===null?Ze.memoizedState:At.next;if(t!==null)At=t,rt=e;else{if(e===null)throw Ze.alternate===null?Error(r(467)):Error(r(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},At===null?Ze.memoizedState=At=e:At=At.next=e}return At}function Gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yi(e){var t=Gi;return Gi+=1,Qa===null&&(Qa=[]),e=ku(Qa,e,t),t=Ze,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,L.H=t===null||t.memoizedState===null?Nd:Dd),e}function Ks(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Yi(e);if(e.$$typeof===q)return Wt(e)}throw Error(r(438,String(e)))}function Yc(e){var t=null,l=Ze.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var n=Ze.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(a){return a.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Gc(),Ze.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),n=0;n<e;n++)l[n]=ce;return t.index++,l}function gn(e,t){return typeof t=="function"?t(e):t}function Js(e){var t=Mt();return qc(t,rt,e)}function qc(e,t,l){var n=e.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=l;var a=e.baseQueue,i=n.pending;if(i!==null){if(a!==null){var c=a.next;a.next=i.next,i.next=c}t.baseQueue=a=i,n.pending=null}if(i=e.baseState,a===null)e.memoizedState=i;else{t=a.next;var d=c=null,N=null,U=t,$=!1;do{var F=U.lane&-536870913;if(F!==U.lane?(et&F)===F:(zn&F)===F){var B=U.revertLane;if(B===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),F===Ya&&($=!0);else if((zn&B)===B){U=U.next,B===Ya&&($=!0);continue}else F={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(d=N=F,c=i):N=N.next=F,Ze.lanes|=B,qn|=B;F=U.action,ga&&l(i,F),i=U.hasEagerState?U.eagerState:l(i,F)}else B={lane:F,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(d=N=B,c=i):N=N.next=B,Ze.lanes|=F,qn|=F;U=U.next}while(U!==null&&U!==t);if(N===null?c=i:N.next=d,!xl(i,e.memoizedState)&&(Ht=!0,$&&(l=qa,l!==null)))throw l;e.memoizedState=i,e.baseState=c,e.baseQueue=N,n.lastRenderedState=i}return a===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Xc(e){var t=Mt(),l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=e;var n=l.dispatch,a=l.pending,i=t.memoizedState;if(a!==null){l.pending=null;var c=a=a.next;do i=e(i,c.action),c=c.next;while(c!==a);xl(i,t.memoizedState)||(Ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),l.lastRenderedState=i}return[i,n]}function Zu(e,t,l){var n=Ze,a=Mt(),i=nt;if(i){if(l===void 0)throw Error(r(407));l=l()}else l=t();var c=!xl((rt||a).memoizedState,l);c&&(a.memoizedState=l,Ht=!0),a=a.queue;var d=Pu.bind(null,n,a,e);if(qi(2048,8,d,[e]),a.getSnapshot!==t||c||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Va(9,Is(),Vu.bind(null,n,a,l,t),null),ht===null)throw Error(r(349));i||(zn&124)!==0||Qu(n,t,l)}return l}function Qu(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Ze.updateQueue,t===null?(t=Gc(),Ze.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function Vu(e,t,l,n){t.value=l,t.getSnapshot=n,Ku(t)&&Ju(e)}function Pu(e,t,l){return l(function(){Ku(t)&&Ju(e)})}function Ku(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!xl(e,l)}catch{return!0}}function Ju(e){var t=Ua(e,2);t!==null&&Dl(t,e,2)}function Zc(e){var t=fl();if(typeof e=="function"){var l=e;if(e=l(),ga){Ce(!0);try{l()}finally{Ce(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:e},t}function Iu(e,t,l,n){return e.baseState=l,qc(e,rt,typeof n=="function"?n:gn)}function ch(e,t,l,n,a){if(Ws(e))throw Error(r(485));if(e=t.action,e!==null){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){i.listeners.push(c)}};L.T!==null?l(!0):i.isTransition=!1,n(i),l=t.pending,l===null?(i.next=t.pending=i,$u(t,i)):(i.next=l.next,t.pending=l.next=i)}}function $u(e,t){var l=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=L.T,c={};L.T=c;try{var d=l(a,n),N=L.S;N!==null&&N(c,d),Wu(e,t,d)}catch(U){Qc(e,t,U)}finally{L.T=i}}else try{i=l(a,n),Wu(e,t,i)}catch(U){Qc(e,t,U)}}function Wu(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(n){Fu(e,t,n)},function(n){return Qc(e,t,n)}):Fu(e,t,l)}function Fu(e,t,l){t.status="fulfilled",t.value=l,ed(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,$u(e,l)))}function Qc(e,t,l){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=l,ed(t),t=t.next;while(t!==n)}e.action=null}function ed(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function td(e,t){return t}function ld(e,t){if(nt){var l=ht.formState;if(l!==null){e:{var n=Ze;if(nt){if(jt){t:{for(var a=jt,i=Il;a.nodeType!==8;){if(!i){a=null;break t}if(a=Zl(a.nextSibling),a===null){a=null;break t}}i=a.data,a=i==="F!"||i==="F"?a:null}if(a){jt=Zl(a.nextSibling),n=a.data==="F!";break e}}da(n)}n=!1}n&&(t=l[0])}}return l=fl(),l.memoizedState=l.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:td,lastRenderedState:t},l.queue=n,l=wd.bind(null,Ze,n),n.dispatch=l,n=Zc(!1),i=Ic.bind(null,Ze,!1,n.queue),n=fl(),a={state:t,dispatch:null,action:e,pending:null},n.queue=a,l=ch.bind(null,Ze,a,i,l),a.dispatch=l,n.memoizedState=e,[t,l,!1]}function nd(e){var t=Mt();return ad(t,rt,e)}function ad(e,t,l){if(t=qc(e,t,td)[0],e=Js(gn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=Yi(t)}catch(c){throw c===zi?Xs:c}else n=t;t=Mt();var a=t.queue,i=a.dispatch;return l!==t.memoizedState&&(Ze.flags|=2048,Va(9,Is(),rh.bind(null,a,l),null)),[n,i,e]}function rh(e,t){e.action=t}function id(e){var t=Mt(),l=rt;if(l!==null)return ad(t,l,e);Mt(),t=t.memoizedState,l=Mt();var n=l.queue.dispatch;return l.memoizedState=e,[t,n,!1]}function Va(e,t,l,n){return e={tag:e,create:l,deps:n,inst:t,next:null},t=Ze.updateQueue,t===null&&(t=Gc(),Ze.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(n=l.next,l.next=e,e.next=n,t.lastEffect=e),e}function Is(){return{destroy:void 0,resource:void 0}}function sd(){return Mt().memoizedState}function $s(e,t,l,n){var a=fl();n=n===void 0?null:n,Ze.flags|=e,a.memoizedState=Va(1|t,Is(),l,n)}function qi(e,t,l,n){var a=Mt();n=n===void 0?null:n;var i=a.memoizedState.inst;rt!==null&&n!==null&&zc(n,rt.memoizedState.deps)?a.memoizedState=Va(t,i,l,n):(Ze.flags|=e,a.memoizedState=Va(1|t,i,l,n))}function od(e,t){$s(8390656,8,e,t)}function cd(e,t){qi(2048,8,e,t)}function rd(e,t){return qi(4,2,e,t)}function ud(e,t){return qi(4,4,e,t)}function dd(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fd(e,t,l){l=l!=null?l.concat([e]):null,qi(4,4,dd.bind(null,t,e),l)}function Vc(){}function md(e,t){var l=Mt();t=t===void 0?null:t;var n=l.memoizedState;return t!==null&&zc(t,n[1])?n[0]:(l.memoizedState=[e,t],e)}function hd(e,t){var l=Mt();t=t===void 0?null:t;var n=l.memoizedState;if(t!==null&&zc(t,n[1]))return n[0];if(n=e(),ga){Ce(!0);try{e()}finally{Ce(!1)}}return l.memoizedState=[n,t],n}function Pc(e,t,l){return l===void 0||(zn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=l,e=bf(),Ze.lanes|=e,qn|=e,l)}function gd(e,t,l,n){return xl(l,t)?l:Xa.current!==null?(e=Pc(e,l,n),xl(e,t)||(Ht=!0),e):(zn&42)===0?(Ht=!0,e.memoizedState=l):(e=bf(),Ze.lanes|=e,qn|=e,t)}function pd(e,t,l,n,a){var i=V.p;V.p=i!==0&&8>i?i:8;var c=L.T,d={};L.T=d,Ic(e,!1,t,l);try{var N=a(),U=L.S;if(U!==null&&U(d,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=ih(N,n);Xi(e,t,$,Nl(e))}else Xi(e,t,n,Nl(e))}catch(F){Xi(e,t,{then:function(){},status:"rejected",reason:F},Nl())}finally{V.p=i,L.T=c}}function uh(){}function Kc(e,t,l,n){if(e.tag!==5)throw Error(r(476));var a=yd(e).queue;pd(e,a,t,ue,l===null?uh:function(){return bd(e),l(n)})}function yd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:ue},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gn,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function bd(e){var t=yd(e).next.queue;Xi(e,t,{},Nl())}function Jc(){return Wt(os)}function xd(){return Mt().memoizedState}function vd(){return Mt().memoizedState}function dh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=Nl();e=On(l);var n=Ln(t,e,l);n!==null&&(Dl(n,t,l),Ui(n,t,l)),t={cache:Dc()},e.payload=t;return}t=t.return}}function fh(e,t,l){var n=Nl();l={lane:n,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},Ws(e)?Sd(t,l):(l=gc(e,t,l,n),l!==null&&(Dl(l,e,n),jd(l,t,n)))}function wd(e,t,l){var n=Nl();Xi(e,t,l,n)}function Xi(e,t,l,n){var a={lane:n,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ws(e))Sd(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,d=i(c,l);if(a.hasEagerState=!0,a.eagerState=d,xl(d,c))return zs(e,t,a,0),ht===null&&Ls(),!1}catch{}finally{}if(l=gc(e,t,a,n),l!==null)return Dl(l,e,n),jd(l,t,n),!0}return!1}function Ic(e,t,l,n){if(n={lane:2,revertLane:Tr(),action:n,hasEagerState:!1,eagerState:null,next:null},Ws(e)){if(t)throw Error(r(479))}else t=gc(e,l,n,2),t!==null&&Dl(t,e,2)}function Ws(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function Sd(e,t){Za=Vs=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function jd(e,t,l){if((l&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,l|=n,t.lanes=l,pl(e,l)}}var Fs={readContext:Wt,use:Ks,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Nd={readContext:Wt,use:Ks,useCallback:function(e,t){return fl().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:od,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,$s(4194308,4,dd.bind(null,t,e),l)},useLayoutEffect:function(e,t){return $s(4194308,4,e,t)},useInsertionEffect:function(e,t){$s(4,2,e,t)},useMemo:function(e,t){var l=fl();t=t===void 0?null:t;var n=e();if(ga){Ce(!0);try{e()}finally{Ce(!1)}}return l.memoizedState=[n,t],n},useReducer:function(e,t,l){var n=fl();if(l!==void 0){var a=l(t);if(ga){Ce(!0);try{l(t)}finally{Ce(!1)}}}else a=t;return n.memoizedState=n.baseState=a,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},n.queue=e,e=e.dispatch=fh.bind(null,Ze,e),[n.memoizedState,e]},useRef:function(e){var t=fl();return e={current:e},t.memoizedState=e},useState:function(e){e=Zc(e);var t=e.queue,l=wd.bind(null,Ze,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Vc,useDeferredValue:function(e,t){var l=fl();return Pc(l,e,t)},useTransition:function(){var e=Zc(!1);return e=pd.bind(null,Ze,e.queue,!0,!1),fl().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var n=Ze,a=fl();if(nt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=t(),ht===null)throw Error(r(349));(et&124)!==0||Qu(n,t,l)}a.memoizedState=l;var i={value:l,getSnapshot:t};return a.queue=i,od(Pu.bind(null,n,i,e),[e]),n.flags|=2048,Va(9,Is(),Vu.bind(null,n,i,l,t),null),l},useId:function(){var e=fl(),t=ht.identifierPrefix;if(nt){var l=fn,n=dn;l=(n&~(1<<32-Ye(n)-1)).toString(32)+l,t="«"+t+"R"+l,l=Ps++,0<l&&(t+="H"+l.toString(32)),t+="»"}else l=sh++,t="«"+t+"r"+l.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Jc,useFormState:ld,useActionState:ld,useOptimistic:function(e){var t=fl();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Ic.bind(null,Ze,!0,l),l.dispatch=t,[e,t]},useMemoCache:Yc,useCacheRefresh:function(){return fl().memoizedState=dh.bind(null,Ze)}},Dd={readContext:Wt,use:Ks,useCallback:md,useContext:Wt,useEffect:cd,useImperativeHandle:fd,useInsertionEffect:rd,useLayoutEffect:ud,useMemo:hd,useReducer:Js,useRef:sd,useState:function(){return Js(gn)},useDebugValue:Vc,useDeferredValue:function(e,t){var l=Mt();return gd(l,rt.memoizedState,e,t)},useTransition:function(){var e=Js(gn)[0],t=Mt().memoizedState;return[typeof e=="boolean"?e:Yi(e),t]},useSyncExternalStore:Zu,useId:xd,useHostTransitionStatus:Jc,useFormState:nd,useActionState:nd,useOptimistic:function(e,t){var l=Mt();return Iu(l,rt,e,t)},useMemoCache:Yc,useCacheRefresh:vd},mh={readContext:Wt,use:Ks,useCallback:md,useContext:Wt,useEffect:cd,useImperativeHandle:fd,useInsertionEffect:rd,useLayoutEffect:ud,useMemo:hd,useReducer:Xc,useRef:sd,useState:function(){return Xc(gn)},useDebugValue:Vc,useDeferredValue:function(e,t){var l=Mt();return rt===null?Pc(l,e,t):gd(l,rt.memoizedState,e,t)},useTransition:function(){var e=Xc(gn)[0],t=Mt().memoizedState;return[typeof e=="boolean"?e:Yi(e),t]},useSyncExternalStore:Zu,useId:xd,useHostTransitionStatus:Jc,useFormState:id,useActionState:id,useOptimistic:function(e,t){var l=Mt();return rt!==null?Iu(l,rt,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Yc,useCacheRefresh:vd},Pa=null,Zi=0;function eo(e){var t=Zi;return Zi+=1,Pa===null&&(Pa=[]),ku(Pa,e,t)}function Qi(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function to(e,t){throw t.$$typeof===A?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ed(e){var t=e._init;return t(e._payload)}function Cd(e){function t(O,C){if(e){var k=O.deletions;k===null?(O.deletions=[C],O.flags|=16):k.push(C)}}function l(O,C){if(!e)return null;for(;C!==null;)t(O,C),C=C.sibling;return null}function n(O){for(var C=new Map;O!==null;)O.key!==null?C.set(O.key,O):C.set(O.index,O),O=O.sibling;return C}function a(O,C){return O=un(O,C),O.index=0,O.sibling=null,O}function i(O,C,k){return O.index=k,e?(k=O.alternate,k!==null?(k=k.index,k<C?(O.flags|=67108866,C):k):(O.flags|=67108866,C)):(O.flags|=1048576,C)}function c(O){return e&&O.alternate===null&&(O.flags|=67108866),O}function d(O,C,k,W){return C===null||C.tag!==6?(C=yc(k,O.mode,W),C.return=O,C):(C=a(C,k),C.return=O,C)}function N(O,C,k,W){var we=k.type;return we===Z?$(O,C,k.props.children,W,k.key):C!==null&&(C.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Q&&Ed(we)===C.type)?(C=a(C,k.props),Qi(C,k),C.return=O,C):(C=Us(k.type,k.key,k.props,null,O.mode,W),Qi(C,k),C.return=O,C)}function U(O,C,k,W){return C===null||C.tag!==4||C.stateNode.containerInfo!==k.containerInfo||C.stateNode.implementation!==k.implementation?(C=bc(k,O.mode,W),C.return=O,C):(C=a(C,k.children||[]),C.return=O,C)}function $(O,C,k,W,we){return C===null||C.tag!==7?(C=oa(k,O.mode,W,we),C.return=O,C):(C=a(C,k),C.return=O,C)}function F(O,C,k){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=yc(""+C,O.mode,k),C.return=O,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case j:return k=Us(C.type,C.key,C.props,null,O.mode,k),Qi(k,C),k.return=O,k;case T:return C=bc(C,O.mode,k),C.return=O,C;case Q:var W=C._init;return C=W(C._payload),F(O,C,k)}if(fe(C)||ie(C))return C=oa(C,O.mode,k,null),C.return=O,C;if(typeof C.then=="function")return F(O,eo(C),k);if(C.$$typeof===q)return F(O,Ys(O,C),k);to(O,C)}return null}function B(O,C,k,W){var we=C!==null?C.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return we!==null?null:d(O,C,""+k,W);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case j:return k.key===we?N(O,C,k,W):null;case T:return k.key===we?U(O,C,k,W):null;case Q:return we=k._init,k=we(k._payload),B(O,C,k,W)}if(fe(k)||ie(k))return we!==null?null:$(O,C,k,W,null);if(typeof k.then=="function")return B(O,C,eo(k),W);if(k.$$typeof===q)return B(O,C,Ys(O,k),W);to(O,k)}return null}function G(O,C,k,W,we){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return O=O.get(k)||null,d(C,O,""+W,we);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case j:return O=O.get(W.key===null?k:W.key)||null,N(C,O,W,we);case T:return O=O.get(W.key===null?k:W.key)||null,U(C,O,W,we);case Q:var Ve=W._init;return W=Ve(W._payload),G(O,C,k,W,we)}if(fe(W)||ie(W))return O=O.get(k)||null,$(C,O,W,we,null);if(typeof W.then=="function")return G(O,C,k,eo(W),we);if(W.$$typeof===q)return G(O,C,k,Ys(C,W),we);to(C,W)}return null}function ze(O,C,k,W){for(var we=null,Ve=null,Te=C,Oe=C=0,Gt=null;Te!==null&&Oe<k.length;Oe++){Te.index>Oe?(Gt=Te,Te=null):Gt=Te.sibling;var lt=B(O,Te,k[Oe],W);if(lt===null){Te===null&&(Te=Gt);break}e&&Te&&lt.alternate===null&&t(O,Te),C=i(lt,C,Oe),Ve===null?we=lt:Ve.sibling=lt,Ve=lt,Te=Gt}if(Oe===k.length)return l(O,Te),nt&&ra(O,Oe),we;if(Te===null){for(;Oe<k.length;Oe++)Te=F(O,k[Oe],W),Te!==null&&(C=i(Te,C,Oe),Ve===null?we=Te:Ve.sibling=Te,Ve=Te);return nt&&ra(O,Oe),we}for(Te=n(Te);Oe<k.length;Oe++)Gt=G(Te,O,Oe,k[Oe],W),Gt!==null&&(e&&Gt.alternate!==null&&Te.delete(Gt.key===null?Oe:Gt.key),C=i(Gt,C,Oe),Ve===null?we=Gt:Ve.sibling=Gt,Ve=Gt);return e&&Te.forEach(function($n){return t(O,$n)}),nt&&ra(O,Oe),we}function _e(O,C,k,W){if(k==null)throw Error(r(151));for(var we=null,Ve=null,Te=C,Oe=C=0,Gt=null,lt=k.next();Te!==null&&!lt.done;Oe++,lt=k.next()){Te.index>Oe?(Gt=Te,Te=null):Gt=Te.sibling;var $n=B(O,Te,lt.value,W);if($n===null){Te===null&&(Te=Gt);break}e&&Te&&$n.alternate===null&&t(O,Te),C=i($n,C,Oe),Ve===null?we=$n:Ve.sibling=$n,Ve=$n,Te=Gt}if(lt.done)return l(O,Te),nt&&ra(O,Oe),we;if(Te===null){for(;!lt.done;Oe++,lt=k.next())lt=F(O,lt.value,W),lt!==null&&(C=i(lt,C,Oe),Ve===null?we=lt:Ve.sibling=lt,Ve=lt);return nt&&ra(O,Oe),we}for(Te=n(Te);!lt.done;Oe++,lt=k.next())lt=G(Te,O,Oe,lt.value,W),lt!==null&&(e&&lt.alternate!==null&&Te.delete(lt.key===null?Oe:lt.key),C=i(lt,C,Oe),Ve===null?we=lt:Ve.sibling=lt,Ve=lt);return e&&Te.forEach(function(h0){return t(O,h0)}),nt&&ra(O,Oe),we}function dt(O,C,k,W){if(typeof k=="object"&&k!==null&&k.type===Z&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case j:e:{for(var we=k.key;C!==null;){if(C.key===we){if(we=k.type,we===Z){if(C.tag===7){l(O,C.sibling),W=a(C,k.props.children),W.return=O,O=W;break e}}else if(C.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===Q&&Ed(we)===C.type){l(O,C.sibling),W=a(C,k.props),Qi(W,k),W.return=O,O=W;break e}l(O,C);break}else t(O,C);C=C.sibling}k.type===Z?(W=oa(k.props.children,O.mode,W,k.key),W.return=O,O=W):(W=Us(k.type,k.key,k.props,null,O.mode,W),Qi(W,k),W.return=O,O=W)}return c(O);case T:e:{for(we=k.key;C!==null;){if(C.key===we)if(C.tag===4&&C.stateNode.containerInfo===k.containerInfo&&C.stateNode.implementation===k.implementation){l(O,C.sibling),W=a(C,k.children||[]),W.return=O,O=W;break e}else{l(O,C);break}else t(O,C);C=C.sibling}W=bc(k,O.mode,W),W.return=O,O=W}return c(O);case Q:return we=k._init,k=we(k._payload),dt(O,C,k,W)}if(fe(k))return ze(O,C,k,W);if(ie(k)){if(we=ie(k),typeof we!="function")throw Error(r(150));return k=we.call(k),_e(O,C,k,W)}if(typeof k.then=="function")return dt(O,C,eo(k),W);if(k.$$typeof===q)return dt(O,C,Ys(O,k),W);to(O,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,C!==null&&C.tag===6?(l(O,C.sibling),W=a(C,k),W.return=O,O=W):(l(O,C),W=yc(k,O.mode,W),W.return=O,O=W),c(O)):l(O,C)}return function(O,C,k,W){try{Zi=0;var we=dt(O,C,k,W);return Pa=null,we}catch(Te){if(Te===zi||Te===Xs)throw Te;var Ve=vl(29,Te,null,O.mode);return Ve.lanes=W,Ve.return=O,Ve}finally{}}}var Ka=Cd(!0),Td=Cd(!1),zl=X(null),$l=null;function kn(e){var t=e.alternate;I(zt,zt.current&1),I(zl,e),$l===null&&(t===null||Xa.current!==null||t.memoizedState!==null)&&($l=e)}function Ad(e){if(e.tag===22){if(I(zt,zt.current),I(zl,e),$l===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&($l=e)}}else Un()}function Un(){I(zt,zt.current),I(zl,zl.current)}function pn(e){re(zl),$l===e&&($l=null),re(zt)}var zt=X(0);function lo(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Gr(l)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function $c(e,t,l,n){t=e.memoizedState,l=l(n,t),l=l==null?t:g({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Wc={enqueueSetState:function(e,t,l){e=e._reactInternals;var n=Nl(),a=On(n);a.payload=t,l!=null&&(a.callback=l),t=Ln(e,a,n),t!==null&&(Dl(t,e,n),Ui(t,e,n))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var n=Nl(),a=On(n);a.tag=1,a.payload=t,l!=null&&(a.callback=l),t=Ln(e,a,n),t!==null&&(Dl(t,e,n),Ui(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=Nl(),n=On(l);n.tag=2,t!=null&&(n.callback=t),t=Ln(e,n,l),t!==null&&(Dl(t,e,l),Ui(t,e,l))}};function Md(e,t,l,n,a,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,c):t.prototype&&t.prototype.isPureReactComponent?!Ci(l,n)||!Ci(a,i):!0}function _d(e,t,l,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,n),t.state!==e&&Wc.enqueueReplaceState(t,t.state,null)}function pa(e,t){var l=t;if("ref"in t){l={};for(var n in t)n!=="ref"&&(l[n]=t[n])}if(e=e.defaultProps){l===t&&(l=g({},l));for(var a in e)l[a]===void 0&&(l[a]=e[a])}return l}var no=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Rd(e){no(e)}function Od(e){console.error(e)}function Ld(e){no(e)}function ao(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function zd(e,t,l){try{var n=e.onCaughtError;n(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function Fc(e,t,l){return l=On(l),l.tag=3,l.payload={element:null},l.callback=function(){ao(e,t)},l}function kd(e){return e=On(e),e.tag=3,e}function Ud(e,t,l,n){var a=l.type.getDerivedStateFromError;if(typeof a=="function"){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){zd(t,l,n)}}var c=l.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){zd(t,l,n),typeof a!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var d=n.stack;this.componentDidCatch(n.value,{componentStack:d!==null?d:""})})}function hh(e,t,l,n,a){if(l.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=l.alternate,t!==null&&Ri(t,l,a,!0),l=zl.current,l!==null){switch(l.tag){case 13:return $l===null?jr():l.alternate===null&&Nt===0&&(Nt=3),l.flags&=-257,l.flags|=65536,l.lanes=a,n===Tc?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([n]):t.add(n),Dr(e,n,a)),!1;case 22:return l.flags|=65536,n===Tc?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([n]):l.add(n)),Dr(e,n,a)),!1}throw Error(r(435,l.tag))}return Dr(e,n,a),jr(),!1}if(nt)return t=zl.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==wc&&(e=Error(r(422),{cause:n}),_i(_l(e,l)))):(n!==wc&&(t=Error(r(423),{cause:n}),_i(_l(t,l))),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=_l(n,l),a=Fc(e.stateNode,n,a),_c(e,a),Nt!==4&&(Nt=2)),!1;var i=Error(r(520),{cause:n});if(i=_l(i,l),Wi===null?Wi=[i]:Wi.push(i),Nt!==4&&(Nt=2),t===null)return!0;n=_l(n,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=a&-a,l.lanes|=e,e=Fc(l.stateNode,n,e),_c(l,e),!1;case 1:if(t=l.type,i=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Xn===null||!Xn.has(i))))return l.flags|=65536,a&=-a,l.lanes|=a,a=kd(a),Ud(a,e,l,n),_c(l,a),!1}l=l.return}while(l!==null);return!1}var Hd=Error(r(461)),Ht=!1;function Zt(e,t,l,n){t.child=e===null?Td(t,null,l,n):Ka(t,e.child,l,n)}function Bd(e,t,l,n,a){l=l.render;var i=t.ref;if("ref"in n){var c={};for(var d in n)d!=="ref"&&(c[d]=n[d])}else c=n;return ma(t),n=kc(e,t,l,c,i,a),d=Uc(),e!==null&&!Ht?(Hc(e,t,a),yn(e,t,a)):(nt&&d&&xc(t),t.flags|=1,Zt(e,t,n,a),t.child)}function Gd(e,t,l,n,a){if(e===null){var i=l.type;return typeof i=="function"&&!pc(i)&&i.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=i,Yd(e,t,i,n,a)):(e=Us(l.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!or(e,a)){var c=i.memoizedProps;if(l=l.compare,l=l!==null?l:Ci,l(c,n)&&e.ref===t.ref)return yn(e,t,a)}return t.flags|=1,e=un(i,n),e.ref=t.ref,e.return=t,t.child=e}function Yd(e,t,l,n,a){if(e!==null){var i=e.memoizedProps;if(Ci(i,n)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=n=i,or(e,a))(e.flags&131072)!==0&&(Ht=!0);else return t.lanes=e.lanes,yn(e,t,a)}return er(e,t,l,n,a)}function qd(e,t,l){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"){if((t.flags&128)!==0){if(n=i!==null?i.baseLanes|l:l,e!==null){for(a=t.child=e.child,i=0;a!==null;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return Xd(e,t,n,l)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&qs(t,i!==null?i.cachePool:null),i!==null?Yu(t,i):Oc(),Ad(t);else return t.lanes=t.childLanes=536870912,Xd(e,t,i!==null?i.baseLanes|l:l,l)}else i!==null?(qs(t,i.cachePool),Yu(t,i),Un(),t.memoizedState=null):(e!==null&&qs(t,null),Oc(),Un());return Zt(e,t,a,l),t.child}function Xd(e,t,l,n){var a=Cc();return a=a===null?null:{parent:Lt._currentValue,pool:a},t.memoizedState={baseLanes:l,cachePool:a},e!==null&&qs(t,null),Oc(),Ad(t),e!==null&&Ri(e,t,n,!0),null}function io(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function er(e,t,l,n,a){return ma(t),l=kc(e,t,l,n,void 0,a),n=Uc(),e!==null&&!Ht?(Hc(e,t,a),yn(e,t,a)):(nt&&n&&xc(t),t.flags|=1,Zt(e,t,l,a),t.child)}function Zd(e,t,l,n,a,i){return ma(t),t.updateQueue=null,l=Xu(t,n,l,a),qu(e),n=Uc(),e!==null&&!Ht?(Hc(e,t,i),yn(e,t,i)):(nt&&n&&xc(t),t.flags|=1,Zt(e,t,l,i),t.child)}function Qd(e,t,l,n,a){if(ma(t),t.stateNode===null){var i=Ha,c=l.contextType;typeof c=="object"&&c!==null&&(i=Wt(c)),i=new l(n,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Wc,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=n,i.state=t.memoizedState,i.refs={},Ac(t),c=l.contextType,i.context=typeof c=="object"&&c!==null?Wt(c):Ha,i.state=t.memoizedState,c=l.getDerivedStateFromProps,typeof c=="function"&&($c(t,l,c,n),i.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(c=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),c!==i.state&&Wc.enqueueReplaceState(i,i.state,null),Bi(t,n,i,a),Hi(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){i=t.stateNode;var d=t.memoizedProps,N=pa(l,d);i.props=N;var U=i.context,$=l.contextType;c=Ha,typeof $=="object"&&$!==null&&(c=Wt($));var F=l.getDerivedStateFromProps;$=typeof F=="function"||typeof i.getSnapshotBeforeUpdate=="function",d=t.pendingProps!==d,$||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d||U!==c)&&_d(t,i,n,c),Rn=!1;var B=t.memoizedState;i.state=B,Bi(t,n,i,a),Hi(),U=t.memoizedState,d||B!==U||Rn?(typeof F=="function"&&($c(t,l,F,n),U=t.memoizedState),(N=Rn||Md(t,l,N,n,B,U,c))?($||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=U),i.props=n,i.state=U,i.context=c,n=N):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,Mc(e,t),c=t.memoizedProps,$=pa(l,c),i.props=$,F=t.pendingProps,B=i.context,U=l.contextType,N=Ha,typeof U=="object"&&U!==null&&(N=Wt(U)),d=l.getDerivedStateFromProps,(U=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==F||B!==N)&&_d(t,i,n,N),Rn=!1,B=t.memoizedState,i.state=B,Bi(t,n,i,a),Hi();var G=t.memoizedState;c!==F||B!==G||Rn||e!==null&&e.dependencies!==null&&Gs(e.dependencies)?(typeof d=="function"&&($c(t,l,d,n),G=t.memoizedState),($=Rn||Md(t,l,$,n,B,G,N)||e!==null&&e.dependencies!==null&&Gs(e.dependencies))?(U||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(n,G,N),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(n,G,N)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=G),i.props=n,i.state=G,i.context=N,n=$):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&B===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,io(e,t),n=(t.flags&128)!==0,i||n?(i=t.stateNode,l=n&&typeof l.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&n?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,l,a)):Zt(e,t,l,a),t.memoizedState=i.state,e=t.child):e=yn(e,t,a),e}function Vd(e,t,l,n){return Mi(),t.flags|=256,Zt(e,t,l,n),t.child}var tr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lr(e){return{baseLanes:e,cachePool:Ou()}}function nr(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=kl),e}function Pd(e,t,l){var n=t.pendingProps,a=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(zt.current&2)!==0),c&&(a=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(nt){if(a?kn(t):Un(),nt){var d=jt,N;if(N=d){e:{for(N=d,d=Il;N.nodeType!==8;){if(!d){d=null;break e}if(N=Zl(N.nextSibling),N===null){d=null;break e}}d=N}d!==null?(t.memoizedState={dehydrated:d,treeContext:ca!==null?{id:dn,overflow:fn}:null,retryLane:536870912,hydrationErrors:null},N=vl(18,null,null,0),N.stateNode=d,N.return=t,t.child=N,ll=t,jt=null,N=!0):N=!1}N||da(t)}if(d=t.memoizedState,d!==null&&(d=d.dehydrated,d!==null))return Gr(d)?t.lanes=32:t.lanes=536870912,null;pn(t)}return d=n.children,n=n.fallback,a?(Un(),a=t.mode,d=so({mode:"hidden",children:d},a),n=oa(n,a,l,null),d.return=t,n.return=t,d.sibling=n,t.child=d,a=t.child,a.memoizedState=lr(l),a.childLanes=nr(e,c,l),t.memoizedState=tr,n):(kn(t),ar(t,d))}if(N=e.memoizedState,N!==null&&(d=N.dehydrated,d!==null)){if(i)t.flags&256?(kn(t),t.flags&=-257,t=ir(e,t,l)):t.memoizedState!==null?(Un(),t.child=e.child,t.flags|=128,t=null):(Un(),a=n.fallback,d=t.mode,n=so({mode:"visible",children:n.children},d),a=oa(a,d,l,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,Ka(t,e.child,null,l),n=t.child,n.memoizedState=lr(l),n.childLanes=nr(e,c,l),t.memoizedState=tr,t=a);else if(kn(t),Gr(d)){if(c=d.nextSibling&&d.nextSibling.dataset,c)var U=c.dgst;c=U,n=Error(r(419)),n.stack="",n.digest=c,_i({value:n,source:null,stack:null}),t=ir(e,t,l)}else if(Ht||Ri(e,t,l,!1),c=(l&e.childLanes)!==0,Ht||c){if(c=ht,c!==null&&(n=l&-l,n=(n&42)!==0?1:bt(n),n=(n&(c.suspendedLanes|l))!==0?0:n,n!==0&&n!==N.retryLane))throw N.retryLane=n,Ua(e,n),Dl(c,e,n),Hd;d.data==="$?"||jr(),t=ir(e,t,l)}else d.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,jt=Zl(d.nextSibling),ll=t,nt=!0,ua=null,Il=!1,e!==null&&(Ol[Ll++]=dn,Ol[Ll++]=fn,Ol[Ll++]=ca,dn=e.id,fn=e.overflow,ca=t),t=ar(t,n.children),t.flags|=4096);return t}return a?(Un(),a=n.fallback,d=t.mode,N=e.child,U=N.sibling,n=un(N,{mode:"hidden",children:n.children}),n.subtreeFlags=N.subtreeFlags&65011712,U!==null?a=un(U,a):(a=oa(a,d,l,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,d=e.child.memoizedState,d===null?d=lr(l):(N=d.cachePool,N!==null?(U=Lt._currentValue,N=N.parent!==U?{parent:U,pool:U}:N):N=Ou(),d={baseLanes:d.baseLanes|l,cachePool:N}),a.memoizedState=d,a.childLanes=nr(e,c,l),t.memoizedState=tr,n):(kn(t),l=e.child,e=l.sibling,l=un(l,{mode:"visible",children:n.children}),l.return=t,l.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=l,t.memoizedState=null,l)}function ar(e,t){return t=so({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function so(e,t){return e=vl(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ir(e,t,l){return Ka(t,e.child,null,l),e=ar(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kd(e,t,l){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),jc(e.return,t,l)}function sr(e,t,l,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:l,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=l,i.tailMode=a)}function Jd(e,t,l){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Zt(e,t,n.children,l),n=zt.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kd(e,l,t);else if(e.tag===19)Kd(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(I(zt,n),a){case"forwards":for(l=t.child,a=null;l!==null;)e=l.alternate,e!==null&&lo(e)===null&&(a=l),l=l.sibling;l=a,l===null?(a=t.child,t.child=null):(a=l.sibling,l.sibling=null),sr(t,!1,a,l,i);break;case"backwards":for(l=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&lo(e)===null){t.child=a;break}e=a.sibling,a.sibling=l,l=a,a=e}sr(t,!0,l,null,i);break;case"together":sr(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yn(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),qn|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(Ri(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,l=un(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=un(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function or(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gs(e)))}function gh(e,t,l){switch(t.tag){case 3:Ie(t,t.stateNode.containerInfo),_n(t,Lt,e.memoizedState.cache),Mi();break;case 27:case 5:nl(t);break;case 4:Ie(t,t.stateNode.containerInfo);break;case 10:_n(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(kn(t),t.flags|=128,null):(l&t.child.childLanes)!==0?Pd(e,t,l):(kn(t),e=yn(e,t,l),e!==null?e.sibling:null);kn(t);break;case 19:var a=(e.flags&128)!==0;if(n=(l&t.childLanes)!==0,n||(Ri(e,t,l,!1),n=(l&t.childLanes)!==0),a){if(n)return Jd(e,t,l);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),I(zt,zt.current),n)break;return null;case 22:case 23:return t.lanes=0,qd(e,t,l);case 24:_n(t,Lt,e.memoizedState.cache)}return yn(e,t,l)}function Id(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ht=!0;else{if(!or(e,l)&&(t.flags&128)===0)return Ht=!1,gh(e,t,l);Ht=(e.flags&131072)!==0}else Ht=!1,nt&&(t.flags&1048576)!==0&&Eu(t,Bs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,typeof n=="function")pc(n)?(e=pa(n,e),t.tag=1,t=Qd(null,t,n,e,l)):(t.tag=0,t=er(null,t,n,e,l));else{if(n!=null){if(a=n.$$typeof,a===te){t.tag=11,t=Bd(null,t,n,e,l);break e}else if(a===z){t.tag=14,t=Gd(null,t,n,e,l);break e}}throw t=ke(n)||n,Error(r(306,t,""))}}return t;case 0:return er(e,t,t.type,t.pendingProps,l);case 1:return n=t.type,a=pa(n,t.pendingProps),Qd(e,t,n,a,l);case 3:e:{if(Ie(t,t.stateNode.containerInfo),e===null)throw Error(r(387));n=t.pendingProps;var i=t.memoizedState;a=i.element,Mc(e,t),Bi(t,n,null,l);var c=t.memoizedState;if(n=c.cache,_n(t,Lt,n),n!==i.cache&&Nc(t,[Lt],l,!0),Hi(),n=c.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=Vd(e,t,n,l);break e}else if(n!==a){a=_l(Error(r(424)),t),_i(a),t=Vd(e,t,n,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(jt=Zl(e.firstChild),ll=t,nt=!0,ua=null,Il=!0,l=Td(t,null,n,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Mi(),n===a){t=yn(e,t,l);break e}Zt(e,t,n,l)}t=t.child}return t;case 26:return io(e,t),e===null?(l=tm(t.type,null,t.pendingProps,null))?t.memoizedState=l:nt||(l=t.type,e=t.pendingProps,n=wo(se.current).createElement(l),n[St]=t,n[Tt]=e,Vt(n,l,e),Ee(n),t.stateNode=n):t.memoizedState=tm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return nl(t),e===null&&nt&&(n=t.stateNode=Wf(t.type,t.pendingProps,se.current),ll=t,Il=!0,a=jt,Vn(t.type)?(Yr=a,jt=Zl(n.firstChild)):jt=a),Zt(e,t,t.pendingProps.children,l),io(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&nt&&((a=n=jt)&&(n=Xh(n,t.type,t.pendingProps,Il),n!==null?(t.stateNode=n,ll=t,jt=Zl(n.firstChild),Il=!1,a=!0):a=!1),a||da(t)),nl(t),a=t.type,i=t.pendingProps,c=e!==null?e.memoizedProps:null,n=i.children,Ur(a,i)?n=null:c!==null&&Ur(a,c)&&(t.flags|=32),t.memoizedState!==null&&(a=kc(e,t,oh,null,null,l),os._currentValue=a),io(e,t),Zt(e,t,n,l),t.child;case 6:return e===null&&nt&&((e=l=jt)&&(l=Zh(l,t.pendingProps,Il),l!==null?(t.stateNode=l,ll=t,jt=null,e=!0):e=!1),e||da(t)),null;case 13:return Pd(e,t,l);case 4:return Ie(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ka(t,null,n,l):Zt(e,t,n,l),t.child;case 11:return Bd(e,t,t.type,t.pendingProps,l);case 7:return Zt(e,t,t.pendingProps,l),t.child;case 8:return Zt(e,t,t.pendingProps.children,l),t.child;case 12:return Zt(e,t,t.pendingProps.children,l),t.child;case 10:return n=t.pendingProps,_n(t,t.type,n.value),Zt(e,t,n.children,l),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,ma(t),a=Wt(a),n=n(a),t.flags|=1,Zt(e,t,n,l),t.child;case 14:return Gd(e,t,t.type,t.pendingProps,l);case 15:return Yd(e,t,t.type,t.pendingProps,l);case 19:return Jd(e,t,l);case 31:return n=t.pendingProps,l=t.mode,n={mode:n.mode,children:n.children},e===null?(l=so(n,l),l.ref=t.ref,t.child=l,l.return=t,t=l):(l=un(e.child,n),l.ref=t.ref,t.child=l,l.return=t,t=l),t;case 22:return qd(e,t,l);case 24:return ma(t),n=Wt(Lt),e===null?(a=Cc(),a===null&&(a=ht,i=Dc(),a.pooledCache=i,i.refCount++,i!==null&&(a.pooledCacheLanes|=l),a=i),t.memoizedState={parent:n,cache:a},Ac(t),_n(t,Lt,a)):((e.lanes&l)!==0&&(Mc(e,t),Bi(t,null,null,l),Hi()),a=e.memoizedState,i=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=a),_n(t,Lt,n)):(n=i.cache,_n(t,Lt,n),n!==a.cache&&Nc(t,[Lt],l,!0))),Zt(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function bn(e){e.flags|=4}function $d(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sm(t)){if(t=zl.current,t!==null&&((et&4194048)===et?$l!==null:(et&62914560)!==et&&(et&536870912)===0||t!==$l))throw ki=Tc,Lu;e.flags|=8192}}function oo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xt():536870912,e.lanes|=t,Wa|=t)}function Vi(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var n=null;l!==null;)l.alternate!==null&&(n=l),l=l.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,n=0;if(t)for(var a=e.child;a!==null;)l|=a.lanes|a.childLanes,n|=a.subtreeFlags&65011712,n|=a.flags&65011712,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)l|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=l,t}function ph(e,t,l){var n=t.pendingProps;switch(vc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return l=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),hn(Lt),_t(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(Ai(t)?bn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Au())),vt(t),null;case 26:return l=t.memoizedState,e===null?(bn(t),l!==null?(vt(t),$d(t,l)):(vt(t),t.flags&=-16777217)):l?l!==e.memoizedState?(bn(t),vt(t),$d(t,l)):(vt(t),t.flags&=-16777217):(e.memoizedProps!==n&&bn(t),vt(t),t.flags&=-16777217),null;case 27:al(t),l=se.current;var a=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==n&&bn(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return vt(t),null}e=de.current,Ai(t)?Cu(t):(e=Wf(a,n,l),t.stateNode=e,bn(t))}return vt(t),null;case 5:if(al(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&bn(t);else{if(!n){if(t.stateNode===null)throw Error(r(166));return vt(t),null}if(e=de.current,Ai(t))Cu(t);else{switch(a=wo(se.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof n.is=="string"?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e=typeof n.is=="string"?a.createElement(l,{is:n.is}):a.createElement(l)}}e[St]=t,e[Tt]=n;e:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=e;e:switch(Vt(e,l,n),l){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&bn(t)}}return vt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&bn(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(r(166));if(e=se.current,Ai(t)){if(e=t.stateNode,l=t.memoizedProps,n=null,a=ll,a!==null)switch(a.tag){case 27:case 5:n=a.memoizedProps}e[St]=t,e=!!(e.nodeValue===l||n!==null&&n.suppressHydrationWarning===!0||Qf(e.nodeValue,l)),e||da(t)}else e=wo(e).createTextNode(n),e[St]=t,t.stateNode=e}return vt(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(a=Ai(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(r(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));a[St]=t}else Mi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),a=!1}else a=Au(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&256?(pn(t),t):(pn(t),null)}if(pn(t),(t.flags&128)!==0)return t.lanes=l,t;if(l=n!==null,e=e!==null&&e.memoizedState!==null,l){n=t.child,a=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(a=n.alternate.memoizedState.cachePool.pool);var i=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)}return l!==e&&l&&(t.child.flags|=8192),oo(t,t.updateQueue),vt(t),null;case 4:return _t(),e===null&&Rr(t.stateNode.containerInfo),vt(t),null;case 10:return hn(t.type),vt(t),null;case 19:if(re(zt),a=t.memoizedState,a===null)return vt(t),null;if(n=(t.flags&128)!==0,i=a.rendering,i===null)if(n)Vi(a,!1);else{if(Nt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=lo(e),i!==null){for(t.flags|=128,Vi(a,!1),e=i.updateQueue,t.updateQueue=e,oo(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Du(l,e),l=l.sibling;return I(zt,zt.current&1|2),t.child}e=e.sibling}a.tail!==null&&wt()>uo&&(t.flags|=128,n=!0,Vi(a,!1),t.lanes=4194304)}else{if(!n)if(e=lo(i),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,oo(t,e),Vi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!nt)return vt(t),null}else 2*wt()-a.renderingStartTime>uo&&l!==536870912&&(t.flags|=128,n=!0,Vi(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(e=a.last,e!==null?e.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=wt(),t.sibling=null,e=zt.current,I(zt,n?e&1|2:e&1),t):(vt(t),null);case 22:case 23:return pn(t),Lc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(l&536870912)!==0&&(t.flags&128)===0&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),l=t.updateQueue,l!==null&&oo(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==l&&(t.flags|=2048),e!==null&&re(ha),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),hn(Lt),vt(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function yh(e,t){switch(vc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(Lt),_t(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return al(t),null;case 13:if(pn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Mi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(zt),null;case 4:return _t(),null;case 10:return hn(t.type),null;case 22:case 23:return pn(t),Lc(),e!==null&&re(ha),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return hn(Lt),null;case 25:return null;default:return null}}function Wd(e,t){switch(vc(t),t.tag){case 3:hn(Lt),_t();break;case 26:case 27:case 5:al(t);break;case 4:_t();break;case 13:pn(t);break;case 19:re(zt);break;case 10:hn(t.type);break;case 22:case 23:pn(t),Lc(),e!==null&&re(ha);break;case 24:hn(Lt)}}function Pi(e,t){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var a=n.next;l=a;do{if((l.tag&e)===e){n=void 0;var i=l.create,c=l.inst;n=i(),c.destroy=n}l=l.next}while(l!==a)}}catch(d){mt(t,t.return,d)}}function Hn(e,t,l){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){var c=n.inst,d=c.destroy;if(d!==void 0){c.destroy=void 0,a=t;var N=l,U=d;try{U()}catch($){mt(a,N,$)}}}n=n.next}while(n!==i)}}catch($){mt(t,t.return,$)}}function Fd(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{Gu(t,l)}catch(n){mt(e,e.return,n)}}}function ef(e,t,l){l.props=pa(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(n){mt(e,t,n)}}function Ki(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof l=="function"?e.refCleanup=l(n):l.current=n}}catch(a){mt(e,t,a)}}function Wl(e,t){var l=e.ref,n=e.refCleanup;if(l!==null)if(typeof n=="function")try{n()}catch(a){mt(e,t,a)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(a){mt(e,t,a)}else l.current=null}function tf(e){var t=e.type,l=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break e;case"img":l.src?n.src=l.src:l.srcSet&&(n.srcset=l.srcSet)}}catch(a){mt(e,e.return,a)}}function cr(e,t,l){try{var n=e.stateNode;Hh(n,e.type,l,t),n[Tt]=t}catch(a){mt(e,e.return,a)}}function lf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vn(e.type)||e.tag===4}function rr(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ur(e,t,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=vo));else if(n!==4&&(n===27&&Vn(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(ur(e,t,l),e=e.sibling;e!==null;)ur(e,t,l),e=e.sibling}function co(e,t,l){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(n!==4&&(n===27&&Vn(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(co(e,t,l),e=e.sibling;e!==null;)co(e,t,l),e=e.sibling}function nf(e){var t=e.stateNode,l=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Vt(t,n,l),t[St]=e,t[Tt]=l}catch(i){mt(e,e.return,i)}}var xn=!1,Ct=!1,dr=!1,af=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function bh(e,t){if(e=e.containerInfo,zr=Co,e=gu(e),rc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var n=l.getSelection&&l.getSelection();if(n&&n.rangeCount!==0){l=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{l.nodeType,i.nodeType}catch{l=null;break e}var c=0,d=-1,N=-1,U=0,$=0,F=e,B=null;t:for(;;){for(var G;F!==l||a!==0&&F.nodeType!==3||(d=c+a),F!==i||n!==0&&F.nodeType!==3||(N=c+n),F.nodeType===3&&(c+=F.nodeValue.length),(G=F.firstChild)!==null;)B=F,F=G;for(;;){if(F===e)break t;if(B===l&&++U===a&&(d=c),B===i&&++$===n&&(N=c),(G=F.nextSibling)!==null)break;F=B,B=F.parentNode}F=G}l=d===-1||N===-1?null:{start:d,end:N}}else l=null}l=l||{start:0,end:0}}else l=null;for(kr={focusedElem:e,selectionRange:l},Co=!1,Bt=t;Bt!==null;)if(t=Bt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Bt=e;else for(;Bt!==null;){switch(t=Bt,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,l=t,a=i.memoizedProps,i=i.memoizedState,n=l.stateNode;try{var ze=pa(l.type,a,l.elementType===l.type);e=n.getSnapshotBeforeUpdate(ze,i),n.__reactInternalSnapshotBeforeUpdate=e}catch(_e){mt(l,l.return,_e)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)Br(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Br(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,Bt=e;break}Bt=t.return}}function sf(e,t,l){var n=l.flags;switch(l.tag){case 0:case 11:case 15:Bn(e,l),n&4&&Pi(5,l);break;case 1:if(Bn(e,l),n&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(c){mt(l,l.return,c)}else{var a=pa(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){mt(l,l.return,c)}}n&64&&Fd(l),n&512&&Ki(l,l.return);break;case 3:if(Bn(e,l),n&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{Gu(e,t)}catch(c){mt(l,l.return,c)}}break;case 27:t===null&&n&4&&nf(l);case 26:case 5:Bn(e,l),t===null&&n&4&&tf(l),n&512&&Ki(l,l.return);break;case 12:Bn(e,l);break;case 13:Bn(e,l),n&4&&rf(e,l),n&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Ch.bind(null,l),Qh(e,l))));break;case 22:if(n=l.memoizedState!==null||xn,!n){t=t!==null&&t.memoizedState!==null||Ct,a=xn;var i=Ct;xn=n,(Ct=t)&&!i?Gn(e,l,(l.subtreeFlags&8772)!==0):Bn(e,l),xn=a,Ct=i}break;case 30:break;default:Bn(e,l)}}function of(e){var t=e.alternate;t!==null&&(e.alternate=null,of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&le(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pt=null,ml=!1;function vn(e,t,l){for(l=l.child;l!==null;)cf(e,t,l),l=l.sibling}function cf(e,t,l){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Me,l)}catch{}switch(l.tag){case 26:Ct||Wl(l,t),vn(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ct||Wl(l,t);var n=pt,a=ml;Vn(l.type)&&(pt=l.stateNode,ml=!1),vn(e,t,l),ns(l.stateNode),pt=n,ml=a;break;case 5:Ct||Wl(l,t);case 6:if(n=pt,a=ml,pt=null,vn(e,t,l),pt=n,ml=a,pt!==null)if(ml)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(i){mt(l,t,i)}else try{pt.removeChild(l.stateNode)}catch(i){mt(l,t,i)}break;case 18:pt!==null&&(ml?(e=pt,If(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),ds(e)):If(pt,l.stateNode));break;case 4:n=pt,a=ml,pt=l.stateNode.containerInfo,ml=!0,vn(e,t,l),pt=n,ml=a;break;case 0:case 11:case 14:case 15:Ct||Hn(2,l,t),Ct||Hn(4,l,t),vn(e,t,l);break;case 1:Ct||(Wl(l,t),n=l.stateNode,typeof n.componentWillUnmount=="function"&&ef(l,t,n)),vn(e,t,l);break;case 21:vn(e,t,l);break;case 22:Ct=(n=Ct)||l.memoizedState!==null,vn(e,t,l),Ct=n;break;default:vn(e,t,l)}}function rf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(l){mt(t,t.return,l)}}function xh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new af),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new af),t;default:throw Error(r(435,e.tag))}}function fr(e,t){var l=xh(e);t.forEach(function(n){var a=Th.bind(null,e,n);l.has(n)||(l.add(n),n.then(a,a))})}function wl(e,t){var l=t.deletions;if(l!==null)for(var n=0;n<l.length;n++){var a=l[n],i=e,c=t,d=c;e:for(;d!==null;){switch(d.tag){case 27:if(Vn(d.type)){pt=d.stateNode,ml=!1;break e}break;case 5:pt=d.stateNode,ml=!1;break e;case 3:case 4:pt=d.stateNode.containerInfo,ml=!0;break e}d=d.return}if(pt===null)throw Error(r(160));cf(i,c,a),pt=null,ml=!1,i=a.alternate,i!==null&&(i.return=null),a.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)uf(t,e),t=t.sibling}var Xl=null;function uf(e,t){var l=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:wl(t,e),Sl(e),n&4&&(Hn(3,e,e.return),Pi(3,e),Hn(5,e,e.return));break;case 1:wl(t,e),Sl(e),n&512&&(Ct||l===null||Wl(l,l.return)),n&64&&xn&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?n:l.concat(n))));break;case 26:var a=Xl;if(wl(t,e),Sl(e),n&512&&(Ct||l===null||Wl(l,l.return)),n&4){var i=l!==null?l.memoizedState:null;if(n=e.memoizedState,l===null)if(n===null)if(e.stateNode===null){e:{n=e.type,l=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":i=a.getElementsByTagName("title")[0],(!i||i[ye]||i[St]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),Vt(i,n,l),i[St]=e,Ee(i),n=i;break e;case"link":var c=am("link","href",a).get(n+(l.href||""));if(c){for(var d=0;d<c.length;d++)if(i=c[d],i.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&i.getAttribute("rel")===(l.rel==null?null:l.rel)&&i.getAttribute("title")===(l.title==null?null:l.title)&&i.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){c.splice(d,1);break t}}i=a.createElement(n),Vt(i,n,l),a.head.appendChild(i);break;case"meta":if(c=am("meta","content",a).get(n+(l.content||""))){for(d=0;d<c.length;d++)if(i=c[d],i.getAttribute("content")===(l.content==null?null:""+l.content)&&i.getAttribute("name")===(l.name==null?null:l.name)&&i.getAttribute("property")===(l.property==null?null:l.property)&&i.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&i.getAttribute("charset")===(l.charSet==null?null:l.charSet)){c.splice(d,1);break t}}i=a.createElement(n),Vt(i,n,l),a.head.appendChild(i);break;default:throw Error(r(468,n))}i[St]=e,Ee(i),n=i}e.stateNode=n}else im(a,e.type,e.stateNode);else e.stateNode=nm(a,n,e.memoizedProps);else i!==n?(i===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):i.count--,n===null?im(a,e.type,e.stateNode):nm(a,n,e.memoizedProps)):n===null&&e.stateNode!==null&&cr(e,e.memoizedProps,l.memoizedProps)}break;case 27:wl(t,e),Sl(e),n&512&&(Ct||l===null||Wl(l,l.return)),l!==null&&n&4&&cr(e,e.memoizedProps,l.memoizedProps);break;case 5:if(wl(t,e),Sl(e),n&512&&(Ct||l===null||Wl(l,l.return)),e.flags&32){a=e.stateNode;try{Dn(a,"")}catch(G){mt(e,e.return,G)}}n&4&&e.stateNode!=null&&(a=e.memoizedProps,cr(e,a,l!==null?l.memoizedProps:a)),n&1024&&(dr=!0);break;case 6:if(wl(t,e),Sl(e),n&4){if(e.stateNode===null)throw Error(r(162));n=e.memoizedProps,l=e.stateNode;try{l.nodeValue=n}catch(G){mt(e,e.return,G)}}break;case 3:if(No=null,a=Xl,Xl=So(t.containerInfo),wl(t,e),Xl=a,Sl(e),n&4&&l!==null&&l.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(G){mt(e,e.return,G)}dr&&(dr=!1,df(e));break;case 4:n=Xl,Xl=So(e.stateNode.containerInfo),wl(t,e),Sl(e),Xl=n;break;case 12:wl(t,e),Sl(e);break;case 13:wl(t,e),Sl(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(br=wt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,fr(e,n)));break;case 22:a=e.memoizedState!==null;var N=l!==null&&l.memoizedState!==null,U=xn,$=Ct;if(xn=U||a,Ct=$||N,wl(t,e),Ct=$,xn=U,Sl(e),n&8192)e:for(t=e.stateNode,t._visibility=a?t._visibility&-2:t._visibility|1,a&&(l===null||N||xn||Ct||ya(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){N=l=t;try{if(i=N.stateNode,a)c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{d=N.stateNode;var F=N.memoizedProps.style,B=F!=null&&F.hasOwnProperty("display")?F.display:null;d.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(G){mt(N,N.return,G)}}}else if(t.tag===6){if(l===null){N=t;try{N.stateNode.nodeValue=a?"":N.memoizedProps}catch(G){mt(N,N.return,G)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(l=n.retryQueue,l!==null&&(n.retryQueue=null,fr(e,l))));break;case 19:wl(t,e),Sl(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,fr(e,n)));break;case 30:break;case 21:break;default:wl(t,e),Sl(e)}}function Sl(e){var t=e.flags;if(t&2){try{for(var l,n=e.return;n!==null;){if(lf(n)){l=n;break}n=n.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var a=l.stateNode,i=rr(e);co(e,i,a);break;case 5:var c=l.stateNode;l.flags&32&&(Dn(c,""),l.flags&=-33);var d=rr(e);co(e,d,c);break;case 3:case 4:var N=l.stateNode.containerInfo,U=rr(e);ur(e,U,N);break;default:throw Error(r(161))}}catch($){mt(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function df(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;df(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)sf(e,t.alternate,t),t=t.sibling}function ya(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Hn(4,t,t.return),ya(t);break;case 1:Wl(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&ef(t,t.return,l),ya(t);break;case 27:ns(t.stateNode);case 26:case 5:Wl(t,t.return),ya(t);break;case 22:t.memoizedState===null&&ya(t);break;case 30:ya(t);break;default:ya(t)}e=e.sibling}}function Gn(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,a=e,i=t,c=i.flags;switch(i.tag){case 0:case 11:case 15:Gn(a,i,l),Pi(4,i);break;case 1:if(Gn(a,i,l),n=i,a=n.stateNode,typeof a.componentDidMount=="function")try{a.componentDidMount()}catch(U){mt(n,n.return,U)}if(n=i,a=n.updateQueue,a!==null){var d=n.stateNode;try{var N=a.shared.hiddenCallbacks;if(N!==null)for(a.shared.hiddenCallbacks=null,a=0;a<N.length;a++)Bu(N[a],d)}catch(U){mt(n,n.return,U)}}l&&c&64&&Fd(i),Ki(i,i.return);break;case 27:nf(i);case 26:case 5:Gn(a,i,l),l&&n===null&&c&4&&tf(i),Ki(i,i.return);break;case 12:Gn(a,i,l);break;case 13:Gn(a,i,l),l&&c&4&&rf(a,i);break;case 22:i.memoizedState===null&&Gn(a,i,l),Ki(i,i.return);break;case 30:break;default:Gn(a,i,l)}t=t.sibling}}function mr(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&Oi(l))}function hr(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oi(e))}function Fl(e,t,l,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ff(e,t,l,n),t=t.sibling}function ff(e,t,l,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Fl(e,t,l,n),a&2048&&Pi(9,t);break;case 1:Fl(e,t,l,n);break;case 3:Fl(e,t,l,n),a&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oi(e)));break;case 12:if(a&2048){Fl(e,t,l,n),e=t.stateNode;try{var i=t.memoizedProps,c=i.id,d=i.onPostCommit;typeof d=="function"&&d(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){mt(t,t.return,N)}}else Fl(e,t,l,n);break;case 13:Fl(e,t,l,n);break;case 23:break;case 22:i=t.stateNode,c=t.alternate,t.memoizedState!==null?i._visibility&2?Fl(e,t,l,n):Ji(e,t):i._visibility&2?Fl(e,t,l,n):(i._visibility|=2,Ja(e,t,l,n,(t.subtreeFlags&10256)!==0)),a&2048&&mr(c,t);break;case 24:Fl(e,t,l,n),a&2048&&hr(t.alternate,t);break;default:Fl(e,t,l,n)}}function Ja(e,t,l,n,a){for(a=a&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,c=t,d=l,N=n,U=c.flags;switch(c.tag){case 0:case 11:case 15:Ja(i,c,d,N,a),Pi(8,c);break;case 23:break;case 22:var $=c.stateNode;c.memoizedState!==null?$._visibility&2?Ja(i,c,d,N,a):Ji(i,c):($._visibility|=2,Ja(i,c,d,N,a)),a&&U&2048&&mr(c.alternate,c);break;case 24:Ja(i,c,d,N,a),a&&U&2048&&hr(c.alternate,c);break;default:Ja(i,c,d,N,a)}t=t.sibling}}function Ji(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,n=t,a=n.flags;switch(n.tag){case 22:Ji(l,n),a&2048&&mr(n.alternate,n);break;case 24:Ji(l,n),a&2048&&hr(n.alternate,n);break;default:Ji(l,n)}t=t.sibling}}var Ii=8192;function Ia(e){if(e.subtreeFlags&Ii)for(e=e.child;e!==null;)mf(e),e=e.sibling}function mf(e){switch(e.tag){case 26:Ia(e),e.flags&Ii&&e.memoizedState!==null&&a0(Xl,e.memoizedState,e.memoizedProps);break;case 5:Ia(e);break;case 3:case 4:var t=Xl;Xl=So(e.stateNode.containerInfo),Ia(e),Xl=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Ii,Ii=16777216,Ia(e),Ii=t):Ia(e));break;default:Ia(e)}}function hf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function $i(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var n=t[l];Bt=n,pf(n,e)}hf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gf(e),e=e.sibling}function gf(e){switch(e.tag){case 0:case 11:case 15:$i(e),e.flags&2048&&Hn(9,e,e.return);break;case 3:$i(e);break;case 12:$i(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ro(e)):$i(e);break;default:$i(e)}}function ro(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var n=t[l];Bt=n,pf(n,e)}hf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Hn(8,t,t.return),ro(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,ro(t));break;default:ro(t)}e=e.sibling}}function pf(e,t){for(;Bt!==null;){var l=Bt;switch(l.tag){case 0:case 11:case 15:Hn(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var n=l.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Oi(l.memoizedState.cache)}if(n=l.child,n!==null)n.return=l,Bt=n;else e:for(l=e;Bt!==null;){n=Bt;var a=n.sibling,i=n.return;if(of(n),n===l){Bt=null;break e}if(a!==null){a.return=i,Bt=a;break e}Bt=i}}}var vh={getCacheForType:function(e){var t=Wt(Lt),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l}},wh=typeof WeakMap=="function"?WeakMap:Map,ot=0,ht=null,Ke=null,et=0,ct=0,jl=null,Yn=!1,$a=!1,gr=!1,wn=0,Nt=0,qn=0,ba=0,pr=0,kl=0,Wa=0,Wi=null,hl=null,yr=!1,br=0,uo=1/0,fo=null,Xn=null,Qt=0,Zn=null,Fa=null,ei=0,xr=0,vr=null,yf=null,Fi=0,wr=null;function Nl(){if((ot&2)!==0&&et!==0)return et&-et;if(L.T!==null){var e=Ya;return e!==0?e:Tr()}return w()}function bf(){kl===0&&(kl=(et&536870912)===0||nt?$e():536870912);var e=zl.current;return e!==null&&(e.flags|=32),kl}function Dl(e,t,l){(e===ht&&(ct===2||ct===9)||e.cancelPendingCommit!==null)&&(ti(e,0),Qn(e,et,kl,!1)),Ot(e,l),((ot&2)===0||e!==ht)&&(e===ht&&((ot&2)===0&&(ba|=l),Nt===4&&Qn(e,et,kl,!1)),en(e))}function xf(e,t,l){if((ot&6)!==0)throw Error(r(327));var n=!l&&(t&124)===0&&(t&e.expiredLanes)===0||Jt(e,t),a=n?Nh(e,t):Nr(e,t,!0),i=n;do{if(a===0){$a&&!n&&Qn(e,t,0,!1);break}else{if(l=e.current.alternate,i&&!Sh(l)){a=Nr(e,t,!1),i=!1;continue}if(a===2){if(i=t,e.errorRecoveryDisabledLanes&i)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var d=e;a=Wi;var N=d.current.memoizedState.isDehydrated;if(N&&(ti(d,c).flags|=256),c=Nr(d,c,!1),c!==2){if(gr&&!N){d.errorRecoveryDisabledLanes|=i,ba|=i,a=4;break e}i=hl,hl=a,i!==null&&(hl===null?hl=i:hl.push.apply(hl,i))}a=c}if(i=!1,a!==2)continue}}if(a===1){ti(e,0),Qn(e,t,0,!0);break}e:{switch(n=e,i=a,i){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:Qn(n,t,kl,!Yn);break e;case 2:hl=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(a=br+300-wt(),10<a)){if(Qn(n,t,kl,!Yn),Rt(n,0,!0)!==0)break e;n.timeoutHandle=Kf(vf.bind(null,n,l,hl,fo,yr,t,kl,ba,Wa,Yn,i,2,-0,0),a);break e}vf(n,l,hl,fo,yr,t,kl,ba,Wa,Yn,i,0,-0,0)}}break}while(!0);en(e)}function vf(e,t,l,n,a,i,c,d,N,U,$,F,B,G){if(e.timeoutHandle=-1,F=t.subtreeFlags,(F&8192||(F&16785408)===16785408)&&(ss={stylesheets:null,count:0,unsuspend:n0},mf(t),F=i0(),F!==null)){e.cancelPendingCommit=F(Cf.bind(null,e,t,i,l,n,a,c,d,N,$,1,B,G)),Qn(e,i,c,!U);return}Cf(e,t,i,l,n,a,c,d,N)}function Sh(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var n=0;n<l.length;n++){var a=l[n],i=a.getSnapshot;a=a.value;try{if(!xl(i(),a))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qn(e,t,l,n){t&=~pr,t&=~ba,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-Ye(a),c=1<<i;n[i]=-1,a&=~c}l!==0&&kt(e,l,t)}function mo(){return(ot&6)===0?(es(0),!1):!0}function Sr(){if(Ke!==null){if(ct===0)var e=Ke.return;else e=Ke,mn=fa=null,Bc(e),Pa=null,Zi=0,e=Ke;for(;e!==null;)Wd(e.alternate,e),e=e.return;Ke=null}}function ti(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,Gh(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),Sr(),ht=e,Ke=l=un(e.current,null),et=t,ct=0,jl=null,Yn=!1,$a=Jt(e,t),gr=!1,Wa=kl=pr=ba=qn=Nt=0,hl=Wi=null,yr=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var a=31-Ye(n),i=1<<a;t|=e[a],n&=~i}return wn=t,Ls(),l}function wf(e,t){Ze=null,L.H=Fs,t===zi||t===Xs?(t=Uu(),ct=3):t===Lu?(t=Uu(),ct=4):ct=t===Hd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jl=t,Ke===null&&(Nt=1,ao(e,_l(t,e.current)))}function Sf(){var e=L.H;return L.H=Fs,e===null?Fs:e}function jf(){var e=L.A;return L.A=vh,e}function jr(){Nt=4,Yn||(et&4194048)!==et&&zl.current!==null||($a=!0),(qn&134217727)===0&&(ba&134217727)===0||ht===null||Qn(ht,et,kl,!1)}function Nr(e,t,l){var n=ot;ot|=2;var a=Sf(),i=jf();(ht!==e||et!==t)&&(fo=null,ti(e,t)),t=!1;var c=Nt;e:do try{if(ct!==0&&Ke!==null){var d=Ke,N=jl;switch(ct){case 8:Sr(),c=6;break e;case 3:case 2:case 9:case 6:zl.current===null&&(t=!0);var U=ct;if(ct=0,jl=null,li(e,d,N,U),l&&$a){c=0;break e}break;default:U=ct,ct=0,jl=null,li(e,d,N,U)}}jh(),c=Nt;break}catch($){wf(e,$)}while(!0);return t&&e.shellSuspendCounter++,mn=fa=null,ot=n,L.H=a,L.A=i,Ke===null&&(ht=null,et=0,Ls()),c}function jh(){for(;Ke!==null;)Nf(Ke)}function Nh(e,t){var l=ot;ot|=2;var n=Sf(),a=jf();ht!==e||et!==t?(fo=null,uo=wt()+500,ti(e,t)):$a=Jt(e,t);e:do try{if(ct!==0&&Ke!==null){t=Ke;var i=jl;t:switch(ct){case 1:ct=0,jl=null,li(e,t,i,1);break;case 2:case 9:if(zu(i)){ct=0,jl=null,Df(t);break}t=function(){ct!==2&&ct!==9||ht!==e||(ct=7),en(e)},i.then(t,t);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:zu(i)?(ct=0,jl=null,Df(t)):(ct=0,jl=null,li(e,t,i,7));break;case 5:var c=null;switch(Ke.tag){case 26:c=Ke.memoizedState;case 5:case 27:var d=Ke;if(!c||sm(c)){ct=0,jl=null;var N=d.sibling;if(N!==null)Ke=N;else{var U=d.return;U!==null?(Ke=U,ho(U)):Ke=null}break t}}ct=0,jl=null,li(e,t,i,5);break;case 6:ct=0,jl=null,li(e,t,i,6);break;case 8:Sr(),Nt=6;break e;default:throw Error(r(462))}}Dh();break}catch($){wf(e,$)}while(!0);return mn=fa=null,L.H=n,L.A=a,ot=l,Ke!==null?0:(ht=null,et=0,Ls(),Nt)}function Dh(){for(;Ke!==null&&!Yt();)Nf(Ke)}function Nf(e){var t=Id(e.alternate,e,wn);e.memoizedProps=e.pendingProps,t===null?ho(e):Ke=t}function Df(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=Zd(l,t,t.pendingProps,t.type,void 0,et);break;case 11:t=Zd(l,t,t.pendingProps,t.type.render,t.ref,et);break;case 5:Bc(t);default:Wd(l,t),t=Ke=Du(t,wn),t=Id(l,t,wn)}e.memoizedProps=e.pendingProps,t===null?ho(e):Ke=t}function li(e,t,l,n){mn=fa=null,Bc(t),Pa=null,Zi=0;var a=t.return;try{if(hh(e,a,t,l,et)){Nt=1,ao(e,_l(l,e.current)),Ke=null;return}}catch(i){if(a!==null)throw Ke=a,i;Nt=1,ao(e,_l(l,e.current)),Ke=null;return}t.flags&32768?(nt||n===1?e=!0:$a||(et&536870912)!==0?e=!1:(Yn=e=!0,(n===2||n===9||n===3||n===6)&&(n=zl.current,n!==null&&n.tag===13&&(n.flags|=16384))),Ef(t,e)):ho(t)}function ho(e){var t=e;do{if((t.flags&32768)!==0){Ef(t,Yn);return}e=t.return;var l=ph(t.alternate,t,wn);if(l!==null){Ke=l;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Nt===0&&(Nt=5)}function Ef(e,t){do{var l=yh(e.alternate,e);if(l!==null){l.flags&=32767,Ke=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){Ke=e;return}Ke=e=l}while(e!==null);Nt=6,Ke=null}function Cf(e,t,l,n,a,i,c,d,N){e.cancelPendingCommit=null;do go();while(Qt!==0);if((ot&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(i=t.lanes|t.childLanes,i|=hc,cn(e,l,i,c,d,N),e===ht&&(Ke=ht=null,et=0),Fa=t,Zn=e,ei=l,xr=i,vr=a,yf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ah(gl,function(){return Rf(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=L.T,L.T=null,a=V.p,V.p=2,c=ot,ot|=4;try{bh(e,t,l)}finally{ot=c,V.p=a,L.T=n}}Qt=1,Tf(),Af(),Mf()}}function Tf(){if(Qt===1){Qt=0;var e=Zn,t=Fa,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var n=V.p;V.p=2;var a=ot;ot|=4;try{uf(t,e);var i=kr,c=gu(e.containerInfo),d=i.focusedElem,N=i.selectionRange;if(c!==d&&d&&d.ownerDocument&&hu(d.ownerDocument.documentElement,d)){if(N!==null&&rc(d)){var U=N.start,$=N.end;if($===void 0&&($=U),"selectionStart"in d)d.selectionStart=U,d.selectionEnd=Math.min($,d.value.length);else{var F=d.ownerDocument||document,B=F&&F.defaultView||window;if(B.getSelection){var G=B.getSelection(),ze=d.textContent.length,_e=Math.min(N.start,ze),dt=N.end===void 0?_e:Math.min(N.end,ze);!G.extend&&_e>dt&&(c=dt,dt=_e,_e=c);var O=mu(d,_e),C=mu(d,dt);if(O&&C&&(G.rangeCount!==1||G.anchorNode!==O.node||G.anchorOffset!==O.offset||G.focusNode!==C.node||G.focusOffset!==C.offset)){var k=F.createRange();k.setStart(O.node,O.offset),G.removeAllRanges(),_e>dt?(G.addRange(k),G.extend(C.node,C.offset)):(k.setEnd(C.node,C.offset),G.addRange(k))}}}}for(F=[],G=d;G=G.parentNode;)G.nodeType===1&&F.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<F.length;d++){var W=F[d];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Co=!!zr,kr=zr=null}finally{ot=a,V.p=n,L.T=l}}e.current=t,Qt=2}}function Af(){if(Qt===2){Qt=0;var e=Zn,t=Fa,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var n=V.p;V.p=2;var a=ot;ot|=4;try{sf(e,t.alternate,t)}finally{ot=a,V.p=n,L.T=l}}Qt=3}}function Mf(){if(Qt===4||Qt===3){Qt=0,qt();var e=Zn,t=Fa,l=ei,n=yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Qt=5:(Qt=0,Fa=Zn=null,_f(e,e.pendingLanes));var a=e.pendingLanes;if(a===0&&(Xn=null),yl(l),t=t.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Me,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=L.T,a=V.p,V.p=2,L.T=null;try{for(var i=e.onRecoverableError,c=0;c<n.length;c++){var d=n[c];i(d.value,{componentStack:d.stack})}}finally{L.T=t,V.p=a}}(ei&3)!==0&&go(),en(e),a=e.pendingLanes,(l&4194090)!==0&&(a&42)!==0?e===wr?Fi++:(Fi=0,wr=e):Fi=0,es(0)}}function _f(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oi(t)))}function go(e){return Tf(),Af(),Mf(),Rf()}function Rf(){if(Qt!==5)return!1;var e=Zn,t=xr;xr=0;var l=yl(ei),n=L.T,a=V.p;try{V.p=32>l?32:l,L.T=null,l=vr,vr=null;var i=Zn,c=ei;if(Qt=0,Fa=Zn=null,ei=0,(ot&6)!==0)throw Error(r(331));var d=ot;if(ot|=4,gf(i.current),ff(i,i.current,c,l),ot=d,es(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Me,i)}catch{}return!0}finally{V.p=a,L.T=n,_f(e,t)}}function Of(e,t,l){t=_l(l,t),t=Fc(e.stateNode,t,2),e=Ln(e,t,2),e!==null&&(Ot(e,2),en(e))}function mt(e,t,l){if(e.tag===3)Of(e,e,l);else for(;t!==null;){if(t.tag===3){Of(t,e,l);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xn===null||!Xn.has(n))){e=_l(l,e),l=kd(2),n=Ln(t,l,2),n!==null&&(Ud(l,n,t,e),Ot(n,2),en(n));break}}t=t.return}}function Dr(e,t,l){var n=e.pingCache;if(n===null){n=e.pingCache=new wh;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(l)||(gr=!0,a.add(l),e=Eh.bind(null,e,t,l),t.then(e,e))}function Eh(e,t,l){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,ht===e&&(et&l)===l&&(Nt===4||Nt===3&&(et&62914560)===et&&300>wt()-br?(ot&2)===0&&ti(e,0):pr|=l,Wa===et&&(Wa=0)),en(e)}function Lf(e,t){t===0&&(t=Xt()),e=Ua(e,t),e!==null&&(Ot(e,t),en(e))}function Ch(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),Lf(e,l)}function Th(e,t){var l=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(l=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(r(314))}n!==null&&n.delete(t),Lf(e,l)}function Ah(e,t){return it(e,t)}var po=null,ni=null,Er=!1,yo=!1,Cr=!1,xa=0;function en(e){e!==ni&&e.next===null&&(ni===null?po=ni=e:ni=ni.next=e),yo=!0,Er||(Er=!0,_h())}function es(e,t){if(!Cr&&yo){Cr=!0;do for(var l=!1,n=po;n!==null;){if(e!==0){var a=n.pendingLanes;if(a===0)var i=0;else{var c=n.suspendedLanes,d=n.pingedLanes;i=(1<<31-Ye(42|e)+1)-1,i&=a&~(c&~d),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(l=!0,Hf(n,i))}else i=et,i=Rt(n,n===ht?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(i&3)===0||Jt(n,i)||(l=!0,Hf(n,i));n=n.next}while(l);Cr=!1}}function Mh(){zf()}function zf(){yo=Er=!1;var e=0;xa!==0&&(Bh()&&(e=xa),xa=0);for(var t=wt(),l=null,n=po;n!==null;){var a=n.next,i=kf(n,t);i===0?(n.next=null,l===null?po=a:l.next=a,a===null&&(ni=l)):(l=n,(e!==0||(i&3)!==0)&&(yo=!0)),n=a}es(e)}function kf(e,t){for(var l=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var c=31-Ye(i),d=1<<c,N=a[c];N===-1?((d&l)===0||(d&n)!==0)&&(a[c]=Vl(d,t)):N<=t&&(e.expiredLanes|=d),i&=~d}if(t=ht,l=et,l=Rt(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,l===0||e===t&&(ct===2||ct===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Kt(n),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Jt(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(n!==null&&Kt(n),yl(l)){case 2:case 8:l=il;break;case 32:l=gl;break;case 268435456:l=Tl;break;default:l=gl}return n=Uf.bind(null,e),l=it(l,n),e.callbackPriority=t,e.callbackNode=l,t}return n!==null&&n!==null&&Kt(n),e.callbackPriority=2,e.callbackNode=null,2}function Uf(e,t){if(Qt!==0&&Qt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(go()&&e.callbackNode!==l)return null;var n=et;return n=Rt(e,e===ht?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(xf(e,n,t),kf(e,wt()),e.callbackNode!=null&&e.callbackNode===l?Uf.bind(null,e):null)}function Hf(e,t){if(go())return null;xf(e,t,!0)}function _h(){Yh(function(){(ot&6)!==0?it(tl,Mh):zf()})}function Tr(){return xa===0&&(xa=$e()),xa}function Bf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Na(""+e)}function Gf(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function Rh(e,t,l,n,a){if(t==="submit"&&l&&l.stateNode===a){var i=Bf((a[Tt]||null).action),c=n.submitter;c&&(t=(t=c[Tt]||null)?Bf(t.formAction):c.getAttribute("formAction"),t!==null&&(i=t,c=null));var d=new Ta("action","action",null,n,a);e.push({event:d,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(xa!==0){var N=c?Gf(a,c):new FormData(a);Kc(l,{pending:!0,data:N,method:a.method,action:i},null,N)}}else typeof i=="function"&&(d.preventDefault(),N=c?Gf(a,c):new FormData(a),Kc(l,{pending:!0,data:N,method:a.method,action:i},i,N))},currentTarget:a}]})}}for(var Ar=0;Ar<mc.length;Ar++){var Mr=mc[Ar],Oh=Mr.toLowerCase(),Lh=Mr[0].toUpperCase()+Mr.slice(1);ql(Oh,"on"+Lh)}ql(bu,"onAnimationEnd"),ql(xu,"onAnimationIteration"),ql(vu,"onAnimationStart"),ql("dblclick","onDoubleClick"),ql("focusin","onFocus"),ql("focusout","onBlur"),ql($m,"onTransitionRun"),ql(Wm,"onTransitionStart"),ql(Fm,"onTransitionCancel"),ql(wu,"onTransitionEnd"),qe("onMouseEnter",["mouseout","mouseover"]),qe("onMouseLeave",["mouseout","mouseover"]),qe("onPointerEnter",["pointerout","pointerover"]),qe("onPointerLeave",["pointerout","pointerover"]),Le("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Le("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Le("onBeforeInput",["compositionend","keypress","textInput","paste"]),Le("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Le("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ts));function Yf(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var n=e[l],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var c=n.length-1;0<=c;c--){var d=n[c],N=d.instance,U=d.currentTarget;if(d=d.listener,N!==i&&a.isPropagationStopped())break e;i=d,a.currentTarget=U;try{i(a)}catch($){no($)}a.currentTarget=null,i=N}else for(c=0;c<n.length;c++){if(d=n[c],N=d.instance,U=d.currentTarget,d=d.listener,N!==i&&a.isPropagationStopped())break e;i=d,a.currentTarget=U;try{i(a)}catch($){no($)}a.currentTarget=null,i=N}}}}function Je(e,t){var l=t[ea];l===void 0&&(l=t[ea]=new Set);var n=e+"__bubble";l.has(n)||(qf(t,e,2,!1),l.add(n))}function _r(e,t,l){var n=0;t&&(n|=4),qf(l,e,n,t)}var bo="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){if(!e[bo]){e[bo]=!0,xt.forEach(function(l){l!=="selectionchange"&&(zh.has(l)||_r(l,!1,e),_r(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bo]||(t[bo]=!0,_r("selectionchange",!1,t))}}function qf(e,t,l,n){switch(fm(t)){case 2:var a=c0;break;case 8:a=r0;break;default:a=Vr}l=a.bind(null,t,l,e),a=void 0,!Da||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,l,{capture:!0,passive:a}):e.addEventListener(t,l,!0):a!==void 0?e.addEventListener(t,l,{passive:a}):e.addEventListener(t,l,!1)}function Or(e,t,l,n,a){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var c=n.tag;if(c===3||c===4){var d=n.stateNode.containerInfo;if(d===a)break;if(c===4)for(c=n.return;c!==null;){var N=c.tag;if((N===3||N===4)&&c.stateNode.containerInfo===a)return;c=c.return}for(;d!==null;){if(c=oe(d),c===null)return;if(N=c.tag,N===5||N===6||N===26||N===27){n=i=c;continue e}d=d.parentNode}}n=n.return}Ns(function(){var U=i,$=bi(l),F=[];e:{var B=Su.get(e);if(B!==void 0){var G=Ta,ze=e;switch(e){case"keypress":if(Jl(l)===0)break e;case"keydown":case"keyup":G=tc;break;case"focusin":ze="focus",G=ji;break;case"focusout":ze="blur",G=ji;break;case"beforeblur":case"afterblur":G=ji;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Xo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=ac;break;case bu:case xu:case vu:G=Vo;break;case wu:G=sc;break;case"scroll":case"scrollend":G=Yo;break;case"wheel":G=As;break;case"copy":case"cut":case"paste":G=Ko;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Ts;break;case"toggle":case"beforetoggle":G=cc}var _e=(t&4)!==0,dt=!_e&&(e==="scroll"||e==="scrollend"),O=_e?B!==null?B+"Capture":null:B;_e=[];for(var C=U,k;C!==null;){var W=C;if(k=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||k===null||O===null||(W=la(C,O),W!=null&&_e.push(ls(C,W,k))),dt)break;C=C.return}0<_e.length&&(B=new G(B,ze,null,l,$),F.push({event:B,listeners:_e}))}}if((t&7)===0){e:{if(B=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",B&&l!==yi&&(ze=l.relatedTarget||l.fromElement)&&(oe(ze)||ze[Pl]))break e;if((G||B)&&(B=$.window===$?$:(B=$.ownerDocument)?B.defaultView||B.parentWindow:window,G?(ze=l.relatedTarget||l.toElement,G=U,ze=ze?oe(ze):null,ze!==null&&(dt=S(ze),_e=ze.tag,ze!==dt||_e!==5&&_e!==27&&_e!==6)&&(ze=null)):(G=null,ze=U),G!==ze)){if(_e=Es,W="onMouseLeave",O="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(_e=Ts,W="onPointerLeave",O="onPointerEnter",C="pointer"),dt=G==null?B:pe(G),k=ze==null?B:pe(ze),B=new _e(W,C+"leave",G,l,$),B.target=dt,B.relatedTarget=k,W=null,oe($)===U&&(_e=new _e(O,C+"enter",ze,l,$),_e.target=k,_e.relatedTarget=dt,W=_e),dt=W,G&&ze)t:{for(_e=G,O=ze,C=0,k=_e;k;k=ai(k))C++;for(k=0,W=O;W;W=ai(W))k++;for(;0<C-k;)_e=ai(_e),C--;for(;0<k-C;)O=ai(O),k--;for(;C--;){if(_e===O||O!==null&&_e===O.alternate)break t;_e=ai(_e),O=ai(O)}_e=null}else _e=null;G!==null&&Xf(F,B,G,_e,!1),ze!==null&&dt!==null&&Xf(F,dt,ze,_e,!0)}}e:{if(B=U?pe(U):window,G=B.nodeName&&B.nodeName.toLowerCase(),G==="select"||G==="input"&&B.type==="file")var we=Os;else if(Ne(B))if(Oa)we=Km;else{we=Vm;var Ve=Qm}else G=B.nodeName,!G||G.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?U&&pi(U.elementType)&&(we=Os):we=Pm;if(we&&(we=we(e,U))){Pe(F,we,l,$);break e}Ve&&Ve(e,B,U),e==="focusout"&&U&&B.type==="number"&&U.memoizedProps.value!=null&&hi(B,"number",B.value)}switch(Ve=U?pe(U):window,e){case"focusin":(Ne(Ve)||Ve.contentEditable==="true")&&(La=Ve,uc=U,Ti=null);break;case"focusout":Ti=uc=La=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,pu(F,l,$);break;case"selectionchange":if(Im)break;case"keydown":case"keyup":pu(F,l,$)}var Te;if(_a)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else ae?D(e,l)&&(Oe="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Di&&l.locale!=="ko"&&(ae||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&ae&&(Te=Ds()):(Kl=$,vi="value"in Kl?Kl.value:Kl.textContent,ae=!0)),Ve=xo(U,Oe),0<Ve.length&&(Oe=new Cs(Oe,e,null,l,$),F.push({event:Oe,listeners:Ve}),Te?Oe.data=Te:(Te=M(l),Te!==null&&(Oe.data=Te)))),(Te=_s?ne(e,l):me(e,l))&&(Oe=xo(U,"onBeforeInput"),0<Oe.length&&(Ve=new Cs("onBeforeInput","beforeinput",null,l,$),F.push({event:Ve,listeners:Oe}),Ve.data=Te)),Rh(F,e,U,l,$)}Yf(F,t)})}function ls(e,t,l){return{instance:e,listener:t,currentTarget:l}}function xo(e,t){for(var l=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;if(a=a.tag,a!==5&&a!==26&&a!==27||i===null||(a=la(e,l),a!=null&&n.unshift(ls(e,a,i)),a=la(e,t),a!=null&&n.push(ls(e,a,i))),e.tag===3)return n;e=e.return}return[]}function ai(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,l,n,a){for(var i=t._reactName,c=[];l!==null&&l!==n;){var d=l,N=d.alternate,U=d.stateNode;if(d=d.tag,N!==null&&N===n)break;d!==5&&d!==26&&d!==27||U===null||(N=U,a?(U=la(l,i),U!=null&&c.unshift(ls(l,U,N))):a||(U=la(l,i),U!=null&&c.push(ls(l,U,N)))),l=l.return}c.length!==0&&e.push({event:t,listeners:c})}var kh=/\r\n?/g,Uh=/\u0000|\uFFFD/g;function Zf(e){return(typeof e=="string"?e:""+e).replace(kh,`
`).replace(Uh,"")}function Qf(e,t){return t=Zf(t),Zf(e)===t}function vo(){}function ut(e,t,l,n,a,i){switch(l){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||Dn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&Dn(e,""+n);break;case"className":We(e,"class",n);break;case"tabIndex":We(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":We(e,l,n);break;case"style":ws(e,n,i);break;case"data":if(t!=="object"){We(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=Na(""+n),e.setAttribute(l,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(l==="formAction"?(t!=="input"&&ut(e,t,"name",a.name,a,null),ut(e,t,"formEncType",a.formEncType,a,null),ut(e,t,"formMethod",a.formMethod,a,null),ut(e,t,"formTarget",a.formTarget,a,null)):(ut(e,t,"encType",a.encType,a,null),ut(e,t,"method",a.method,a,null),ut(e,t,"target",a.target,a,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(l);break}n=Na(""+n),e.setAttribute(l,n);break;case"onClick":n!=null&&(e.onclick=vo);break;case"onScroll":n!=null&&Je("scroll",e);break;case"onScrollEnd":n!=null&&Je("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(l=n.__html,l!=null){if(a.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}l=Na(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""+n):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":n===!0?e.setAttribute(l,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(l,n):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(l,n):e.removeAttribute(l);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(l):e.setAttribute(l,n);break;case"popover":Je("beforetoggle",e),Je("toggle",e),He(e,"popover",n);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":He(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ss.get(l)||l,He(e,l,n))}}function Lr(e,t,l,n,a,i){switch(l){case"style":ws(e,n,i);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(r(61));if(l=n.__html,l!=null){if(a.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"children":typeof n=="string"?Dn(e,n):(typeof n=="number"||typeof n=="bigint")&&Dn(e,""+n);break;case"onScroll":n!=null&&Je("scroll",e);break;case"onScrollEnd":n!=null&&Je("scrollend",e);break;case"onClick":n!=null&&(e.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tt.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(a=l.endsWith("Capture"),t=l.slice(2,a?l.length-7:void 0),i=e[Tt]||null,i=i!=null?i[l]:null,typeof i=="function"&&e.removeEventListener(t,i,a),typeof n=="function")){typeof i!="function"&&i!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,n,a);break e}l in e?e[l]=n:n===!0?e.setAttribute(l,""):He(e,l,n)}}}function Vt(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",e),Je("load",e);var n=!1,a=!1,i;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];if(c!=null)switch(i){case"src":n=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ut(e,t,i,c,l,null)}}a&&ut(e,t,"srcSet",l.srcSet,l,null),n&&ut(e,t,"src",l.src,l,null);return;case"input":Je("invalid",e);var d=i=c=a=null,N=null,U=null;for(n in l)if(l.hasOwnProperty(n)){var $=l[n];if($!=null)switch(n){case"name":a=$;break;case"type":c=$;break;case"checked":N=$;break;case"defaultChecked":U=$;break;case"value":i=$;break;case"defaultValue":d=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,t));break;default:ut(e,t,n,$,l,null)}}bs(e,i,d,N,U,c,a,!1),wa(e);return;case"select":Je("invalid",e),n=c=i=null;for(a in l)if(l.hasOwnProperty(a)&&(d=l[a],d!=null))switch(a){case"value":i=d;break;case"defaultValue":c=d;break;case"multiple":n=d;default:ut(e,t,a,d,l,null)}t=i,l=c,e.multiple=!!n,t!=null?Nn(e,!!n,t,!1):l!=null&&Nn(e,!!n,l,!0);return;case"textarea":Je("invalid",e),i=a=n=null;for(c in l)if(l.hasOwnProperty(c)&&(d=l[c],d!=null))switch(c){case"value":n=d;break;case"defaultValue":a=d;break;case"children":i=d;break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:ut(e,t,c,d,l,null)}xs(e,n,a,i),wa(e);return;case"option":for(N in l)if(l.hasOwnProperty(N)&&(n=l[N],n!=null))switch(N){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:ut(e,t,N,n,l,null)}return;case"dialog":Je("beforetoggle",e),Je("toggle",e),Je("cancel",e),Je("close",e);break;case"iframe":case"object":Je("load",e);break;case"video":case"audio":for(n=0;n<ts.length;n++)Je(ts[n],e);break;case"image":Je("error",e),Je("load",e);break;case"details":Je("toggle",e);break;case"embed":case"source":case"link":Je("error",e),Je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in l)if(l.hasOwnProperty(U)&&(n=l[U],n!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:ut(e,t,U,n,l,null)}return;default:if(pi(t)){for($ in l)l.hasOwnProperty($)&&(n=l[$],n!==void 0&&Lr(e,t,$,n,l,void 0));return}}for(d in l)l.hasOwnProperty(d)&&(n=l[d],n!=null&&ut(e,t,d,n,l,null))}function Hh(e,t,l,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,c=null,d=null,N=null,U=null,$=null;for(G in l){var F=l[G];if(l.hasOwnProperty(G)&&F!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=F;default:n.hasOwnProperty(G)||ut(e,t,G,null,n,F)}}for(var B in n){var G=n[B];if(F=l[B],n.hasOwnProperty(B)&&(G!=null||F!=null))switch(B){case"type":i=G;break;case"name":a=G;break;case"checked":U=G;break;case"defaultChecked":$=G;break;case"value":c=G;break;case"defaultValue":d=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,t));break;default:G!==F&&ut(e,t,B,G,n,F)}}ja(e,c,d,N,U,$,i,a);return;case"select":G=c=d=B=null;for(i in l)if(N=l[i],l.hasOwnProperty(i)&&N!=null)switch(i){case"value":break;case"multiple":G=N;default:n.hasOwnProperty(i)||ut(e,t,i,null,n,N)}for(a in n)if(i=n[a],N=l[a],n.hasOwnProperty(a)&&(i!=null||N!=null))switch(a){case"value":B=i;break;case"defaultValue":d=i;break;case"multiple":c=i;default:i!==N&&ut(e,t,a,i,n,N)}t=d,l=c,n=G,B!=null?Nn(e,!!l,B,!1):!!n!=!!l&&(t!=null?Nn(e,!!l,t,!0):Nn(e,!!l,l?[]:"",!1));return;case"textarea":G=B=null;for(d in l)if(a=l[d],l.hasOwnProperty(d)&&a!=null&&!n.hasOwnProperty(d))switch(d){case"value":break;case"children":break;default:ut(e,t,d,null,n,a)}for(c in n)if(a=n[c],i=l[c],n.hasOwnProperty(c)&&(a!=null||i!=null))switch(c){case"value":B=a;break;case"defaultValue":G=a;break;case"children":break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(r(91));break;default:a!==i&&ut(e,t,c,a,n,i)}gi(e,B,G);return;case"option":for(var ze in l)if(B=l[ze],l.hasOwnProperty(ze)&&B!=null&&!n.hasOwnProperty(ze))switch(ze){case"selected":e.selected=!1;break;default:ut(e,t,ze,null,n,B)}for(N in n)if(B=n[N],G=l[N],n.hasOwnProperty(N)&&B!==G&&(B!=null||G!=null))switch(N){case"selected":e.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:ut(e,t,N,B,n,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in l)B=l[_e],l.hasOwnProperty(_e)&&B!=null&&!n.hasOwnProperty(_e)&&ut(e,t,_e,null,n,B);for(U in n)if(B=n[U],G=l[U],n.hasOwnProperty(U)&&B!==G&&(B!=null||G!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,t));break;default:ut(e,t,U,B,n,G)}return;default:if(pi(t)){for(var dt in l)B=l[dt],l.hasOwnProperty(dt)&&B!==void 0&&!n.hasOwnProperty(dt)&&Lr(e,t,dt,void 0,n,B);for($ in n)B=n[$],G=l[$],!n.hasOwnProperty($)||B===G||B===void 0&&G===void 0||Lr(e,t,$,B,n,G);return}}for(var O in l)B=l[O],l.hasOwnProperty(O)&&B!=null&&!n.hasOwnProperty(O)&&ut(e,t,O,null,n,B);for(F in n)B=n[F],G=l[F],!n.hasOwnProperty(F)||B===G||B==null&&G==null||ut(e,t,F,B,n,G)}var zr=null,kr=null;function wo(e){return e.nodeType===9?e:e.ownerDocument}function Vf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ur(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hr=null;function Bh(){var e=window.event;return e&&e.type==="popstate"?e===Hr?!1:(Hr=e,!0):(Hr=null,!1)}var Kf=typeof setTimeout=="function"?setTimeout:void 0,Gh=typeof clearTimeout=="function"?clearTimeout:void 0,Jf=typeof Promise=="function"?Promise:void 0,Yh=typeof queueMicrotask=="function"?queueMicrotask:typeof Jf<"u"?function(e){return Jf.resolve(null).then(e).catch(qh)}:Kf;function qh(e){setTimeout(function(){throw e})}function Vn(e){return e==="head"}function If(e,t){var l=t,n=0,a=0;do{var i=l.nextSibling;if(e.removeChild(l),i&&i.nodeType===8)if(l=i.data,l==="/$"){if(0<n&&8>n){l=n;var c=e.ownerDocument;if(l&1&&ns(c.documentElement),l&2&&ns(c.body),l&4)for(l=c.head,ns(l),c=l.firstChild;c;){var d=c.nextSibling,N=c.nodeName;c[ye]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&c.rel.toLowerCase()==="stylesheet"||l.removeChild(c),c=d}}if(a===0){e.removeChild(i),ds(t);return}a--}else l==="$"||l==="$?"||l==="$!"?a++:n=l.charCodeAt(0)-48;else n=0;l=i}while(l);ds(t)}function Br(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Br(l),le(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function Xh(e,t,l,n){for(;e.nodeType===1;){var a=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==a.rel||e.getAttribute("href")!==(a.href==null||a.href===""?null:a.href)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin)||e.getAttribute("title")!==(a.title==null?null:a.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(a.src==null?null:a.src)||e.getAttribute("type")!==(a.type==null?null:a.type)||e.getAttribute("crossorigin")!==(a.crossOrigin==null?null:a.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=a.name==null?null:""+a.name;if(a.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Zl(e.nextSibling),e===null)break}return null}function Zh(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Zl(e.nextSibling),e===null))return null;return e}function Gr(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Qh(e,t){var l=e.ownerDocument;if(e.data!=="$?"||l.readyState==="complete")t();else{var n=function(){t(),l.removeEventListener("DOMContentLoaded",n)};l.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Zl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Yr=null;function $f(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(t===0)return e;t--}else l==="/$"&&t++}e=e.previousSibling}return null}function Wf(e,t,l){switch(t=wo(l),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function ns(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);le(e)}var Ul=new Map,Ff=new Set;function So(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Sn=V.d;V.d={f:Vh,r:Ph,D:Kh,C:Jh,L:Ih,m:$h,X:Fh,S:Wh,M:e0};function Vh(){var e=Sn.f(),t=mo();return e||t}function Ph(e){var t=Qe(e);t!==null&&t.tag===5&&t.type==="form"?bd(t):Sn.r(e)}var ii=typeof document>"u"?null:document;function em(e,t,l){var n=ii;if(n&&typeof t=="string"&&t){var a=dl(t);a='link[rel="'+e+'"][href="'+a+'"]',typeof l=="string"&&(a+='[crossorigin="'+l+'"]'),Ff.has(a)||(Ff.add(a),e={rel:e,crossOrigin:l,href:t},n.querySelector(a)===null&&(t=n.createElement("link"),Vt(t,"link",e),Ee(t),n.head.appendChild(t)))}}function Kh(e){Sn.D(e),em("dns-prefetch",e,null)}function Jh(e,t){Sn.C(e,t),em("preconnect",e,t)}function Ih(e,t,l){Sn.L(e,t,l);var n=ii;if(n&&e&&t){var a='link[rel="preload"][as="'+dl(t)+'"]';t==="image"&&l&&l.imageSrcSet?(a+='[imagesrcset="'+dl(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(a+='[imagesizes="'+dl(l.imageSizes)+'"]')):a+='[href="'+dl(e)+'"]';var i=a;switch(t){case"style":i=si(e);break;case"script":i=oi(e)}Ul.has(i)||(e=g({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),Ul.set(i,e),n.querySelector(a)!==null||t==="style"&&n.querySelector(as(i))||t==="script"&&n.querySelector(is(i))||(t=n.createElement("link"),Vt(t,"link",e),Ee(t),n.head.appendChild(t)))}}function $h(e,t){Sn.m(e,t);var l=ii;if(l&&e){var n=t&&typeof t.as=="string"?t.as:"script",a='link[rel="modulepreload"][as="'+dl(n)+'"][href="'+dl(e)+'"]',i=a;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=oi(e)}if(!Ul.has(i)&&(e=g({rel:"modulepreload",href:e},t),Ul.set(i,e),l.querySelector(a)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(is(i)))return}n=l.createElement("link"),Vt(n,"link",e),Ee(n),l.head.appendChild(n)}}}function Wh(e,t,l){Sn.S(e,t,l);var n=ii;if(n&&e){var a=he(n).hoistableStyles,i=si(e);t=t||"default";var c=a.get(i);if(!c){var d={loading:0,preload:null};if(c=n.querySelector(as(i)))d.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},l),(l=Ul.get(i))&&qr(e,l);var N=c=n.createElement("link");Ee(N),Vt(N,"link",e),N._p=new Promise(function(U,$){N.onload=U,N.onerror=$}),N.addEventListener("load",function(){d.loading|=1}),N.addEventListener("error",function(){d.loading|=2}),d.loading|=4,jo(c,t,n)}c={type:"stylesheet",instance:c,count:1,state:d},a.set(i,c)}}}function Fh(e,t){Sn.X(e,t);var l=ii;if(l&&e){var n=he(l).hoistableScripts,a=oi(e),i=n.get(a);i||(i=l.querySelector(is(a)),i||(e=g({src:e,async:!0},t),(t=Ul.get(a))&&Xr(e,t),i=l.createElement("script"),Ee(i),Vt(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function e0(e,t){Sn.M(e,t);var l=ii;if(l&&e){var n=he(l).hoistableScripts,a=oi(e),i=n.get(a);i||(i=l.querySelector(is(a)),i||(e=g({src:e,async:!0,type:"module"},t),(t=Ul.get(a))&&Xr(e,t),i=l.createElement("script"),Ee(i),Vt(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},n.set(a,i))}}function tm(e,t,l,n){var a=(a=se.current)?So(a):null;if(!a)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=si(l.href),l=he(a).hoistableStyles,n=l.get(t),n||(n={type:"style",instance:null,count:0,state:null},l.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=si(l.href);var i=he(a).hoistableStyles,c=i.get(e);if(c||(a=a.ownerDocument||a,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,c),(i=a.querySelector(as(e)))&&!i._p&&(c.instance=i,c.state.loading=5),Ul.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ul.set(e,l),i||t0(a,e,l,c.state))),t&&n===null)throw Error(r(528,""));return c}if(t&&n!==null)throw Error(r(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=oi(l),l=he(a).hoistableScripts,n=l.get(t),n||(n={type:"script",instance:null,count:0,state:null},l.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function si(e){return'href="'+dl(e)+'"'}function as(e){return'link[rel="stylesheet"]['+e+"]"}function lm(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function t0(e,t,l,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Vt(t,"link",l),Ee(t),e.head.appendChild(t))}function oi(e){return'[src="'+dl(e)+'"]'}function is(e){return"script[async]"+e}function nm(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+dl(l.href)+'"]');if(n)return t.instance=n,Ee(n),n;var a=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ee(n),Vt(n,"style",a),jo(n,l.precedence,e),t.instance=n;case"stylesheet":a=si(l.href);var i=e.querySelector(as(a));if(i)return t.state.loading|=4,t.instance=i,Ee(i),i;n=lm(l),(a=Ul.get(a))&&qr(n,a),i=(e.ownerDocument||e).createElement("link"),Ee(i);var c=i;return c._p=new Promise(function(d,N){c.onload=d,c.onerror=N}),Vt(i,"link",n),t.state.loading|=4,jo(i,l.precedence,e),t.instance=i;case"script":return i=oi(l.src),(a=e.querySelector(is(i)))?(t.instance=a,Ee(a),a):(n=l,(a=Ul.get(i))&&(n=g({},l),Xr(n,a)),e=e.ownerDocument||e,a=e.createElement("script"),Ee(a),Vt(a,"link",n),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,jo(n,l.precedence,e));return t.instance}function jo(e,t,l){for(var n=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,c=0;c<n.length;c++){var d=n[c];if(d.dataset.precedence===t)i=d;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function qr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Xr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var No=null;function am(e,t,l){if(No===null){var n=new Map,a=No=new Map;a.set(l,n)}else a=No,n=a.get(l),n||(n=new Map,a.set(l,n));if(n.has(e))return n;for(n.set(e,null),l=l.getElementsByTagName(e),a=0;a<l.length;a++){var i=l[a];if(!(i[ye]||i[St]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var c=i.getAttribute(t)||"";c=e+c;var d=n.get(c);d?d.push(i):n.set(c,[i])}}return n}function im(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function l0(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function sm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ss=null;function n0(){}function a0(e,t,l){if(ss===null)throw Error(r(475));var n=ss;if(t.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var a=si(l.href),i=e.querySelector(as(a));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(n.count++,n=Do.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,Ee(i);return}i=e.ownerDocument||e,l=lm(l),(a=Ul.get(a))&&qr(l,a),i=i.createElement("link"),Ee(i);var c=i;c._p=new Promise(function(d,N){c.onload=d,c.onerror=N}),Vt(i,"link",l),t.instance=i}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(n.count++,t=Do.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}function i0(){if(ss===null)throw Error(r(475));var e=ss;return e.stylesheets&&e.count===0&&Zr(e,e.stylesheets),0<e.count?function(t){var l=setTimeout(function(){if(e.stylesheets&&Zr(e,e.stylesheets),e.unsuspend){var n=e.unsuspend;e.unsuspend=null,n()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(l)}}:null}function Do(){if(this.count--,this.count===0){if(this.stylesheets)Zr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Eo=null;function Zr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Eo=new Map,t.forEach(s0,e),Eo=null,Do.call(e))}function s0(e,t){if(!(t.state.loading&4)){var l=Eo.get(e);if(l)var n=l.get(null);else{l=new Map,Eo.set(e,l);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var c=a[i];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(l.set(c.dataset.precedence,c),n=c)}n&&l.set(null,n)}a=t.instance,c=a.getAttribute("data-precedence"),i=l.get(c)||n,i===n&&l.set(null,a),l.set(c,a),this.count++,n=Do.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(a,e.firstChild)),t.state.loading|=4}}var os={$$typeof:q,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function o0(e,t,l,n,a,i,c,d){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ol(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.hiddenUpdates=ol(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=d,this.incompleteTransitions=new Map}function om(e,t,l,n,a,i,c,d,N,U,$,F){return e=new o0(e,t,l,c,d,N,U,F),t=1,i===!0&&(t|=24),i=vl(3,null,null,t),e.current=i,i.stateNode=e,t=Dc(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:l,cache:t},Ac(i),e}function cm(e){return e?(e=Ha,e):Ha}function rm(e,t,l,n,a,i){a=cm(a),n.context===null?n.context=a:n.pendingContext=a,n=On(t),n.payload={element:l},i=i===void 0?null:i,i!==null&&(n.callback=i),l=Ln(e,n,t),l!==null&&(Dl(l,e,t),Ui(l,e,t))}function um(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function Qr(e,t){um(e,t),(e=e.alternate)&&um(e,t)}function dm(e){if(e.tag===13){var t=Ua(e,67108864);t!==null&&Dl(t,e,67108864),Qr(e,67108864)}}var Co=!0;function c0(e,t,l,n){var a=L.T;L.T=null;var i=V.p;try{V.p=2,Vr(e,t,l,n)}finally{V.p=i,L.T=a}}function r0(e,t,l,n){var a=L.T;L.T=null;var i=V.p;try{V.p=8,Vr(e,t,l,n)}finally{V.p=i,L.T=a}}function Vr(e,t,l,n){if(Co){var a=Pr(n);if(a===null)Or(e,t,n,To,l),mm(e,n);else if(d0(a,e,t,l,n))n.stopPropagation();else if(mm(e,n),t&4&&-1<u0.indexOf(e)){for(;a!==null;){var i=Qe(a);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var c=Dt(i.pendingLanes);if(c!==0){var d=i;for(d.pendingLanes|=2,d.entangledLanes|=2;c;){var N=1<<31-Ye(c);d.entanglements[1]|=N,c&=~N}en(i),(ot&6)===0&&(uo=wt()+500,es(0))}}break;case 13:d=Ua(i,2),d!==null&&Dl(d,i,2),mo(),Qr(i,2)}if(i=Pr(n),i===null&&Or(e,t,n,To,l),i===a)break;a=i}a!==null&&n.stopPropagation()}else Or(e,t,n,null,l)}}function Pr(e){return e=bi(e),Kr(e)}var To=null;function Kr(e){if(To=null,e=oe(e),e!==null){var t=S(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=f(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return To=e,null}function fm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ql()){case tl:return 2;case il:return 8;case gl:case Cl:return 32;case Tl:return 268435456;default:return 32}default:return 32}}var Jr=!1,Pn=null,Kn=null,Jn=null,cs=new Map,rs=new Map,In=[],u0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mm(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":cs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(t.pointerId)}}function us(e,t,l,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:l,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Qe(t),t!==null&&dm(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function d0(e,t,l,n,a){switch(t){case"focusin":return Pn=us(Pn,e,t,l,n,a),!0;case"dragenter":return Kn=us(Kn,e,t,l,n,a),!0;case"mouseover":return Jn=us(Jn,e,t,l,n,a),!0;case"pointerover":var i=a.pointerId;return cs.set(i,us(cs.get(i)||null,e,t,l,n,a)),!0;case"gotpointercapture":return i=a.pointerId,rs.set(i,us(rs.get(i)||null,e,t,l,n,a)),!0}return!1}function hm(e){var t=oe(e.target);if(t!==null){var l=S(t);if(l!==null){if(t=l.tag,t===13){if(t=f(l),t!==null){e.blockedOn=t,It(e.priority,function(){if(l.tag===13){var n=Nl();n=bt(n);var a=Ua(l,n);a!==null&&Dl(a,l,n),Qr(l,n)}});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ao(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Pr(e.nativeEvent);if(l===null){l=e.nativeEvent;var n=new l.constructor(l.type,l);yi=n,l.target.dispatchEvent(n),yi=null}else return t=Qe(l),t!==null&&dm(t),e.blockedOn=l,!1;t.shift()}return!0}function gm(e,t,l){Ao(e)&&l.delete(t)}function f0(){Jr=!1,Pn!==null&&Ao(Pn)&&(Pn=null),Kn!==null&&Ao(Kn)&&(Kn=null),Jn!==null&&Ao(Jn)&&(Jn=null),cs.forEach(gm),rs.forEach(gm)}function Mo(e,t){e.blockedOn===t&&(e.blockedOn=null,Jr||(Jr=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,f0)))}var _o=null;function pm(e){_o!==e&&(_o=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){_o===e&&(_o=null);for(var t=0;t<e.length;t+=3){var l=e[t],n=e[t+1],a=e[t+2];if(typeof n!="function"){if(Kr(n||l)===null)continue;break}var i=Qe(l);i!==null&&(e.splice(t,3),t-=3,Kc(i,{pending:!0,data:a,method:l.method,action:n},n,a))}}))}function ds(e){function t(N){return Mo(N,e)}Pn!==null&&Mo(Pn,e),Kn!==null&&Mo(Kn,e),Jn!==null&&Mo(Jn,e),cs.forEach(t),rs.forEach(t);for(var l=0;l<In.length;l++){var n=In[l];n.blockedOn===e&&(n.blockedOn=null)}for(;0<In.length&&(l=In[0],l.blockedOn===null);)hm(l),l.blockedOn===null&&In.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(n=0;n<l.length;n+=3){var a=l[n],i=l[n+1],c=a[Tt]||null;if(typeof i=="function")c||pm(l);else if(c){var d=null;if(i&&i.hasAttribute("formAction")){if(a=i,c=i[Tt]||null)d=c.formAction;else if(Kr(a)!==null)continue}else d=c.action;typeof d=="function"?l[n+1]=d:(l.splice(n,3),n-=3),pm(l)}}}function Ir(e){this._internalRoot=e}Ro.prototype.render=Ir.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var l=t.current,n=Nl();rm(l,n,e,t,null,null)},Ro.prototype.unmount=Ir.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rm(e.current,2,null,e,null,null),mo(),t[Pl]=null}};function Ro(e){this._internalRoot=e}Ro.prototype.unstable_scheduleHydration=function(e){if(e){var t=w();e={blockedOn:null,target:e,priority:t};for(var l=0;l<In.length&&t!==0&&t<In[l].priority;l++);In.splice(l,0,e),l===0&&hm(e)}};var ym=u.version;if(ym!=="19.1.0")throw Error(r(527,ym,"19.1.0"));V.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=p(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var m0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{Me=Oo.inject(m0),je=Oo}catch{}}return ms.createRoot=function(e,t){if(!h(e))throw Error(r(299));var l=!1,n="",a=Rd,i=Od,c=Ld,d=null;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(a=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(d=t.unstable_transitionCallbacks)),t=om(e,1,!1,null,null,l,n,a,i,c,d,null),e[Pl]=t.current,Rr(e),new Ir(t)},ms.hydrateRoot=function(e,t,l){if(!h(e))throw Error(r(299));var n=!1,a="",i=Rd,c=Od,d=Ld,N=null,U=null;return l!=null&&(l.unstable_strictMode===!0&&(n=!0),l.identifierPrefix!==void 0&&(a=l.identifierPrefix),l.onUncaughtError!==void 0&&(i=l.onUncaughtError),l.onCaughtError!==void 0&&(c=l.onCaughtError),l.onRecoverableError!==void 0&&(d=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(N=l.unstable_transitionCallbacks),l.formState!==void 0&&(U=l.formState)),t=om(e,1,!0,t,l??null,n,a,i,c,d,N,U),t.context=cm(null),l=t.current,n=Nl(),n=bt(n),a=On(n),a.callback=null,Ln(l,a,n),l=n,t.current.lanes=l,Ot(t,l),en(t),e[Pl]=t.current,Rr(e),new Ro(t)},ms.version="19.1.0",ms}var Cm;function N0(){if(Cm)return Fr.exports;Cm=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),Fr.exports=j0(),Fr.exports}var D0=N0();const E0=_m(D0),Rm=({className:o="animate-spin h-6 w-6 text-blue-500"})=>s.jsxs("svg",{className:o,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C0=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),ri=({className:o="h-6 w-6"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),nn=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),T0=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),A0=()=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),ln=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),M0=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),su=({className:o="h-5 w-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),ou=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l18 18"})}),Wn=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),_0=({className:o="h-6 w-6"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),R0=({className:o="h-6 w-6"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z",transform:"rotate(-45 12 12)"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21l3.75-3.75"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 16.5l3.75-3.75"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12l3.75-3.75"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 7.5l3.75-3.75"})]}),Om=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2ZM12 19C10.9 19 10 18.1 10 17C10 15.9 10.9 15 12 15C13.1 15 14 15.9 14 17C14 18.1 13.1 19 12 19ZM13 9H11V4H13V9Z"})}),O0=({className:o="h-5 w-5"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 8l4 4"})]}),L0=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7"})}),z0=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h7M3 3l18 18"})}),k0=({className:o="h-4 w-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),U0=({className:o="h-4 w-4"})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h5M5.55 5.55a8 8 0 101.45 10.45M19.95 11.55a8.003 8.003 0 00-5.22-7.5"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 10h4V6"})]}),H0=({className:o="h-4 w-4"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1-4l-3 3m0 0l-3-3m3 3V3"})}),B0=({className:o="h-5 w-5"})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:o,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),yt={calculateDrawnLength(o,u){if(!u||u.linePixels===0)return 0;let v=0;o.points.forEach(h=>{for(let S=0;S<h.length-1;S++){const f=h[S],E=h[S+1];v+=Math.sqrt(Math.pow(E.x-f.x,2)+Math.pow(E.y-f.y,2))}});const r=u.knownLength/u.linePixels;return v*r},calculateManualLength(o){return o.manualEntries?o.manualEntries.reduce((u,v)=>u+v.length,0):0},calculateTotalLength(o,u){const v=this.calculateDrawnLength(o,u),r=this.calculateManualLength(o);return v+r},formatLength(o){return o<1&&o>0?`${(o*100).toFixed(1)} cm`:`${o.toFixed(2)} m`}},G0=({symbol:o,onNameChange:u,onColorChange:v,onImageChange:r,onDelete:h,isActive:S,onActivate:f,disciplines:E,onAssignDiscipline:p,onAddPoints:y,onOpenCopyModal:g,onDragStart:A,isBeingDragged:j})=>{const[T,Z]=H.useState(!1),[_,Y]=H.useState(o.name),P=H.useRef(null),K=o.disciplineId?E.some(ee=>ee.id===o.disciplineId):!0,q=()=>{Z(!1),_.trim()===""?Y(o.name):u(o.id,_)},te=ee=>{ee.stopPropagation();const ce=ee.target.value;p(o.id,ce==="none"?null:ce)},R=ee=>{ee.stopPropagation(),Z(!0)},J=ee=>{var ce;ee.stopPropagation(),(ce=P.current)==null||ce.click()},z=ee=>{var ge;ee.stopPropagation();const ce=(ge=ee.target.files)==null?void 0:ge[0];ce&&r(o.id,ce),P.current&&(P.current.value="")},Q=(ee,ce=0)=>{const ge="  ".repeat(ce);return E.filter(ie=>ie.parentId===ee).sort((ie,be)=>ie.name.localeCompare(be.name)).flatMap(ie=>[s.jsxs("option",{value:ie.id,children:[ge,ie.name]},ie.id),...Q(ie.id,ce+1)])};return s.jsxs("div",{onClick:f,draggable:!0,onDragStart:ee=>A(ee,o.id),className:`p-3 rounded-lg border-2 transition-all cursor-pointer shadow-sm ${S?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"} ${j?"opacity-40":""}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{onClick:J,className:"relative group/image w-12 h-12 bg-gray-100 rounded-md flex items-center justify-center p-1 border cursor-pointer",style:{borderColor:S?o.color:"#e5e7eb"},children:[s.jsx("img",{src:o.image,alt:o.name,className:"max-w-full max-h-full object-contain"}),s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover/image:opacity-100 transition-opacity",children:s.jsx(Wn,{className:"h-6 w-6 text-white"})}),s.jsx("input",{type:"file",ref:P,className:"hidden",accept:"image/*",onChange:z,onClick:ee=>ee.stopPropagation()})]}),s.jsxs("div",{className:"flex-grow min-w-0",children:[T?s.jsx("input",{type:"text",value:_,onChange:ee=>Y(ee.target.value),onBlur:q,onKeyDown:ee=>ee.key==="Enter"&&q(),onClick:ee=>ee.stopPropagation(),autoFocus:!0,className:"text-md font-semibold text-gray-800 bg-transparent border-b border-blue-400 w-full focus:outline-none"}):s.jsx("p",{className:"text-md font-semibold text-gray-800 truncate hover:text-blue-600",onClick:R,title:"Click to edit",children:o.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Page: ",o.page," (",o.type==="ai"?"AI":"Manual",")"]})]}),s.jsxs("div",{className:"flex flex-col items-center justify-center w-16 flex-shrink-0",children:[s.jsx("p",{className:"text-2xl font-bold",style:{color:o.color},children:o.count}),s.jsx("p",{className:"text-xs text-gray-500 -mt-1",children:"found"})]})]}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200/80 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("select",{value:K&&o.disciplineId||"none",onChange:te,onClick:ee=>ee.stopPropagation(),className:"text-xs text-gray-600 bg-gray-100 border border-gray-300 rounded-md py-1 px-2 focus:outline-none focus:ring-1 focus:ring-blue-500 transition-colors hover:bg-gray-200","aria-label":"Assign discipline",children:[s.jsx("option",{value:"none",children:"-- Assign --"}),Q(null)]}),s.jsxs("div",{className:"relative w-6 h-6",title:"Change symbol color",children:[s.jsx("div",{style:{backgroundColor:o.color},className:"w-full h-full rounded-md border border-gray-300"}),s.jsx("input",{type:"color",value:o.color,onChange:ee=>v(o.id,ee.target.value),onClick:ee=>ee.stopPropagation(),className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:ee=>{ee.stopPropagation(),y(o.id)},className:"text-xs flex items-center text-sky-600 hover:text-sky-800 bg-sky-100 hover:bg-sky-200 px-2 py-1 rounded-md transition-colors","aria-label":"Add or edit points",children:[s.jsx(ri,{className:"h-4 w-4 mr-1"}),"Points"]}),s.jsx("button",{onClick:ee=>{ee.stopPropagation(),g(o.id)},className:"text-gray-400 hover:text-blue-500 transition-colors",title:"Copy symbol to other documents","aria-label":"Copy symbol",children:s.jsx(M0,{})}),s.jsx("button",{onClick:ee=>{ee.stopPropagation(),h(o.id)},className:"text-gray-400 hover:text-red-500 transition-colors","aria-label":"Delete symbol",children:s.jsx(nn,{})})]})]})]})},Y0=({activeProject:o,activePdfId:u,onStartManualSelection:v,onExportExcel:r,onExportPdfReport:h,onViewCounts:S,isExporting:f,isExportingPdf:E,isLoading:p,mode:y,onSymbolNameChange:g,onSymbolColorChange:A,onSymbolImageChange:j,onSymbolDelete:T,onAddPoints:Z,onOpenCopyModal:_,activeSymbolId:Y,setActiveSymbolId:P,onAddDiscipline:K,onUpdateDisciplineName:q,onAssignDiscipline:te,activeDisciplineId:R,setActiveDisciplineId:J,onDeleteDiscipline:z,onUpdateDisciplineParent:Q,measurements:ee})=>{const{symbols:ce,disciplines:ge}=o,ie=ce.filter(je=>je.pdfId===u),[be,ke]=H.useState(""),[fe,L]=H.useState("none"),[V,ue]=H.useState(!1),[xe,b]=H.useState(!1),[X,re]=H.useState(new Set),[I,de]=H.useState(null),[Se,se]=H.useState(null),[Ge,Ie]=H.useState(null),_t=R?ge.find(je=>je.id===R):null;H.useEffect(()=>{window.ExcelJS?ue(!0):b(!0)},[]);const nl=je=>{je.preventDefault(),K(be,fe==="none"?null:fe),ke(""),L("none")},al=je=>{re(Ce=>{const Ye=new Set(Ce);return Ye.has(je)?Ye.delete(je):Ye.add(je),Ye})},Be=(je,Ce,Ye)=>{je.dataTransfer.setData("application/json",JSON.stringify({type:Ye,id:Ce})),je.dataTransfer.effectAllowed="move",setTimeout(()=>de({id:Ce,type:Ye}),0)},it=()=>{de(null),se(null)},Kt=je=>{je.preventDefault()},Yt=(je,Ce,Ye)=>{je.preventDefault(),I&&I.id!==Ce&&se({id:Ce,type:Ye})},qt=(je,Ce)=>{je.preventDefault(),je.stopPropagation();const Ye=je.dataTransfer.getData("application/json");if(!Ye){it();return}try{const{type:Re,id:gt}=JSON.parse(Ye);Re==="discipline"?gt&&gt!==Ce&&Q(gt,Ce):Re==="symbol"&&gt&&te(gt,Ce)}catch(Re){console.error("Failed to parse dropped data:",Re)}it()},wt=()=>y==="selecting_manual"?"Select an Area...":y==="placing_dots"?"Placing Dots...":y==="drawing_area"?"Drawing Area...":y==="setting_scale"||y==="drawing_measurement"?"Measuring...":p?"Processing...":"Add Manual Symbol",Ql=()=>f?"Exporting...":xe?"Export Failed":V?"Export as Excel":"Loading Export...",tl=()=>E?"Generating...":"Export PDF Report",il=je=>{Ie({id:je.id,name:je.name})},gl=()=>{Ie(null)},Cl=()=>{Ge&&(Ge.name.trim()&&q(Ge.id,Ge.name),Ie(null))},Tl=je=>je.map(Ce=>s.jsx(G0,{symbol:Ce,onNameChange:g,onColorChange:A,onImageChange:j,onDelete:T,isActive:Ce.id===Y,onActivate:()=>P(Ce.id===Y?null:Ce.id),disciplines:ge,onAssignDiscipline:te,onAddPoints:Z,onOpenCopyModal:_,onDragStart:(Ye,Re)=>Be(Ye,Re,"symbol"),isBeingDragged:(I==null?void 0:I.type)==="symbol"&&I.id===Ce.id},Ce.id)),sn=(je,Ce=0)=>ge.filter(Re=>Re.parentId===je).sort((Re,gt)=>Re.name.localeCompare(gt.name)).map(Re=>{const gt=ie.filter($e=>$e.disciplineId===Re.id),sl=ge.filter($e=>$e.parentId===Re.id).length>0||gt.length>0,Fe=X.has(Re.id),Dt=R===Re.id,Rt=(Se==null?void 0:Se.type)==="item"&&Se.id===Re.id&&(I==null?void 0:I.id)!==Re.id,Jt=(I==null?void 0:I.type)==="discipline"&&I.id===Re.id,Vl=(Ge==null?void 0:Ge.id)===Re.id;return s.jsxs("div",{style:{opacity:Jt?.4:1},children:[s.jsx("div",{onDragOver:Kt,onDrop:$e=>qt($e,Re.id),onDragEnter:$e=>Yt($e,Re.id,"item"),className:`group relative rounded-lg ${Rt?"bg-blue-200 outline-2 outline-dashed outline-blue-500":""}`,children:s.jsxs("div",{style:{paddingLeft:`${Ce*1.25}rem`},className:`mb-2 pr-1 rounded-md transition-colors flex items-center justify-between cursor-grab ${Dt?"bg-blue-100":"hover:bg-gray-100"}`,draggable:!Vl,onDragStart:$e=>Be($e,Re.id,"discipline"),onDragEnd:it,children:[s.jsxs("div",{onClick:()=>J(Dt?null:Re.id),className:`flex-grow py-1.5 cursor-pointer flex justify-between items-center ${Dt?"border-l-4 border-blue-500 pl-2 -ml-3":"pl-3"}`,children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[sl?s.jsx("button",{onClick:$e=>{$e.stopPropagation(),al(Re.id)},className:"mr-1.5 p-0.5 rounded-full text-gray-500 hover:bg-gray-300/50 hover:text-gray-800",children:s.jsx(ln,{className:`h-4 w-4 transition-transform ${Fe?"-rotate-90":""}`})}):s.jsx("div",{className:"w-5 h-5 mr-1.5 p-0.5"}),Vl?s.jsx("input",{type:"text",value:Ge.name,onChange:$e=>Ge&&Ie({...Ge,name:$e.target.value}),onBlur:Cl,onKeyDown:$e=>{$e.key==="Enter"&&Cl(),$e.key==="Escape"&&gl()},onClick:$e=>$e.stopPropagation(),autoFocus:!0,className:"text-sm font-bold uppercase tracking-wider bg-transparent border-b border-blue-400 w-full focus:outline-none"}):s.jsx("h3",{className:`text-sm font-bold uppercase tracking-wider truncate ${Fe&&sl?"text-gray-500":"text-gray-700"}`,children:Re.name})]}),s.jsx("span",{className:"text-white bg-gray-400 rounded-full px-2 py-0.5 text-xs font-semibold ml-2",children:ie.filter($e=>$e.disciplineId===Re.id).reduce(($e,Xt)=>$e+Xt.count,0)})]}),s.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:$e=>{$e.stopPropagation(),il(Re)},className:"p-1 text-gray-400 hover:text-blue-500",title:"Rename Discipline",children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:$e=>{$e.stopPropagation(),z(Re.id)},className:"p-1 text-gray-400 hover:text-red-500",title:"Delete Discipline",children:s.jsx(nn,{className:"h-4 w-4"})})]})]})}),!Fe&&s.jsxs("div",{children:[gt.length>0&&s.jsx("div",{className:"space-y-3 mb-3",style:{paddingLeft:`${(Ce+1)*1.25}rem`},children:Tl(gt)}),sn(Re.id,Ce+1)]})]},Re.id)}),on=(je,Ce=0)=>{const Ye="  ".repeat(Ce);return ge.filter(Re=>Re.parentId===je).sort((Re,gt)=>Re.name.localeCompare(gt.name)).flatMap(Re=>[s.jsxs("option",{value:Re.id,children:[Ye,Re.name]},Re.id),...on(Re.id,Ce+1)])},Me=ie.filter(je=>!je.disciplineId);return s.jsxs("div",{className:"pt-2 px-1",children:[_t&&s.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg shadow-sm",children:[s.jsxs("p",{className:"text-sm text-blue-800",children:["New symbols will be added to: ",s.jsx("span",{className:"font-bold",children:_t.name})]}),s.jsx("button",{onClick:()=>J(null),className:"text-xs text-blue-600 hover:underline mt-1 font-semibold",children:"Clear selection"})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2 mb-4",children:s.jsxs("button",{onClick:v,disabled:p||y!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(ri,{}),s.jsx("span",{className:"ml-2 font-semibold",children:wt()})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[s.jsxs("button",{onClick:h,disabled:!u||E,className:"w-full flex items-center justify-center px-4 py-2.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(Om,{}),s.jsx("span",{className:"ml-2 font-semibold text-sm",children:tl()})]}),s.jsxs("button",{onClick:r,disabled:ce.length===0&&ee.length===0&&(o.daliDevices||[]).length===0||f||!V,className:"w-full flex items-center justify-center px-4 py-2.5 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(T0,{}),s.jsx("span",{className:"ml-2 font-semibold text-sm",children:Ql()})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-2 mb-4",children:s.jsxs("button",{onClick:S,disabled:ce.length===0&&ee.length===0&&(o.daliDevices||[]).length===0,className:"w-full flex items-center justify-center px-4 py-2.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(_0,{}),s.jsx("span",{className:"ml-2 font-semibold",children:"View Counts"})]})}),s.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Disciplines"}),s.jsxs("form",{onSubmit:nl,className:"space-y-2",children:[s.jsx("input",{type:"text",value:be,onChange:je=>ke(je.target.value),placeholder:"New discipline name...",className:"w-full text-sm p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("select",{value:fe,onChange:je=>L(je.target.value),className:"flex-grow w-full text-sm p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 bg-white",children:[s.jsx("option",{value:"none",children:"-- Top Level --"}),on(null)]}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm font-semibold",children:"Add"})]})]})]}),s.jsxs("div",{className:`space-y-1 rounded-lg ${(Se==null?void 0:Se.type)==="root"?"bg-blue-100 outline-2 outline-dashed outline-blue-500":""}`,onDragOver:Kt,onDrop:je=>qt(je,null),onDragEnter:je=>Yt(je,null,"root"),children:[ie.length===0&&!p&&ge.length===0&&s.jsxs("div",{className:"text-center text-gray-500 mt-8",children:[s.jsx("p",{children:"No symbols counted for this document."}),s.jsx("p",{className:"text-sm",children:'Click "Add Manual Symbol" to start.'})]}),sn(null),Me.length>0&&s.jsxs("div",{className:"mb-2 mt-4",children:[s.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-2 px-1",children:"Uncategorized"}),s.jsx("div",{className:"space-y-3",children:Tl(Me)})]})]})]})},ci="Linear",q0="1.0.1",Lm="Your takeoff 🚀, accelerated.",cu="Quantify",X0=({projects:o,activeProject:u,onSwitchProject:v,onCreateNew:r,onDeleteProject:h,onLogout:S,onBackupAll:f,onBackupSingleProject:E,onRestoreAll:p})=>{const[y,g]=H.useState(!1),A=H.useRef(null),j=H.useRef(null);H.useEffect(()=>{const P=K=>{A.current&&!A.current.contains(K.target)&&g(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const T=()=>{window.confirm(`Are you sure you want to delete project "${u.name}"? This cannot be undone.`)&&h(u.id)},Z=()=>{var P;(P=j.current)==null||P.click()},_=P=>{var q;const K=(q=P.target.files)==null?void 0:q[0];K&&(p(K),j.current&&(j.current.value="")),g(!1)},Y=[...o].sort((P,K)=>K.createdAt-P.createdAt);return s.jsxs("div",{className:"relative",ref:A,children:[s.jsxs("button",{onClick:()=>g(!y),className:"w-full flex items-center justify-between px-4 py-2.5 bg-gray-700 text-white rounded-lg hover:bg-gray-800 transition-all shadow",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(A0,{}),s.jsx("span",{className:"ml-3 font-semibold truncate",children:u.name})]}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${y?"rotate-180":""}`})]}),y&&s.jsxs("div",{className:"absolute z-20 top-full mt-2 w-full bg-white rounded-lg shadow-xl border border-gray-200 max-h-96 overflow-y-auto",children:[s.jsxs("div",{className:"p-2",children:[s.jsx("p",{className:"px-3 py-1 text-xs font-semibold text-gray-400 uppercase",children:"Projects"}),Y.map(P=>s.jsx("button",{onClick:()=>{v(P.id),g(!1)},className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium ${P.id===u.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:P.name},P.id))]}),s.jsxs("div",{className:"border-t border-gray-100 p-2",children:[s.jsx("button",{onClick:()=>{r(),g(!1)},className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-green-600 hover:bg-green-50",children:"Create New Project..."}),s.jsx("button",{onClick:T,className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-red-600 hover:bg-red-50",children:"Delete Current Project"})]}),s.jsxs("div",{className:"border-t border-gray-100 p-2",children:[s.jsx("button",{onClick:()=>{E(),g(!1)},className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100",children:"Backup This Project"}),s.jsx("button",{onClick:()=>{f(),g(!1)},className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100",children:"Backup All Projects"}),s.jsx("input",{type:"file",ref:j,className:"hidden",accept:".json",onChange:_}),s.jsx("button",{onClick:Z,className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100",children:"Restore All from Backup..."})]}),s.jsx("div",{className:"border-t border-gray-100 p-2",children:s.jsx("button",{onClick:S,className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium text-red-600 hover:bg-red-50",children:"Logout"})})]})]})},Z0=({pdfs:o,activePdfId:u,onSwitchPdf:v,onAddPdfs:r,onUpdatePdfLevel:h,onDeletePdf:S})=>{const f=H.useRef(null),E=()=>{var g;return(g=f.current)==null?void 0:g.click()},p=g=>{g.target.files&&g.target.files.length>0&&r(Array.from(g.target.files))},y=(g,A)=>{var Z;const j=g.currentTarget,T=((Z=o.find(_=>_.id===A))==null?void 0:Z.level)||"";j.value.trim()!==T.trim()&&h(A,j.value.trim())};return s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-end items-center mb-2",children:[s.jsx("button",{onClick:E,className:"p-1.5 bg-gray-600 text-white rounded-md hover:bg-gray-700",title:"Add PDF(s) to project",children:s.jsx(ri,{className:"h-4 w-4"})}),s.jsx("input",{type:"file",ref:f,className:"hidden",accept:".pdf",multiple:!0,onChange:p})]}),s.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto border rounded-lg p-1 bg-gray-50",children:o.map(g=>{const A=g.id===u;return s.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-md transition-colors ${A?"bg-blue-100":"hover:bg-gray-100"}`,children:[s.jsx("button",{onClick:()=>v(g.id),className:`flex-grow text-left truncate text-sm font-medium pr-2 ${A?"text-blue-700":"text-gray-700"}`,title:g.name,children:g.name}),s.jsxs("div",{className:"flex items-center flex-shrink-0",children:[s.jsx("input",{type:"text",defaultValue:g.level||"",onBlur:j=>y(j,g.id),onKeyDown:j=>{j.key==="Enter"&&(y(j,g.id),j.currentTarget.blur())},placeholder:"Level",className:"w-24 ml-2 p-1 text-xs border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 bg-white","aria-label":`Level for ${g.name}`}),s.jsx("button",{onClick:j=>{j.stopPropagation(),S(g.id)},className:"ml-2 p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:`Delete ${g.name}`,"aria-label":`Delete ${g.name}`,children:s.jsx(nn,{className:"h-4 w-4"})})]})]},g.id)})})]})},Q0=({areas:o,onStartAreaDrawing:u,onDeleteArea:v,onUpdateArea:r,mode:h})=>{const[S,f]=H.useState(null),[E,p]=H.useState(""),y=g=>{E.trim()&&r(g,{name:E.trim()}),f(null),p("")};return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[s.jsxs("button",{onClick:u,disabled:h!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 mb-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(ri,{}),s.jsx("span",{className:"ml-2 font-semibold",children:"Define New Area"})]}),s.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[o.map(g=>s.jsxs("div",{className:"group flex items-center justify-between p-2 rounded-md hover:bg-gray-100",children:[s.jsxs("div",{className:"flex items-center flex-grow min-w-0",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm mr-2 flex-shrink-0",style:{backgroundColor:g.color}}),S===g.id?s.jsx("input",{type:"text",value:E,onChange:A=>p(A.target.value),onBlur:()=>y(g.id),onKeyDown:A=>A.key==="Enter"&&y(g.id),autoFocus:!0,className:"text-sm font-medium text-gray-800 bg-transparent border-b border-blue-400 w-full focus:outline-none"}):s.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:g.name})]}),s.jsxs("div",{className:"flex items-center flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>{f(g.id),p(g.name)},className:"p-1 text-gray-400 hover:text-blue-500",title:"Rename Area",children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>r(g.id,{isVisible:!g.isVisible}),className:"p-1 text-gray-400 hover:text-blue-500",title:g.isVisible?"Hide Area":"Show Area",children:g.isVisible?s.jsx(su,{className:"h-4 w-4"}):s.jsx(ou,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>v(g.id),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete Area",children:s.jsx(nn,{className:"h-4 w-4"})})]})]},g.id)),o.length===0&&s.jsx("p",{className:"text-xs text-center text-gray-500 py-2",children:"No areas defined for this document."})]})]})},V0=({measurement:o,scaleInfo:u,isSelected:v,onSelect:r,onUpdate:h,onDelete:S,onAddSegment:f,onOpenManualLengthModal:E,onDeleteManualEntry:p,onDragStart:y,isBeingDragged:g})=>{const[A,j]=H.useState(!1),[T,Z]=H.useState(o.name);H.useEffect(()=>{A||Z(o.name)},[A,o.name]);const _=()=>{j(!1),T.trim()&&T.trim()!==o.name?h(o.id,{name:T.trim()}):Z(o.name)},Y=yt.calculateDrawnLength(o,u),P=yt.calculateManualLength(o),K=Y+P;return s.jsxs("div",{onClick:r,draggable:!0,onDragStart:q=>y(q,o.id),className:`group p-2 rounded-lg transition-all cursor-pointer border-2 ${v?"bg-blue-50 border-blue-500":"bg-white border-transparent hover:border-gray-300"} ${g?"opacity-40":""}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0 mt-0.5",style:{backgroundColor:o.color}}),A?s.jsx("input",{type:"text",value:T,onChange:q=>Z(q.target.value),onBlur:_,onKeyDown:q=>q.key==="Enter"&&_(),onClick:q=>q.stopPropagation(),autoFocus:!0,className:"text-sm font-medium text-gray-800 bg-transparent border-b border-blue-400 w-full focus:outline-none"}):s.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",children:o.name})]}),s.jsx("span",{className:"text-sm font-bold flex-shrink-0",style:{color:o.color},children:yt.formatLength(K)})]}),(Y>0||P>0)&&s.jsxs("p",{className:"text-xs text-gray-500 pl-6",children:["Drawn: ",yt.formatLength(Y)," + Manual: ",yt.formatLength(P)]}),s.jsx("div",{className:"pl-6 mt-1",children:(o.manualEntries||[]).map(q=>s.jsxs("div",{className:"group/entry flex items-center justify-between text-xs text-gray-600 hover:bg-gray-100 rounded p-1",children:[s.jsxs("span",{children:["+ ",yt.formatLength(q.length)," (Vertical)"]}),s.jsxs("div",{className:"opacity-0 group-hover/entry:opacity-100",children:[s.jsx("button",{onClick:te=>{te.stopPropagation(),E(o.id,q.segmentIndex,q.pointIndex,q)},className:"p-0.5 hover:text-blue-600",children:s.jsx(Wn,{className:"h-3 w-3"})}),s.jsx("button",{onClick:te=>{te.stopPropagation(),p(o.id,q.id)},className:"p-0.5 hover:text-red-600",children:s.jsx(nn,{className:"h-3 w-3"})})]})]},q.id))}),s.jsxs("div",{className:"flex items-center justify-end space-x-2 mt-1",children:[s.jsxs("div",{className:"relative w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity",title:"Change color",children:[s.jsx("div",{style:{backgroundColor:o.color},className:"w-full h-full rounded-md border border-gray-300"}),s.jsx("input",{type:"color",value:o.color,onChange:q=>h(o.id,{color:q.target.value}),className:"absolute inset-0 opacity-0 w-full h-full cursor-pointer"})]}),s.jsx("button",{onClick:()=>h(o.id,{isVisible:!o.isVisible}),className:"p-1 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:o.isVisible?"Hide":"Show",children:o.isVisible?s.jsx(su,{className:"h-4 w-4"}):s.jsx(ou,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>j(!0),className:"p-1 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Rename",children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>f(o.id),className:"p-1 text-gray-400 hover:text-green-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Add to Measurement",children:s.jsx(ri,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>S(o.id),className:"p-1 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete",children:s.jsx(nn,{className:"h-4 w-4"})})]})]})},P0=o=>{const{measurements:u,scaleInfo:v,onStartSetScale:r,onStartMeasure:h,onStartAddToMeasurement:S,onUpdateMeasurement:f,onDeleteMeasurement:E,mode:p,selectedMeasurementId:y,onSelectMeasurement:g,onOpenManualLengthModal:A,onDeleteManualEntry:j,measurementGroups:T,onAddMeasurementGroup:Z,onUpdateMeasurementGroupName:_,onDeleteMeasurementGroup:Y,onAssignMeasurementToGroup:P,onUpdateMeasurementGroupParent:K}=o,[q,te]=H.useState(""),[R,J]=H.useState("none"),[z,Q]=H.useState(null),[ee,ce]=H.useState(null),[ge,ie]=H.useState(null),[be,ke]=H.useState(new Set),fe=I=>{I.preventDefault(),Z(q,R==="none"?null:R),te("")},L=(I,de,Se)=>{I.dataTransfer.setData("application/json",JSON.stringify({type:Se,id:de})),I.dataTransfer.effectAllowed="move",setTimeout(()=>Q({id:de,type:Se}),0)},V=()=>{Q(null),ce(null)},ue=(I,de)=>{I.preventDefault(),I.stopPropagation();const Se=I.dataTransfer.getData("application/json");if(!Se){V();return}try{const{type:se,id:Ge}=JSON.parse(Se);se==="group"?Ge&&Ge!==de&&K(Ge,de):se==="measurement"&&Ge&&P(Ge,de)}catch(se){console.error("Failed to parse dropped data:",se)}V()},xe=(I,de=0)=>{const Se="  ".repeat(de);return(T||[]).filter(se=>se.parentId===I).sort((se,Ge)=>se.name.localeCompare(Ge.name)).flatMap(se=>[s.jsxs("option",{value:se.id,children:[Se,se.name]},se.id),...xe(se.id,de+1)])},b=I=>s.jsx("div",{className:"space-y-1",children:I.map(de=>s.jsx(V0,{measurement:de,scaleInfo:v,isSelected:de.id===y,onSelect:()=>g(de.id===y?null:de.id),onUpdate:f,onDelete:E,onAddSegment:S,onOpenManualLengthModal:A,onDeleteManualEntry:j,onDragStart:(Se,se)=>L(Se,se,"measurement"),isBeingDragged:(z==null?void 0:z.type)==="measurement"&&z.id===de.id},de.id))}),X=(I,de=0)=>(T||[]).filter(se=>se.parentId===I).sort((se,Ge)=>se.name.localeCompare(Ge.name)).map(se=>{const Ge=u.filter(Be=>Be.groupId===se.id),Ie=be.has(se.id),_t=(ee==null?void 0:ee.type)==="item"&&ee.id===se.id&&(z==null?void 0:z.id)!==se.id,nl=(z==null?void 0:z.type)==="group"&&z.id===se.id,al=(ge==null?void 0:ge.id)===se.id;return s.jsxs("div",{style:{opacity:nl?.4:1},children:[s.jsx("div",{onDragOver:Be=>Be.preventDefault(),onDrop:Be=>ue(Be,se.id),onDragEnter:Be=>{Be.preventDefault(),ce({id:se.id,type:"item"})},className:`group relative rounded-lg mb-1 ${_t?"bg-blue-200 outline-2 outline-dashed outline-blue-500":""}`,children:s.jsxs("div",{style:{paddingLeft:`${de*1.25}rem`},className:"pr-1 rounded-md transition-colors flex items-center justify-between cursor-grab hover:bg-gray-100",draggable:!al,onDragStart:Be=>L(Be,se.id,"group"),onDragEnd:V,children:[s.jsx("div",{className:"flex-grow py-1.5 cursor-pointer flex justify-between items-center",onClick:()=>ke(Be=>{const it=new Set(Be);return it.has(se.id)?it.delete(se.id):it.add(se.id),it}),children:s.jsxs("div",{className:"flex items-center min-w-0",children:[s.jsx(ln,{className:`h-4 w-4 mr-1.5 transition-transform ${Ie?"-rotate-90":""}`}),al?s.jsx("input",{type:"text",value:ge.name,onChange:Be=>ge&&ie({...ge,name:Be.target.value}),onBlur:()=>{_(ge.id,ge.name),ie(null)},onKeyDown:Be=>{Be.key==="Enter"&&(_(ge.id,ge.name),ie(null)),Be.key==="Escape"&&ie(null)},onClick:Be=>Be.stopPropagation(),autoFocus:!0,className:"text-sm font-bold uppercase tracking-wider bg-transparent border-b border-blue-400 w-full focus:outline-none"}):s.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider truncate text-gray-700",children:se.name})]})}),s.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:Be=>{Be.stopPropagation(),ie({id:se.id,name:se.name})},className:"p-1 text-gray-400 hover:text-blue-500",title:"Rename Group",children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:Be=>{Be.stopPropagation(),Y(se.id)},className:"p-1 text-gray-400 hover:text-red-500",title:"Delete Group",children:s.jsx(nn,{className:"h-4 w-4"})})]})]})}),!Ie&&s.jsxs("div",{className:"pt-1",style:{paddingLeft:`${(de+1)*.5}rem`},children:[b(Ge),X(se.id,de+1)]})]},se.id)}),re=u.filter(I=>!I.groupId);return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[s.jsx("button",{onClick:r,disabled:p!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:s.jsx("span",{className:"font-semibold text-sm",children:"Set Scale"})}),s.jsxs("button",{onClick:h,disabled:p!=="idle"||!v,className:"w-full flex items-center justify-center px-4 py-2.5 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(R0,{className:"h-5 w-5"}),s.jsx("span",{className:"ml-2 font-semibold text-sm",children:"New"})]})]}),s.jsx("p",{className:"text-xs text-center text-gray-500 mb-2",children:v?`Scale: ${yt.formatLength(v.knownLength)} = ${v.linePixels.toFixed(2)}px`:"Scale not set"}),s.jsx("div",{className:"mb-4 p-3 bg-gray-100 rounded-lg border",children:s.jsxs("form",{onSubmit:fe,className:"space-y-2",children:[s.jsx("input",{type:"text",value:q,onChange:I=>te(I.target.value),placeholder:"New group name...",className:"w-full text-sm p-2 border border-gray-300 rounded-md"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("select",{value:R,onChange:I=>J(I.target.value),className:"flex-grow w-full text-sm p-2 border border-gray-300 rounded-md bg-white",children:[s.jsx("option",{value:"none",children:"-- Top Level --"}),xe(null)]}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm font-semibold",children:"Add"})]})]})}),s.jsxs("div",{className:"space-y-1 max-h-60 overflow-y-auto",onDragOver:I=>I.preventDefault(),onDrop:I=>ue(I,null),onDragEnter:I=>{I.preventDefault(),ce({id:null,type:"root"})},children:[u.length===0&&(T||[]).length===0&&s.jsx("p",{className:"text-xs text-center text-gray-500 py-2",children:"No measurements taken."}),X(null),re.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider pt-2",children:"Ungrouped"}),b(re)]})]})]})},K0=o=>{const{network:u,devices:v,ecdTypes:r,onUpdateDaliNetwork:h,onDeleteDaliNetwork:S,onStartDaliPlacement:f,onHoverStart:E,onHoverEnd:p,onStartPlacePsu:y,onDeletePsu:g,onRenumberDaliNetwork:A,onSaveDaliNetworkAsTemplate:j}=o,[T,Z]=H.useState(u.name),[_,Y]=H.useState(!1),[P,K]=H.useState(u.powerSupplyCapacity??250);H.useEffect(()=>{K(u.powerSupplyCapacity??250),_||Z(u.name)},[u,_]);const q=()=>{T.trim()&&T.trim()!==u.name&&h(u.id,{name:T.trim()}),Y(!1)},te=()=>{const b=parseInt(String(P),10);h(u.id,{powerSupplyCapacity:isNaN(b)?250:b})},R=2,J=6,z=v.filter(b=>b.networkId===u.id&&b.type==="ECG").length,Q=v.filter(b=>b.networkId===u.id&&b.type==="ECD"),ee=Q.length,ce=new Map((r||[]).map(b=>[b.id,b])),ge=z*R,ie=Q.reduce((b,X)=>{if(X.ecdTypeId){const re=ce.get(X.ecdTypeId);return b+(re?re.busCurrent:0)}return b+J},0),be=ge+ie,ke=P>0?be/P*100:0,fe=be>P,L=fe||ke>90?"bg-red-500":ke>75?"bg-yellow-400":"bg-green-500",V=z>55,ue=ee>20,xe=!!u.psuLocation;return s.jsxs("div",{className:"group p-2.5 rounded-lg bg-white border border-gray-200 shadow-sm",onMouseEnter:E,onMouseLeave:p,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[_?s.jsx("input",{type:"text",value:T,onChange:b=>Z(b.target.value),onBlur:q,onKeyDown:b=>{b.key==="Enter"&&q(),b.key==="Escape"&&Y(!1)},onClick:b=>b.stopPropagation(),autoFocus:!0,className:"font-bold text-gray-800 bg-white border-b-2 border-blue-500 focus:outline-none flex-grow"}):s.jsxs("div",{className:"flex items-center space-x-2",children:[!xe&&s.jsx("span",{title:"Power Supply Unit not placed for this network",children:s.jsx(B0,{className:"text-yellow-500"})}),s.jsx("span",{className:"font-bold text-gray-800",children:u.name})]}),s.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>j(u.id),className:"p-1 text-gray-400 hover:text-blue-500",title:"Save as Template",children:s.jsx(H0,{})}),s.jsx("button",{onClick:()=>A(u.id),className:"p-1 text-gray-400 hover:text-blue-500",title:"Renumber Network",children:s.jsx(U0,{})}),s.jsx("button",{onClick:()=>Y(!0),className:"p-1 text-gray-400 hover:text-blue-500",title:"Rename Network",children:s.jsx(Wn,{})}),s.jsx("button",{onClick:()=>h(u.id,{isVisible:!u.isVisible}),className:"p-1 text-gray-400 hover:text-blue-500",title:u.isVisible?"Hide":"Show",children:u.isVisible?s.jsx(su,{}):s.jsx(ou,{})}),s.jsx("button",{onClick:()=>{window.confirm(`Delete network ${u.name} and all its devices?`)&&S(u.id)},className:"p-1 text-gray-400 hover:text-red-500",title:"Delete Network",children:s.jsx(nn,{})})]})]}),s.jsxs("div",{className:"mt-3 text-xs space-y-2",children:[s.jsxs("div",{className:"p-2 rounded-md bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"font-medium text-gray-600",children:"Bus Power"}),s.jsxs("span",{className:`font-bold ${fe?"text-red-700":"text-gray-800"}`,children:[be.toFixed(1)," / ",P," mA"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:`h-2.5 rounded-full ${L}`,style:{width:`${Math.min(ke,100)}%`}})}),fe&&s.jsx("p",{className:"text-red-600 mt-1 text-center font-semibold",children:"Power supply capacity exceeded!"})]}),s.jsxs("div",{className:`p-2 rounded-md ${V?"bg-red-50 border border-red-200":"bg-gray-50"}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:`font-medium ${V?"text-red-700":"text-gray-600"}`,children:"ECG (Gear)"}),s.jsxs("span",{className:`font-bold ${V?"text-red-700":"text-gray-800"}`,children:[z," / ",u.ecgLimit]})]}),V&&s.jsx("p",{className:"text-red-600 mt-1 text-center",children:"Recommended limit (55) exceeded."})]}),s.jsxs("div",{className:`p-2 rounded-md ${ue?"bg-red-50 border border-red-200":"bg-gray-50"}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:`font-medium ${ue?"text-red-700":"text-gray-600"}`,children:"ECD (Control)"}),s.jsxs("span",{className:`font-bold ${ue?"text-red-700":"text-gray-800"}`,children:[ee," / ",u.ecdLimit]})]}),ue&&s.jsx("p",{className:"text-red-600 mt-1 text-center",children:"Recommended limit (20) exceeded."})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-600 block mb-1",children:"PSU (mA)"}),s.jsx("input",{type:"number",value:P,onChange:b=>K(parseInt(b.target.value)||0),onBlur:te,className:"w-full p-1.5 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-600 block mb-1",children:"Default ECD"}),s.jsxs("select",{value:u.defaultEcdTypeId||"",onChange:b=>h(u.id,{defaultEcdTypeId:b.target.value||null}),className:"w-full p-1.5 border border-gray-300 rounded-md bg-white",title:"Set default ECD type for new devices",children:[s.jsx("option",{value:"",children:"None"}),r.map(b=>s.jsxs("option",{value:b.id,children:[b.reference," (",b.busCurrent,"mA)"]},b.id))]})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"flex items-stretch gap-1 col-span-2 sm:col-span-1",children:[s.jsxs("button",{onClick:()=>y(u.id),className:"text-sm w-full py-1.5 rounded-md font-semibold transition flex items-center justify-center grow bg-indigo-100 text-indigo-800 hover:bg-indigo-200",title:xe?"Move PSU":"Place PSU",children:[s.jsx(k0,{}),s.jsxs("span",{className:"ml-1.5",children:[xe?"Move":"Place"," PSU"]})]}),xe&&s.jsx("button",{onClick:()=>g(u.id),className:"text-sm p-2 rounded-md font-semibold transition flex items-center justify-center bg-red-100 text-red-800 hover:bg-red-200 flex-shrink-0",title:"Delete PSU",children:s.jsx(nn,{className:"h-4 w-4"})})]}),s.jsx("button",{onClick:()=>f(u.id,"ECG"),className:"text-sm w-full py-1.5 bg-orange-100 text-orange-800 rounded-md hover:bg-orange-200 font-semibold transition",children:"Add ECG"}),s.jsx("button",{onClick:()=>f(u.id,"ECD"),className:"text-sm w-full py-1.5 bg-cyan-100 text-cyan-800 rounded-md hover:bg-cyan-200 font-semibold transition sm:col-start-2",children:"Add ECD"})]})]})},J0=o=>{const{networks:u,devices:v,ecdTypes:r,daliNetworkTemplates:h,onAddDaliNetwork:S,onUpdateDaliNetwork:f,onDeleteDaliNetwork:E,onStartDaliPlacement:p,onExportDaliPdfReport:y,isExportingDaliPdf:g,activePdfId:A,currentPage:j,mode:T,onOpenEcdSchedule:Z,onDaliNetworkHover:_,onStartDaliPaintSelection:Y,showDaliLabels:P,onToggleDaliLabels:K,onStartPlacePsu:q,onDeletePsu:te,onRenumberDaliNetwork:R,onSaveDaliNetworkAsTemplate:J}=o,[z,Q]=H.useState(!1),ee=H.useRef(null),ce=[...u].sort((ie,be)=>ie.name.localeCompare(be.name,void 0,{numeric:!0})),ge=v.filter(ie=>ie.pdfId===A&&ie.page===j);return H.useEffect(()=>{const ie=be=>{ee.current&&!ee.current.contains(be.target)&&Q(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]),s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[s.jsxs("div",{className:"grid grid-cols-1 gap-2 mb-3",children:[s.jsxs("button",{onClick:Z,disabled:T!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(Wn,{className:"h-5 w-5"}),s.jsx("span",{className:"ml-2 font-semibold",children:"Manage ECD Schedule"})]}),s.jsxs("div",{className:"relative",ref:ee,children:[s.jsxs("button",{onClick:()=>Q(ie=>!ie),disabled:T!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx(ri,{}),s.jsx("span",{className:"ml-2 font-semibold",children:"Add DALI Network"}),s.jsx(ln,{className:"ml-auto h-5 w-5"})]}),z&&s.jsxs("div",{className:"absolute z-10 top-full mt-1 w-full bg-white rounded-md shadow-lg border",children:[s.jsx("button",{onClick:()=>{S(),Q(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"New Blank Network"}),(h||[]).length>0&&s.jsx("div",{className:"border-t my-1"}),(h||[]).map(ie=>s.jsxs("button",{onClick:()=>{S(ie.id),Q(!1)},className:"w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100",children:["From: ",ie.name]},ie.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:Y,disabled:T!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-violet-500 text-white rounded-lg hover:bg-violet-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",title:"Device Painter (P)",children:[s.jsx(O0,{}),s.jsx("span",{className:"ml-2 font-semibold text-sm",children:"Painter"})]}),s.jsxs("button",{onClick:K,disabled:T!=="idle",className:"w-full flex items-center justify-center px-4 py-2.5 bg-slate-500 text-white rounded-lg hover:bg-slate-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",title:P?"Hide All Labels":"Show All Labels",children:[P?s.jsx(z0,{}):s.jsx(L0,{}),s.jsx("span",{className:"ml-2 font-semibold text-sm",children:P?"Hide Labels":"Show Labels"})]})]}),s.jsxs("button",{onClick:y,disabled:T!=="idle"||g||ge.length===0,className:"w-full flex items-center justify-center px-4 py-2.5 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-all shadow disabled:bg-gray-400 disabled:cursor-not-allowed",children:[g?s.jsx(Rm,{className:"h-5 w-5"}):s.jsx(Om,{}),s.jsx("span",{className:"ml-2 font-semibold",children:"Export DALI PDF"})]})]}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[ce.map(ie=>s.jsx(K0,{network:ie,devices:v,ecdTypes:r,onUpdateDaliNetwork:f,onDeleteDaliNetwork:E,onStartDaliPlacement:p,onHoverStart:()=>_(ie.id),onHoverEnd:()=>_(null),onStartPlacePsu:q,onDeletePsu:te,onRenumberDaliNetwork:R,onSaveDaliNetworkAsTemplate:J},ie.id)),u.length===0&&s.jsx("p",{className:"text-xs text-center text-gray-500 py-2",children:"No DALI networks created."})]})]})},I0=o=>{const{activeProject:u,activePdfId:v,measurements:r,mode:h,scaleInfo:S,pdfOpacity:f,onPdfOpacityChange:E,currentPage:p,onExportDaliPdfReport:y,isExportingDaliPdf:g}=o,A=u.areas.filter(_=>_.pdfId===v),[j,T]=H.useState(new Set(["symbols","measurements","areas","dali","viewerSettings"])),Z=_=>{T(Y=>{const P=new Set(Y);return P.has(_)?P.delete(_):P.add(_),P})};return s.jsxs("aside",{className:"w-96 bg-white h-full flex flex-col p-4 border-r border-gray-200 shadow-md",children:[s.jsx("div",{className:"mb-4",children:s.jsx(X0,{projects:o.projects,activeProject:o.activeProject,onSwitchProject:o.onSwitchProject,onCreateNew:o.onCreateNewProject,onDeleteProject:o.onDeleteProject,onLogout:o.onLogout,onBackupAll:o.onBackupAll,onBackupSingleProject:o.onBackupSingleProject,onRestoreAll:o.onRestoreAll})}),s.jsxs("div",{className:"flex-grow overflow-y-auto -mr-2 pr-2",children:[s.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("documents"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"Documents"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("documents")?"-rotate-90":""}`})]}),!j.has("documents")&&s.jsx("div",{className:"pt-2 px-1",children:s.jsx(Z0,{pdfs:u.pdfs,activePdfId:v,onSwitchPdf:o.onSwitchPdf,onAddPdfs:o.onAddPdfs,onUpdatePdfLevel:o.onUpdatePdfLevel,onDeletePdf:o.onDeletePdf})})]}),s.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("viewerSettings"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"Viewer Settings"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("viewerSettings")?"-rotate-90":""}`})]}),!j.has("viewerSettings")&&s.jsx("div",{className:"pt-2 px-1",children:s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border",children:[s.jsxs("label",{htmlFor:"pdf-opacity-slider",className:"flex justify-between text-sm font-medium text-gray-700 mb-2",children:[s.jsx("span",{children:"PDF Background Opacity"}),s.jsxs("span",{children:[Math.round(f*100),"%"]})]}),s.jsx("input",{id:"pdf-opacity-slider",type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:_=>E(parseFloat(_.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"})]})})]}),s.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("dali"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"DALI Networks"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("dali")?"-rotate-90":""}`})]}),!j.has("dali")&&s.jsx("div",{className:"pt-2 px-1",children:s.jsx(J0,{networks:o.activeProject.daliNetworks||[],devices:o.activeProject.daliDevices||[],ecdTypes:o.activeProject.ecdTypes||[],daliNetworkTemplates:o.activeProject.daliNetworkTemplates||[],onAddDaliNetwork:o.onAddDaliNetwork,onUpdateDaliNetwork:o.onUpdateDaliNetwork,onDeleteDaliNetwork:o.onDeleteDaliNetwork,onStartDaliPlacement:o.onStartDaliPlacement,onExportDaliPdfReport:y,isExportingDaliPdf:g,activePdfId:v,currentPage:p,mode:o.mode,onOpenEcdSchedule:o.onOpenEcdSchedule,onDaliNetworkHover:o.onDaliNetworkHover,onStartDaliPaintSelection:o.onStartDaliPaintSelection,showDaliLabels:o.showDaliLabels,onToggleDaliLabels:o.onToggleDaliLabels,onStartPlacePsu:o.onStartPlacePsu,onDeletePsu:o.onDeletePsu,onRenumberDaliNetwork:o.onRenumberDaliNetwork,onSaveDaliNetworkAsTemplate:o.onSaveDaliNetworkAsTemplate})})]}),s.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("measurements"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"Measurements"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("measurements")?"-rotate-90":""}`})]}),!j.has("measurements")&&s.jsx("div",{className:"pt-2 px-1",children:s.jsx(P0,{measurements:r,measurementGroups:o.activeProject.measurementGroups||[],scaleInfo:S,onStartSetScale:o.onStartSetScale,onStartMeasure:o.onStartMeasure,onStartAddToMeasurement:o.onStartAddToMeasurement,onUpdateMeasurement:o.onUpdateMeasurement,onDeleteMeasurement:o.onDeleteMeasurement,mode:h,selectedMeasurementId:o.selectedMeasurementId,onSelectMeasurement:o.onSelectMeasurement,onOpenManualLengthModal:o.onOpenManualLengthModal,onDeleteManualEntry:o.onDeleteManualEntry,onAddMeasurementGroup:o.onAddMeasurementGroup,onUpdateMeasurementGroupName:o.onUpdateMeasurementGroupName,onDeleteMeasurementGroup:o.onDeleteMeasurementGroup,onAssignMeasurementToGroup:o.onAssignMeasurementToGroup,onUpdateMeasurementGroupParent:o.onUpdateMeasurementGroupParent})})]}),s.jsxs("div",{className:"border-b border-gray-200 pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("areas"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"Areas"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("areas")?"-rotate-90":""}`})]}),!j.has("areas")&&s.jsx("div",{className:"pt-2 px-1",children:s.jsx(Q0,{areas:A,onStartAreaDrawing:o.onStartAreaDrawing,onDeleteArea:o.onDeleteArea,onUpdateArea:o.onUpdateArea,mode:h})})]}),s.jsxs("div",{className:"pb-2 mb-2",children:[s.jsxs("button",{onClick:()=>Z("symbols"),className:"w-full flex justify-between items-center py-1 text-lg font-semibold text-gray-800 hover:bg-gray-50 rounded-md px-2",children:[s.jsx("span",{children:"Symbols & Disciplines"}),s.jsx(ln,{className:`h-5 w-5 transition-transform ${j.has("symbols")?"-rotate-90":""}`})]}),!j.has("symbols")&&s.jsx(Y0,{activeProject:o.activeProject,activePdfId:o.activePdfId,onStartManualSelection:o.onStartManualSelection,onExportExcel:o.onExportExcel,onExportPdfReport:o.onExportPdfReport,onViewCounts:o.onViewCounts,isExporting:o.isExporting,isExportingPdf:o.isExportingPdf,isLoading:o.isLoading,mode:o.mode,onSymbolNameChange:o.onSymbolNameChange,onSymbolColorChange:o.onSymbolColorChange,onSymbolImageChange:o.onSymbolImageChange,onSymbolDelete:o.onSymbolDelete,onAddPoints:o.onAddPoints,onOpenCopyModal:o.onOpenCopyModal,activeSymbolId:o.activeSymbolId,setActiveSymbolId:o.setActiveSymbolId,onAddDiscipline:o.onAddDiscipline,onUpdateDisciplineName:o.onUpdateDisciplineName,onAssignDiscipline:o.onAssignDiscipline,activeDisciplineId:o.activeDisciplineId,setActiveDisciplineId:o.setActiveDisciplineId,onDeleteDiscipline:o.onDeleteDiscipline,onUpdateDisciplineParent:o.onUpdateDisciplineParent,measurements:o.measurements})]})]}),s.jsx("div",{className:"mt-auto pt-4 border-t border-gray-200 text-center",children:s.jsxs("p",{className:"text-xs text-gray-400",children:[cu," v",q0]})})]})},Pt=160,$0=2.5,W0=(o,u,v)=>{const r=Math.pow(u.x-v.x,2)+Math.pow(u.y-v.y,2);if(r===0)return Math.sqrt(Math.pow(o.x-u.x,2)+Math.pow(o.y-u.y,2));let h=((o.x-u.x)*(v.x-u.x)+(o.y-u.y)*(v.y-u.y))/r;h=Math.max(0,Math.min(1,h));const S={x:u.x+h*(v.x-u.x),y:u.y+h*(v.y-u.y)};return Math.sqrt(Math.pow(o.x-S.x,2)+Math.pow(o.y-S.y,2))},au=(o,u,v,r,h,S)=>{o.save(),o.fillStyle=h,o.strokeStyle=S,o.lineWidth=2,o.beginPath(),o.moveTo(u,v),o.lineTo(u-r,v-r*2),o.lineTo(u+r,v-r*2),o.closePath(),o.fill(),o.stroke(),o.beginPath(),o.arc(u,v-r*2,r,0,2*Math.PI),o.fill(),o.stroke(),o.restore()},F0=(o,u,v,r,h)=>{v&&u.forEach(S=>{if(S.networkId===v){const f=S.location,p=S.type==="ECG"?5:7,y=(f.x+f.width/2)*r,g=(f.y+f.height-p)*r,A=15+Math.sin(h/200)*4,j=.5+Math.sin(h/200)*.3;o.save(),o.beginPath(),o.arc(y,g,A,0,2*Math.PI),o.fillStyle=`rgba(255, 193, 7, ${j})`,o.fill(),o.restore()}})},eg=(o,u,v,r,h,S)=>{if(!v)return;const f=u.type==="ECG",E=f?"#f97316":"#06b6d4",p=5,y=u.location,g=(y.x+y.width/2)*h,A=(y.y+y.height)*h;if(o.save(),o.fillStyle=E,o.strokeStyle="#000000",o.lineWidth=1,o.beginPath(),f?o.arc(g,A-p,p,0,2*Math.PI):o.rect(g-p,A-p*2,p*2,p*2),o.fill(),o.stroke(),S){const j=f?String(u.shortAddress).padStart(2,"0"):u.shortAddress,T=r?` [${r.reference}]`:"",Z=`${v.name}.${j}${T}`;o.fillStyle="#000000",o.font="bold 11px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText(Z,g,A-p*3.5)}o.restore()},Tm=(o,u,v)=>{const r=(u.x+u.width/2)*v,h=(u.y+u.height/2)*v;o.save(),o.strokeStyle="#4f46e5",o.lineWidth=2.5,o.lineCap="round",o.lineJoin="round",o.beginPath(),o.moveTo(r,h-6),o.lineTo(r,h+6),o.moveTo(r-5,h-3),o.lineTo(r,h),o.lineTo(r+5,h-3),o.moveTo(r-5,h+3),o.lineTo(r,h),o.lineTo(r+5,h+3),o.stroke(),o.lineWidth=1.5,o.beginPath(),o.arc(r,h,10,0,2*Math.PI),o.stroke(),u.location&&(o.fillStyle="#4f46e5",o.font="bold 11px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText(u.location,r,h+18)),o.restore()},tg=(o,u,v)=>{u.forEach(r=>{if(!r.isVisible||r.points.length<2)return;o.save(),o.fillStyle=r.color+"33",o.strokeStyle=r.color,o.lineWidth=2,o.beginPath(),o.moveTo(r.points[0].x*v,r.points[0].y*v);for(let f=1;f<r.points.length;f++)o.lineTo(r.points[f].x*v,r.points[f].y*v);o.closePath(),o.fill(),o.stroke();let h=r.points.reduce((f,E)=>f+E.x,0)/r.points.length,S=r.points.reduce((f,E)=>f+E.y,0)/r.points.length;o.fillStyle=r.color,o.font="bold 16px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText(r.name,h*v,S*v),o.restore()})},lg=(o,u,v,r,h,S,f,E)=>{u.filter(p=>p.isVisible).forEach(p=>{const y=S==="idle"&&r===p.id;if(o.save(),o.strokeStyle=p.color,o.lineWidth=y?5:3,o.lineCap="round",p.points.forEach(g=>{if(!(g.length<2)){o.beginPath(),o.moveTo(g[0].x*h,g[0].y*h);for(let A=1;A<g.length;A++)o.lineTo(g[A].x*h,g[A].y*h);o.stroke()}}),v){const g=yt.calculateTotalLength(p,v),A=yt.formatLength(g),j=p.points[p.points.length-1],T=j[j.length-1];o.fillStyle=p.color,o.font="bold 14px sans-serif",o.fillText(`${p.name}: ${A}`,T.x*h+8,T.y*h-8)}y&&p.points.forEach((g,A)=>{g.forEach((j,T)=>{const Z=j.x*h,_=j.y*h,P=(f==null?void 0:f.measurementId)===p.id&&f.segmentIndex===A&&f.pointIndex===T&&E;o.fillStyle="#ffffff",o.lineWidth=P?3:2,o.strokeStyle=P?"#3b82f6":p.color;const K=P?8:6;o.beginPath(),o.arc(Z,_,K,0,Math.PI*2),o.fill(),o.stroke();const q=(p.manualEntries||[]).find(te=>te.segmentIndex===A&&te.pointIndex===T);if(q){o.fillStyle=p.color,o.font="bold 12px sans-serif",o.textAlign="center",o.textBaseline="middle";const te=`+${yt.formatLength(q.length)}`,R=o.measureText(te),J=4;o.globalAlpha=.8,o.fillRect(Z-R.width/2-J,_-22-J,R.width+J*2,14+J*2),o.fillStyle="#ffffff",o.globalAlpha=1,o.fillText(te,Z,_-15)}})}),o.restore()})},ng=(o,u,v,r,h,S)=>{u.forEach(f=>{const E=h==="placing_dots"&&f.id===S,p=h==="placing_dots"&&f.id!==S;if(h==="placing_dots"){let Y=1;E?Y=.9:p?Y=.3:Y=.9;const P=Math.round(Y*255).toString(16).padStart(2,"0"),K=f.color+P;f.locations.forEach(q=>{const te=(q.x+q.width/2)*v,R=(q.y+q.height)*v;au(o,te,R,8,K,f.color)});return}const y=f.color,g=parseInt(y.slice(1,3),16),A=parseInt(y.slice(3,5),16),j=parseInt(y.slice(5,7),16),T=.5+Math.sin(r/200)*.3,Z=`rgba(${g}, ${A}, ${j}, ${T})`,_=15+Math.sin(r/200)*4;f.locations.forEach(Y=>{const K=(Y.x+Y.width/2)*v,q=(Y.y+Y.height)*v,te=K,R=q-16;o.save(),o.beginPath(),o.arc(te,R,_,0,2*Math.PI),o.fillStyle=Z,o.fill(),o.restore(),au(o,K,q,8,f.color,f.color)})})},ag=(o,u,v,r,h,S,f,E,p)=>{const y=r==="drawing_measurement",g=E.find(T=>T.id===p),A=r==="drawing_area"?"#10B981":(g==null?void 0:g.color)||"#8B5CF6";o.save(),o.strokeStyle=A,o.lineWidth=2,o.fillStyle=A+"4D",o.beginPath(),o.moveTo(u[0].x*h,u[0].y*h);for(let T=1;T<u.length;T++)o.lineTo(u[T].x*h,u[T].y*h);let j=v;if(y&&S&&v&&u.length>0){const T=u[u.length-1],Z={x:T.x*h,y:T.y*h},_=v.x-Z.x,Y=v.y-Z.y;Math.abs(_)>Math.abs(Y)?j={x:v.x,y:Z.y}:j={x:Z.x,y:v.y}}if(j&&o.lineTo(j.x,j.y),o.stroke(),r==="drawing_area"&&u.length>2&&(o.closePath(),o.fill()),y&&j&&f){let T=0;const Z={x:j.x/h,y:j.y/h},_=[...u,Z];for(let q=0;q<_.length-1;q++){const te=_[q],R=_[q+1];T+=Math.sqrt(Math.pow(R.x-te.x,2)+Math.pow(R.y-te.y,2))}const Y=f.knownLength/f.linePixels,P=T*Y;let K=`Segment: ${yt.formatLength(P)}`;if(g){const te=yt.calculateTotalLength(g,f)+P;K=`Total: ${yt.formatLength(te)} (+${yt.formatLength(P)})`}o.fillStyle=A,o.font="bold 14px sans-serif",o.fillText(K,j.x+10,j.y-10)}u.forEach(T=>{o.fillStyle=A,o.beginPath(),o.arc(T.x*h,T.y*h,4,0,2*Math.PI),o.fill()}),o.restore()},ig=({pdfData:o,mode:u,onSymbolSelected:v,onPlaceDot:r,onQuickPlaceDot:h,onLocationDelete:S,onStartReassignPin:f,symbolsToHighlight:E,activeSymbolId:p,activeSymbolColor:y,currentPage:g,setCurrentPage:A,onCancelSelection:j,onFinishAreaDrawing:T,areas:Z,drawingPoints:_,onDrawPoint:Y,measurements:P,scaleInfo:K,activeDrawingMeasurementId:q,selectedMeasurementId:te,onOpenManualLengthModal:R,onStartCreateLinearComponent:J,onDeleteMeasurementSegment:z,onStartDragMeasurementNode:Q,onUpdateMeasurementPoint:ee,onEndDragMeasurementNode:ce,pdfOpacity:ge,daliNetworks:ie,daliDevices:be,ecdTypes:ke,onPlaceDaliDevice:fe,onDeleteDaliDevice:L,onStartEditEcdDevice:V,activeDaliPlacement:ue,hoveredDaliNetworkId:xe,onDaliNetworkHover:b,onDaliDevicePickedForPainting:X,onDaliPsuPickedForPainting:re,onPaintDaliDevice:I,onPaintDaliPsuLocation:de,daliDeviceToPaint:Se,daliPsuLocationToPaint:se,showDaliLabels:Ge,onPlacePsu:Ie,onDeletePsu:_t,onStartEditPsuLocation:nl,activeDaliPsuPlacementNetworkId:al,activePdfId:Be})=>{const it=H.useRef(null),Kt=H.useRef(null),Yt=H.useRef(null),qt=H.useRef(null),wt=H.useRef(null),Ql=H.useRef(null),tl=H.useRef(null),[il,gl]=H.useState(null),[Cl,Tl]=H.useState(0),[sn,on]=H.useState(!1),[Me,je]=H.useState(1.5),[Ce,Ye]=H.useState(null),[Re,gt]=H.useState(null),[Ue,sl]=H.useState(null),[Fe,Dt]=H.useState(null),[Rt,Jt]=H.useState(!1),[Vl,$e]=H.useState(!1),[Xt,ol]=H.useState(!1),[Ot,cn]=H.useState(!1),[kt,pl]=H.useState(null),[bt,yl]=H.useState(null),w=H.useRef(null),It=()=>{const ye=it.current,le=Kt.current;if(ye){const oe=ye.getContext("2d");oe==null||oe.clearRect(0,0,ye.width,ye.height)}if(le){const oe=le.getContext("2d");oe==null||oe.clearRect(0,0,le.width,le.height)}};H.useEffect(()=>{if(typeof pdfjsLib>"u"){console.error("pdf.js is not loaded.");return}if(pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",!o){gl(null),Tl(0),It();return}const ye=o.split(",");if(ye.length<2||!ye[1]){console.error("Invalid PDF data: not a valid data URL."),gl(null),Tl(0);return}pdfjsLib.getDocument({data:atob(ye[1])}).promise.then(oe=>{gl(oe),Tl(oe.numPages)}).catch(oe=>{console.error("Error loading PDF:",oe)})},[o]);const ve=H.useCallback(async ye=>{if(il){Ql.current&&Ql.current.cancel(),on(!0);try{const le=await il.getPage(ye),oe=le.getViewport({scale:Me}),Qe=it.current,pe=Kt.current;if(!Qe||!pe)return;const he=Qe.getContext("2d");if(!he)return;Qe.height=oe.height,Qe.width=oe.width,pe.height=oe.height,pe.width=oe.width;const Ee={canvasContext:he,viewport:oe},xt=le.render(Ee);Ql.current=xt,await xt.promise,Ql.current=null}catch(le){le.name!=="RenderingCancelledException"&&console.error("Error rendering page",le)}finally{on(!1)}}},[il,Me]);H.useEffect(()=>{il&&ve(g)},[il,g,ve]),H.useLayoutEffect(()=>{wt.current&&qt.current&&(qt.current.scrollLeft=wt.current.left,qt.current.scrollTop=wt.current.top,wt.current=null)},[Me]),H.useEffect(()=>{const ye=it.current;ye&&(ye.style.opacity=String(ge))},[ge]),H.useEffect(()=>{const ye=Qe=>{Qe.key==="Escape"&&(Qe.preventDefault(),j()),Qe.key==="Control"&&$e(!0),Qe.key==="Shift"&&ol(!0),Qe.key==="Alt"&&(u==="placing_dots"||u.startsWith("painting_dali")||u.startsWith("placing_dali"))&&!Rt&&(Qe.preventDefault(),Jt(!0))},le=Qe=>{Qe.key==="Control"&&$e(!1),Qe.key==="Shift"&&ol(!1),Qe.key==="Alt"&&(Qe.preventDefault(),Jt(!1))},oe=()=>{Jt(!1),$e(!1),ol(!1)};return window.addEventListener("keydown",ye),window.addEventListener("keyup",le),window.addEventListener("blur",oe),()=>{window.removeEventListener("keydown",ye),window.removeEventListener("keyup",le),window.removeEventListener("blur",oe)}},[u,Rt,j]),H.useEffect(()=>{const ye=Kt.current;if(!ye)return;const le=ye.getContext("2d");if(!le)return;tl.current&&cancelAnimationFrame(tl.current);const oe=E.length>0,Qe=(u==="placing_dots"||u==="placing_dali_device"||u==="painting_dali_device"||u==="placing_dali_psu")&&Fe&&!Rt,pe=_.length>0&&(u==="drawing_area"||u==="setting_scale"||u==="drawing_measurement"),he=(Ue==null?void 0:Ue.type)==="pin"&&Ue.id&&typeof Ue.index=="number"||(Ue==null?void 0:Ue.type)==="dali"||(Ue==null?void 0:Ue.type)==="psu",Ee=new Map(ie.map(ft=>[ft.id,ft])),xt=new Map((ke||[]).map(ft=>[ft.id,ft])),tt=be.filter(ft=>ft.page===g),Le=tt.length>0||ie.some(ft=>{var Ae,at;return((Ae=ft.psuLocation)==null?void 0:Ae.pdfId)===Be&&((at=ft.psuLocation)==null?void 0:at.page)===g}),qe=ft=>{if(le.clearRect(0,0,ye.width,ye.height),tg(le,Z,Me),lg(le,P,K,te,Me,u,bt,Xt),F0(le,tt,xe,Me,ft),oe&&ng(le,E,Me,ft,u,p),Le&&(ie.forEach(Ae=>{if(Ae.isVisible&&Ae.psuLocation){const at=Ae.psuLocation;at.pdfId===Be&&at.page===g&&Tm(le,at,Me)}}),tt.forEach(Ae=>{const at=Ee.get(Ae.networkId),Ut=Ae.ecdTypeId?xt.get(Ae.ecdTypeId):void 0;at!=null&&at.isVisible&&eg(le,Ae,at,Ut,Me,Ge)})),Qe)if(u==="placing_dots"&&y)au(le,Fe.x,Fe.y,8,y+"aa",y);else if(u==="placing_dali_psu"&&Fe){le.save(),le.globalAlpha=.7;const Ae=10,at={x:Fe.x/Me-Ae,y:Fe.y/Me-Ae,width:Ae*2,height:Ae*2};Tm(le,at,Me),le.restore()}else{let Ae=null;if(u==="placing_dali_device"&&ue?Ae={deviceType:ue.deviceType}:u==="painting_dali_device"&&Se&&(Ae={deviceType:Se.deviceType}),Ae&&Fe){const at=Ae.deviceType==="ECG",Ut=at?"#f97316":"#06b6d4",He=5;le.fillStyle=Ut+"aa",le.strokeStyle=Ut,le.lineWidth=1,le.beginPath(),at?le.arc(Fe.x,Fe.y-He,He,0,2*Math.PI):le.rect(Fe.x-He,Fe.y-He*2,He*2,He*2),le.fill(),le.stroke()}}if(Ce&&(le.strokeStyle="#0ea5e9",le.lineWidth=2,le.strokeRect(Ce.x,Ce.y,Ce.width,Ce.height)),pe&&ag(le,_,Fe,u,Me,Xt,K,P,q),kt){const{midPoint:Ae}=kt;le.save(),le.fillStyle="rgba(239, 68, 68, 0.8)",le.strokeStyle="#ffffff",le.lineWidth=2,le.beginPath(),le.arc(Ae.x,Ae.y,10,0,Math.PI*2),le.fill(),le.stroke(),le.strokeStyle="#ffffff",le.lineWidth=2.5,le.lineCap="round",le.beginPath(),le.moveTo(Ae.x-4,Ae.y-4),le.lineTo(Ae.x+4,Ae.y+4),le.moveTo(Ae.x+4,Ae.y-4),le.lineTo(Ae.x-4,Ae.y+4),le.stroke(),le.restore()}if(he){let Ae="",at=0,Ut=0;if(u==="painting_dali_psu_location"&&(Ue==null?void 0:Ue.type)==="psu"&&se){Ae=`Apply: "${se}"`;const He=ie.find(We=>We.id===Ue.id);if(He!=null&&He.psuLocation){const We=He.psuLocation;at=(We.x+We.width/2)*Me,Ut=(We.y+We.height/2)*Me}}else if((Ue==null?void 0:Ue.type)==="pin"&&Ue.id&&typeof Ue.index=="number"){const He=E.find(We=>We.id===Ue.id);if(He){const We=He.locations[Ue.index];We&&(at=(We.x+We.width/2)*Me,Ut=(We.y+We.height)*Me,Ae=He.name)}}else if((Ue==null?void 0:Ue.type)==="dali"){const He=be.find(st=>st.id===Ue.id),We=He?ie.find(st=>st.id===He.networkId):void 0;if(He&&We){const st=He.location;at=(st.x+st.width/2)*Me,Ut=(st.y+st.height)*Me;const cl=He.type==="ECG"?String(He.shortAddress).padStart(2,"0"):He.shortAddress;let Bl="";if(He.type==="ECD"&&He.ecdTypeId){const rl=xt.get(He.ecdTypeId);rl&&(Bl=` [${rl.reference}]`)}Ae=`${We.name}.${cl} (${He.type})${Bl}`}}else if((Ue==null?void 0:Ue.type)==="psu"){const He=ie.find(We=>We.id===Ue.id);if(He&&He.psuLocation){const We=He.psuLocation;if(We.pdfId===Be&&We.page===g){const st=We;at=(st.x+st.width/2)*Me,Ut=(st.y+st.height/2)*Me;let cl=`${He.name} PSU`;st.location&&(cl+=` - ${st.location}`),Ae=cl}}}if(Ae){le.font="bold 12px sans-serif",le.textAlign="left",le.textBaseline="bottom";const He=le.measureText(Ae),We=5,st=He.width+We*2,cl=14+We*2,Bl=at+10,rl=Ut-cl-10;le.fillStyle="rgba(0, 0, 0, 0.8)",le.beginPath(),le.roundRect(Bl,rl,st,cl,4),le.fill(),le.fillStyle="white",le.fillText(Ae,Bl+We,rl+cl-We)}}tl.current=requestAnimationFrame(qe)};return oe||Qe||Ce||Z.length>0||pe||P.length>0||he||kt||Le||xe?tl.current=requestAnimationFrame(qe):le.clearRect(0,0,ye.width,ye.height),()=>{tl.current&&cancelAnimationFrame(tl.current)}},[E,Ce,Me,g,u,Fe,y,Rt,p,Z,_,P,K,q,te,Xt,Ue,kt,bt,ie,be,ke,ue,xe,Se,Ge,Be,se]),H.useEffect(()=>{if(!Rt||!Fe||!Yt.current||!it.current||!(u.startsWith("placing_dali")||u.startsWith("painting_dali")||u==="placing_dots"))return;const ye=Yt.current.getContext("2d"),le=it.current;if(!ye)return;ye.fillStyle="white",ye.fillRect(0,0,Pt,Pt);const oe=Pt/$0,Qe=Fe.x-oe/2,pe=Fe.y-oe/2;ye.drawImage(le,Qe,pe,oe,oe,0,0,Pt,Pt),ye.strokeStyle="rgba(255, 0, 0, 0.7)",ye.lineWidth=1,ye.beginPath(),ye.moveTo(Pt/2,0),ye.lineTo(Pt/2,Pt),ye.moveTo(0,Pt/2),ye.lineTo(Pt,Pt/2),ye.stroke()},[Rt,Fe,u,Me]);const St=ye=>{const le=it.current;if(!le)return{x:0,y:0};const oe=le.getBoundingClientRect();return{x:ye.clientX-oe.left,y:ye.clientY-oe.top}},Tt=ye=>{var Qe;const le=St(ye),oe={x:le.x/Me,y:le.y/Me};if(u==="idle"&&te){if(kt&&Math.sqrt(Math.pow(kt.midPoint.x-le.x,2)+Math.pow(kt.midPoint.y-le.y,2))<=10){z(kt.measurementId,kt.segmentIndex),pl(null);return}if(Xt&&bt){Q(bt.measurementId,bt.segmentIndex,bt.pointIndex),cn(!0);return}if(bt){const pe=P.find(he=>he.id===te);if(ye.ctrlKey){const he=pe==null?void 0:pe.points[bt.segmentIndex][bt.pointIndex];he&&J(he)}else{const he=(Qe=pe==null?void 0:pe.manualEntries)==null?void 0:Qe.find(Ee=>Ee.segmentIndex===bt.segmentIndex&&Ee.pointIndex===bt.pointIndex);R(te,bt.segmentIndex,bt.pointIndex,he)}return}}if(u==="drawing_area"||u==="setting_scale"||u==="drawing_measurement"){if(u==="drawing_area"&&_.length>2){const he=_[0];if(Math.sqrt(Math.pow(he.x*Me-le.x,2)+Math.pow(he.y*Me-le.y,2))<10){T();return}}let pe=oe;if(u==="drawing_measurement"&&Xt&&_.length>0){const he=_[_.length-1],Ee=oe.x-he.x,xt=oe.y-he.y;Math.abs(Ee)>Math.abs(xt)?pe={x:oe.x,y:he.y}:pe={x:he.x,y:oe.y}}Y(pe);return}if(u==="selecting_dali_painter_source"){for(const pe of ie)if(pe.isVisible&&pe.psuLocation){const he=pe.psuLocation;if(he.pdfId===Be&&he.page===g&&oe.x>=he.x&&oe.x<=he.x+he.width&&oe.y>=he.y&&oe.y<=he.y+he.height){re(pe);return}}for(const pe of be){const he=ie.find(xt=>xt.id===pe.networkId);if(!(he!=null&&he.isVisible)||pe.page!==g)continue;const Ee=pe.location;if(oe.x>=Ee.x&&oe.x<=Ee.x+Ee.width&&oe.y>=Ee.y&&oe.y<=Ee.y+Ee.height){X(pe);return}}return}if(u==="painting_dali_psu_location"){for(const pe of ie)if(pe.isVisible&&pe.psuLocation){const he=pe.psuLocation;if(he.pdfId===Be&&he.page===g&&oe.x>=he.x&&oe.x<=he.x+he.width&&oe.y>=he.y&&oe.y<=he.y+he.height){de(pe.id);return}}return}if(u==="idle"){for(const pe of ie)if(pe.isVisible&&pe.psuLocation){const he=pe.psuLocation;if(he.pdfId===Be&&he.page===g&&oe.x>=he.x&&oe.x<=he.x+he.width&&oe.y>=he.y&&oe.y<=he.y+he.height){ye.ctrlKey?_t(pe.id):nl(pe.id);return}}for(const pe of be){const he=ie.find(xt=>xt.id===pe.networkId);if(!(he!=null&&he.isVisible)||pe.page!==g)continue;const Ee=pe.location;if(oe.x>=Ee.x&&oe.x<=Ee.x+Ee.width&&oe.y>=Ee.y&&oe.y<=Ee.y+Ee.height){ye.ctrlKey?L(pe.id):pe.type==="ECD"?V(pe.id):L(pe.id);return}}if(E.length>0)for(const pe of E)for(let he=0;he<pe.locations.length;he++){const Ee=pe.locations[he];if(oe.x>=Ee.x&&oe.x<=Ee.x+Ee.width&&oe.y>=Ee.y&&oe.y<=Ee.y+Ee.height){ye.ctrlKey?(ye.preventDefault(),f(pe.id,he)):S(pe.id,he);return}}}if(u==="idle"&&ye.ctrlKey&&p){ye.preventDefault(),h(oe);return}if(u==="placing_dots"){r(oe);return}if(u==="placing_dali_device"){fe(oe);return}if(u==="painting_dali_device"){I(oe);return}if(u==="placing_dali_psu"){Ie(oe);return}u.startsWith("selecting")&&(gt(le),Ye(null))},Pl=ye=>{const le=St(ye),oe={x:le.x/Me,y:le.y/Me};if(Ot){ee(oe),Dt(le);return}if(u.startsWith("placing")||u.startsWith("drawing")||u.startsWith("setting")||u.startsWith("painting")?Dt(le):Fe&&Dt(null),u.startsWith("selecting")&&Re){const Qe=Math.min(le.x,Re.x),pe=Math.min(le.y,Re.y),he=Math.abs(le.x-Re.x),Ee=Math.abs(le.y-Re.y);Ye({x:Qe,y:pe,width:he,height:Ee})}else if(u==="idle"||u==="painting_dali_psu_location"){let pe=null,he=null,Ee=null,xt=null;if(te){const tt=P.find(Le=>Le.id===te);if(tt){for(let Le=0;Le<tt.points.length;Le++){for(let qe=0;qe<tt.points[Le].length;qe++){const ft=tt.points[Le][qe];if(Math.sqrt(Math.pow(ft.x*Me-le.x,2)+Math.pow(ft.y*Me-le.y,2))<=(Xt?8:6)){he={measurementId:te,segmentIndex:Le,pointIndex:qe};break}}if(he)break}if(!he)for(let Le=0;Le<tt.points.length;Le++){const qe=tt.points[Le];let ft=!1;for(let Ae=0;Ae<qe.length-1;Ae++)if(W0(oe,qe[Ae],qe[Ae+1])*Me<5){ft=!0;break}if(ft){const Ae=qe.length,at=Math.floor((Ae-1)/2),Ut=qe[at],He=qe[at+1]||Ut;Ee={measurementId:te,segmentIndex:Le,midPoint:{x:(Ut.x+He.x)/2*Me,y:(Ut.y+He.y)/2*Me}};break}}}}if(yl(he),pl(Ee),!he&&!Ee){for(const tt of ie)if(tt.isVisible&&tt.psuLocation){const Le=tt.psuLocation;if(Le.pdfId===Be&&Le.page===g&&oe.x>=Le.x&&oe.x<=Le.x+Le.width&&oe.y>=Le.y&&oe.y<=Le.y+Le.height){pe={type:"psu",id:tt.id},u==="idle"&&(xt=tt.id);break}}if(!pe)for(const tt of be){const Le=ie.find(ft=>ft.id===tt.networkId);if(!(Le!=null&&Le.isVisible)||tt.page!==g)continue;const qe=tt.location;if(oe.x>=qe.x&&oe.x<=qe.x+qe.width&&oe.y>=qe.y&&oe.y<=qe.y+qe.height){pe={type:"dali",id:tt.id};break}}if(!pe)for(const tt of E){for(let Le=0;Le<tt.locations.length;Le++){const qe=tt.locations[Le];if(oe.x>=qe.x&&oe.x<=qe.x+qe.width&&oe.y>=qe.y&&oe.y<=qe.y+qe.height){pe={type:"pin",id:tt.id,index:Le};break}}if(pe)break}}xt!==w.current&&(b(xt),w.current=xt),JSON.stringify(pe)!==JSON.stringify(Ue)&&sl(pe)}else(Ue||bt||kt)&&(sl(null),yl(null),pl(null))},ea=async()=>{if(Ot&&(ce(),cn(!1)),!u.startsWith("selecting")||!Ce||!it.current){u.startsWith("selecting")&&(gt(null),Ye(null),Ce||j());return}if(Ce.width<5||Ce.height<5){gt(null),Ye(null);return}const ye=document.createElement("canvas");ye.width=Ce.width,ye.height=Ce.height;const le=ye.getContext("2d");if(!le||!it.current)return;le.drawImage(it.current,Ce.x,Ce.y,Ce.width,Ce.height,0,0,Ce.width,Ce.height);const oe=ye.toDataURL("image/png");v(oe),gt(null),Ye(null)},di=()=>{u.startsWith("selecting")&&Re&&(gt(null),Ye(null),j()),Ot&&(ce(),cn(!1)),sl(null),yl(null),pl(null),Fe&&Dt(null),w.current&&(b(null),w.current=null)},va=ye=>{ye.preventDefault();const le=qt.current;if(!le)return;const oe=le.getBoundingClientRect(),Qe=le.scrollLeft,pe=le.scrollTop,he=ye.clientX-oe.left,Ee=ye.clientY-oe.top,xt=Qe+he,tt=pe+Ee,Le=Me,qe=Math.max(.5,Math.min(3,Le-ye.deltaY*.001));if(qe===Le)return;const ft=xt*qe/Le-he,Ae=tt*qe/Le-Ee;wt.current={left:ft,top:Ae},je(qe)},ta=()=>{if(Ot)return"cursor-grabbing";if(u==="idle"){if(kt)return"cursor-pointer";if(bt)return Xt?"cursor-grab":"cursor-pointer";if((Ue==null?void 0:Ue.type)==="pin")return Vl?"cursor-alias":"cursor-pointer";if((Ue==null?void 0:Ue.type)==="dali"||(Ue==null?void 0:Ue.type)==="psu")return"cursor-pointer";if(Vl&&p)return"cursor-copy"}return u.startsWith("selecting")||u==="drawing_area"||u==="setting_scale"||u==="drawing_measurement"?"cursor-crosshair":u==="placing_dots"||u==="placing_dali_device"||u==="placing_dali_psu"?"cursor-none":u.startsWith("painting_dali")||u==="selecting_dali_painter_source"?"cursor-copy":"cursor-grab"};return s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-2",children:[s.jsxs("div",{ref:qt,className:`flex-grow w-full h-[calc(100%-40px)] overflow-auto bg-gray-300 shadow-inner relative ${ta()}`,onWheel:va,children:[sn&&s.jsxs("div",{className:"absolute inset-0 bg-white/70 flex items-center justify-center z-30",children:[s.jsx(Rm,{})," Rendering PDF..."]}),s.jsxs("div",{className:"relative",children:[s.jsx("canvas",{ref:it,className:"bg-white shadow-lg",onMouseDown:Tt,onMouseMove:Pl,onMouseUp:ea,onMouseLeave:di}),s.jsx("canvas",{ref:Kt,className:"absolute top-0 left-0 pointer-events-none z-10"}),(u.startsWith("placing_dali")||u.startsWith("painting_dali")||u==="placing_dots")&&Rt&&Fe&&s.jsx("div",{className:"absolute pointer-events-none rounded-full border-4 border-blue-500 overflow-hidden shadow-lg z-20 bg-white",style:{left:Fe.x-Pt/2,top:Fe.y-Pt/2,width:Pt,height:Pt},children:s.jsx("canvas",{ref:Yt,width:Pt,height:Pt})})]})]}),Cl>0&&s.jsxs("div",{className:"flex items-center space-x-4 bg-white px-4 py-1 rounded-full shadow-md",children:[s.jsx("button",{onClick:()=>A(ye=>Math.max(1,ye-1)),disabled:g<=1||u!=="idle",className:"px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Prev"}),s.jsxs("span",{children:["Page ",g," of ",Cl]}),s.jsx("button",{onClick:()=>A(ye=>Math.min(Cl,ye+1)),disabled:g>=Cl||u!=="idle",className:"px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})},sg=o=>o?o.trim():"",og=o=>o.replace(/[\\/?*[\]]/g,"").substring(0,31),cg=async(o,u)=>{var z;if(typeof window.ExcelJS>"u")throw new Error("Excel export library (ExcelJS) failed to load. Please check your internet connection and try again.");const{symbols:v,disciplines:r,pdfs:h,areas:S,name:f,measurements:E,daliNetworks:p,daliDevices:y,ecdTypes:g}=o,A=zm(v),j=(z=r.find(Q=>Q.name===ci&&!Q.parentId))==null?void 0:z.id,T=j?v.some(Q=>Q.disciplineId===j&&Q.count>0):!1,Z=v.some(Q=>Q.count>0);if(!(!u||Z||E&&E.length>0||y&&y.length>0)){alert("No data available to export based on the selected criteria (e.g., no symbols with counts > 0).");return}const Y=new window.ExcelJS.Workbook;if(Y.creator="Smart Count",Y.created=new Date,rg(Y,A,r,S,u,f),[...h].sort((Q,ee)=>(Q.level||Q.name).localeCompare(ee.level||ee.name)).forEach(Q=>{const ee=`${Q.name}${Q.level&&Q.level.trim()?` (Level ${Q.level.trim()})`:""}`;ug(Y,A,r,S,u,ee,Q.id)}),(E.length>0||T)&&dg(Y,o),y&&y.length>0&&fg(Y,o),p&&p.some(Q=>Q.psuLocation)&&mg(Y,o),Y.worksheets.length===0){alert("No data available to export based on the selected criteria.");return}const K=await Y.xlsx.writeBuffer(),q=new Blob([K],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),te=URL.createObjectURL(q),R=document.createElement("a");R.href=te;const J=f.replace(/[/\\?%*:|"<>]/g,"-");R.download=`${J}_Symbol_Schedule.xlsx`,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(te)};function zm(o){const u=new Map,v=r=>`${r.disciplineId||"uncategorized"}___${r.name}`;return o.forEach(r=>{const h=r.parentId?o.find(p=>p.id===r.parentId):r;if(!h)return;const S=v(h);u.has(S)||u.set(S,{refSymbol:h,counts:{total:0,byPdfAndArea:new Map},children:new Map});const f=u.get(S);let E;if(r.parentId){const p=r.variantText||r.name;f.children.has(p)||f.children.set(p,{refSymbol:r,counts:{total:0,byPdfAndArea:new Map}}),E=f.children.get(p)}else E=f;r.locations.forEach(p=>{E.counts.total++;const y=r.pdfId,g=p.areaId||"unassigned";E.counts.byPdfAndArea.has(y)||E.counts.byPdfAndArea.set(y,new Map);const A=E.counts.byPdfAndArea.get(y);A.set(g,(A.get(g)||0)+1)})}),u}const km={top:{style:"thin",color:{argb:"FFD3D3D3"}},left:{style:"thin",color:{argb:"FFD3D3D3"}},bottom:{style:"thin",color:{argb:"FFD3D3D3"}},right:{style:"thin",color:{argb:"FFD3D3D3"}}},el=(o,u,v=!1)=>{o.eachCell(r=>{r.font={...r.font,...u.font},r.alignment={...r.alignment,...u.alignment},v&&(r.border=km)})};function rg(o,u,v,r,h,S){const{rows:f,contentAdded:E}=Um(u,v,r,h,!0);if(!E)return;const p=o.addWorksheet("Summary");p.columns=[{key:"discipline",width:35},{key:"symbol",width:35},{key:"total",width:15}],Hm(p,f,S,["Discipline","Symbol","Total"])}function ug(o,u,v,r,h,S,f){const E=r.filter(_=>_.pdfId===f),{rows:p,contentAdded:y,areaColumns:g}=Um(u,v,E,h,!1,f);if(!y)return;const A=og(S),j=o.addWorksheet(A),T=[{key:"discipline",width:35},{key:"symbol",width:35}];g.forEach(_=>{T.push({key:_.id,width:Math.max(_.name.length,12)})}),T.push({key:"total",width:15}),j.columns=T;const Z=["Discipline","Symbol",...g.map(_=>_.name),"Total"];Hm(j,p,S,Z)}function dg(o,u){const{measurements:v,pdfs:r,symbols:h,disciplines:S,measurementGroups:f=[]}=u,E=o.addWorksheet("Measurements");let p=!1;E.columns=[{key:"document",width:30},{key:"measurement",width:40},{key:"drawn",width:15},{key:"manual",width:15},{key:"total",width:15}];const y=new Map(r.map(A=>[A.id,A]));if(v.length>0){p=!0;const A=E.addRow(["Linear Measurements"]);A.font={name:"Calibri",size:14,bold:!0,color:{argb:"FF008000"}},E.mergeCells(A.number,1,A.number,5),A.alignment={vertical:"middle",horizontal:"center"},A.height=22,E.addRow([]);const j=E.addRow(["Document","Measurement/Group","Drawn (m)","Manual (m)","Total (m)"]);el(j,{font:{bold:!0},alignment:{horizontal:"center"}},!0);const T=(_,Y=0)=>{f.filter(K=>K.parentId===_).sort((K,q)=>K.name.localeCompare(q.name)).forEach(K=>{const q=E.addRow([""," ".repeat(Y*2)+K.name]);q.getCell(2).font={bold:!0,italic:!0},v.filter(R=>R.groupId===K.id).sort((R,J)=>R.name.localeCompare(J.name)).forEach(R=>{const J=y.get(R.pdfId),z=yt.calculateDrawnLength(R,J==null?void 0:J.scaleInfo),Q=yt.calculateManualLength(R),ee=z+Q,ce=E.addRow([(J==null?void 0:J.name)||""," ".repeat((Y+1)*2)+R.name,z,Q,ee]);ce.getCell(3).numFmt="0.00",ce.getCell(4).numFmt="0.00",ce.getCell(5).numFmt="0.00",el(ce,{},!0)}),T(K.id,Y+1)})};T(null);const Z=v.filter(_=>!_.groupId).sort((_,Y)=>_.name.localeCompare(Y.name));if(Z.length>0){const _=E.addRow(["","Ungrouped"]);_.getCell(2).font={bold:!0,italic:!0},Z.forEach(Y=>{const P=y.get(Y.pdfId),K=yt.calculateDrawnLength(Y,P==null?void 0:P.scaleInfo),q=yt.calculateManualLength(Y),te=K+q,R=E.addRow([(P==null?void 0:P.name)||"","  "+Y.name,K,q,te]);R.getCell(3).numFmt="0.00",R.getCell(4).numFmt="0.00",R.getCell(5).numFmt="0.00",el(R,{},!0)})}}const g=S.find(A=>A.name===ci&&!A.parentId);if(g){const A=h.filter(j=>j.disciplineId===g.id&&j.count>0);if(A.length>0){if(p){E.addRow([]);const Z=E.addRow([]);Z.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD3D3D3"}},E.addRow([])}p=!0;const j=E.addRow(["Linear Components"]);j.font={name:"Calibri",size:14,bold:!0,color:{argb:"FF008000"}},E.mergeCells(j.number,1,j.number,5),j.alignment={vertical:"middle",horizontal:"center"},j.height=22,E.addRow([]);const T=E.addRow(["Discipline","Component Name","Total Count"]);el(T,{font:{bold:!0},alignment:{horizontal:"center"}},!0),A.forEach(Z=>{const _=E.addRow([g.name,Z.name,Z.count]);el(_,{},!0)})}}p||o.removeWorksheet("Measurements")}function fg(o,u){const{daliNetworks:v=[],daliDevices:r=[],ecdTypes:h=[]}=u,S=o.addWorksheet("DALI Schedule");S.columns=[{key:"parameter",width:25},{key:"value",width:25},{key:"col3",width:20},{key:"col4",width:15},{key:"col5",width:15},{key:"col6",width:20}];const f=S.addRow(["DALI Network Schedule"]);f.font={name:"Calibri",size:14,bold:!0,color:{argb:"FF008000"}},S.mergeCells(f.number,1,f.number,6),f.alignment={vertical:"middle",horizontal:"center"},f.height=22,S.addRow([]);const E=new Map(h.map(A=>[A.id,A])),p=2,y=6;[...v].sort((A,j)=>A.name.localeCompare(j.name,void 0,{numeric:!0})).forEach(A=>{const j=r.filter(z=>z.networkId===A.id);if(j.length===0)return;const T=j.filter(z=>z.type==="ECG"),Z=j.filter(z=>z.type==="ECD"),_=T.length*p,Y=Z.reduce((z,Q)=>{const ee=Q.ecdTypeId?E.get(Q.ecdTypeId):null;return z+(ee?ee.busCurrent:y)},0),P=_+Y,K=P>A.powerSupplyCapacity,q=S.addRow([`Network: ${A.name}`]);q.font={bold:!0,italic:!0,size:12},S.mergeCells(q.number,1,q.number,6);const te=S.addRow(["Parameter","Value"]);el(te,{font:{bold:!0}},!0);const R=(z,Q)=>{const ee=S.addRow([z,Q]);ee.getCell(1).font={bold:!0},el(ee,{},!0)};if(R("PSU Capacity",`${A.powerSupplyCapacity} mA`),R("Total Load",`${P.toFixed(1)} mA`),R("Status",K?"OVERLOADED":"OK"),R("Total ECG Count",`${T.length} / ${A.ecgLimit}`),R("Total ECD Count",`${Z.length} / ${A.ecdLimit}`),S.addRow([]),T.length>0){const z=S.addRow(["Device Type","Quantity","Total Current (mA)"]);el(z,{font:{bold:!0}},!0);const Q=S.addRow(["ECG (Control Gear)",T.length,_]);Q.getCell(1).font={bold:!0},el(Q,{},!0)}if(Z.length>0){T.length>0&&S.addRow([]);const z=S.addRow(["ECD Reference","Description","Product Code","Unit Current (mA)","Quantity","Total Current (mA)"]);el(z,{font:{bold:!0}},!0);const Q=new Map;Z.forEach(ce=>{const ge=ce.ecdTypeId||"unassigned";Q.has(ge)||Q.set(ge,{typeInfo:ce.ecdTypeId&&E.get(ce.ecdTypeId)||null,quantity:0}),Q.get(ge).quantity++}),Array.from(Q.entries()).sort((ce,ge)=>{var ie,be;return(((ie=ce[1].typeInfo)==null?void 0:ie.reference)||"zzz").localeCompare(((be=ge[1].typeInfo)==null?void 0:be.reference)||"zzz")}).forEach(([ce,{typeInfo:ge,quantity:ie}])=>{let be;if(ce==="unassigned"?be=["Unassigned","","",y,ie,ie*y]:ge&&(be=[ge.reference,ge.description,ge.productCode,ge.busCurrent,ie,ie*ge.busCurrent]),be){const ke=S.addRow(be);ke.getCell(1).font={bold:!0},el(ke,{},!0)}})}const J=S.addRow([]);J.height=15})}function mg(o,u){const{daliNetworks:v=[],pdfs:r,daliDevices:h=[]}=u,S=v.filter(T=>T.psuLocation);if(S.length===0)return;const f=o.addWorksheet("DALI PSU Summary");f.columns=[{key:"col1",width:40},{key:"col2",width:30},{key:"col3",width:20},{key:"col4",width:15},{key:"ecgCount",width:15},{key:"ecdCount",width:15}];const E=f.addRow(["DALI Power Supply Unit Summary"]);E.font={name:"Calibri",size:14,bold:!0,color:{argb:"FF008000"}},f.mergeCells(E.number,1,E.number,6),E.alignment={vertical:"middle",horizontal:"center"},E.height=22,f.addRow([]);const p=f.addRow(["PDF / Level","PSU Location","DALI Network","Page No.","ECG Count","ECD Count"]);el(p,{font:{bold:!0},alignment:{horizontal:"center"}},!0);const y=new Map(r.map(T=>[T.id,T])),g=T=>{const Z=h.filter(_=>_.networkId===T);return{ecg:Z.filter(_=>_.type==="ECG").length,ecd:Z.filter(_=>_.type==="ECD").length}},A=new Map;S.forEach(T=>{var _;const Z=T.psuLocation.pdfId;if(!A.has(Z)){const Y=y.get(Z);Y&&A.set(Z,{pdfInfo:Y,networks:[]})}(_=A.get(Z))==null||_.networks.push(T)}),Array.from(A.values()).sort((T,Z)=>{const _=T.pdfInfo.level||T.pdfInfo.name,Y=Z.pdfInfo.level||Z.pdfInfo.name;return _.localeCompare(Y)}).forEach(({pdfInfo:T,networks:Z})=>{let _=0,Y=0;Z.forEach(R=>{const J=g(R.id);_+=J.ecg,Y+=J.ecd});const P=T.level?` (${T.level})`:"",K=f.addRow([`${T.name}${P}`,"","","",_,Y]);K.font={bold:!0,size:12},K.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE0E0E0"}},f.mergeCells(K.number,1,K.number,4),el(K,{},!0),K.getCell(5).font={bold:!0,size:12},K.getCell(6).font={bold:!0,size:12};const q=new Map;Z.forEach(R=>{var z,Q;const J=((Q=(z=R.psuLocation)==null?void 0:z.location)==null?void 0:Q.trim())||"Unassigned Location";q.has(J)||q.set(J,[]),q.get(J).push(R)}),Array.from(q.keys()).sort((R,J)=>R.localeCompare(J)).forEach(R=>{const J=q.get(R);let z=0,Q=0;J.forEach(ce=>{const ge=g(ce.id);z+=ge.ecg,Q+=ge.ecd});const ee=f.addRow(["",R,"","",z,Q]);ee.getCell(2).font={bold:!0,italic:!0},f.mergeCells(ee.number,2,ee.number,4),ee.getCell(5).font={bold:!0},ee.getCell(6).font={bold:!0},el(ee,{},!0),J.sort((ce,ge)=>ce.name.localeCompare(ge.name,void 0,{numeric:!0})),J.forEach(ce=>{const ge=g(ce.id),ie=f.addRow(["","",ce.name,ce.psuLocation.page,ge.ecg||"",ge.ecd||""]);ie.getCell(3).alignment={indent:1},ie.getCell(4).alignment={horizontal:"center"},ie.getCell(5).alignment={horizontal:"center"},ie.getCell(6).alignment={horizontal:"center"},el(ie,{},!0)})}),f.addRow([])})}function Um(o,u,v,r,h,S){var Z;let f=!1;const E=[],p=(Z=u.find(_=>_.name===ci&&!_.parentId))==null?void 0:Z.id,g=[...v.filter(_=>_.name).sort((_,Y)=>_.name.localeCompare(Y.name)),{id:"unassigned",name:"Area Unassigned"}],A=(_,Y)=>{u.filter(K=>K.parentId===_&&K.id!==p).sort((K,q)=>K.name.localeCompare(q.name)).forEach(K=>{const q=Array.from(o.values()).filter(R=>R.refSymbol.disciplineId===K.id).sort((R,J)=>R.refSymbol.name.localeCompare(J.refSymbol.name)),te=Am(q,g,r,Y+1,h,S);te.length>0&&(f&&E.push({type:"symbol",data:[],level:0}),E.push({type:"discipline",data:[K.name],level:Y}),E.push(...te),f=!0),A(K.id,Y+1)})};A(null,0);const j=Array.from(o.values()).filter(_=>!_.refSymbol.disciplineId).sort((_,Y)=>_.refSymbol.name.localeCompare(Y.refSymbol.name)),T=Am(j,g,r,1,h,S);return T.length>0&&(f&&E.push({type:"symbol",data:[],level:0}),E.push({type:"discipline",data:["Uncategorized"],level:0}),E.push(...T),f=!0),{rows:E,contentAdded:f,areaColumns:g}}function Am(o,u,v,r,h,S){const f=[];return o.forEach(E=>{let p=0;const y=new Map;if([E,...Array.from(E.children.values())].forEach(j=>{if(h)p+=j.counts.total;else{const T=j.counts.byPdfAndArea.get(S);T&&T.forEach((Z,_)=>{y.set(_,(y.get(_)||0)+Z)})}}),h||(p=Array.from(y.values()).reduce((j,T)=>j+T,0)),v&&p===0)return;const A=["",sg(E.refSymbol.name)];h||u.forEach(j=>{const T=y.get(j.id)||0;A.push(T)}),A.push(p),f.push({type:"symbol",data:A,level:r})}),f}function Hm(o,u,v,r){const h=o.addRow([v]);h.font={name:"Calibri",size:14,bold:!0,color:{argb:"FF008000"}},o.mergeCells(h.number,1,h.number,r.length),h.alignment={vertical:"middle",horizontal:"center"},h.height=22,o.addRow([]);const S=o.addRow(r);el(S,{font:{bold:!0},alignment:{horizontal:"center"}},!0),u.forEach(f=>{if(f.data.length===0){o.addRow([]);return}const E=o.addRow(f.data);if(f.type==="discipline"){const p=E.getCell(1);p.value=" ".repeat(f.level*2)+p.value,p.font={bold:!0,italic:!0}}else if(f.type==="symbol"){const p=E.getCell(1);p.value=" ".repeat(f.level*2)+p.value,E.eachCell((y,g)=>{y.border=km,g>2&&(y.alignment={horizontal:"center"},y.value===0&&(y.value=null))}),E.getCell(E.cellCount).font={bold:!0}}})}const hg="SmartCountDB",gg=1,tn="pdfFiles";let Lo=null;const zo=()=>new Promise((o,u)=>{if(Lo)return o(Lo);const v=indexedDB.open(hg,gg);v.onerror=()=>{console.error("IndexedDB error:",v.error),u("IndexedDB error")},v.onsuccess=()=>{Lo=v.result,o(Lo)},v.onupgradeneeded=()=>{const r=v.result;r.objectStoreNames.contains(tn)||r.createObjectStore(tn,{keyPath:"id"})}}),an={async savePdf(o,u){const h=(await zo()).transaction(tn,"readwrite").objectStore(tn);return new Promise((S,f)=>{const E=h.put({id:o,data:u});E.onsuccess=()=>S(),E.onerror=()=>f(E.error)})},async getPdf(o){const r=(await zo()).transaction(tn,"readonly").objectStore(tn);return new Promise((h,S)=>{const f=r.get(o);f.onsuccess=()=>{var E;h((E=f.result)==null?void 0:E.data)},f.onerror=()=>S(f.error)})},async getPdfsByIds(o){if(!o.length)return[];const r=(await zo()).transaction(tn,"readonly").objectStore(tn),h=[],S=o.map(f=>new Promise((E,p)=>{const y=r.get(f);y.onsuccess=()=>{y.result&&h.push(y.result),E()},y.onerror=()=>{console.error(`Failed to get PDF ${f} from IndexedDB:`,y.error),p(y.error)}}));return await Promise.all(S),h},async deletePdfs(o){if(!o.length)return;const r=(await zo()).transaction(tn,"readwrite").objectStore(tn),h=o.map(S=>new Promise(f=>{const E=r.delete(S);E.onsuccess=()=>f(),E.onerror=()=>{console.error(`Failed to delete PDF ${S} from IndexedDB:`,E.error),f()}}));await Promise.all(h)}},Bm="smart-count-db",Fn=()=>{try{const o=localStorage.getItem(Bm);return o?JSON.parse(o):{}}catch(o){return console.error("Failed to load database from localStorage",o),{}}},ui=o=>{try{const u=JSON.parse(JSON.stringify(o));Object.values(u).forEach(v=>{v.projects.forEach(r=>{r.pdfs.forEach(h=>{delete h.data})})}),localStorage.setItem(Bm,JSON.stringify(u))}catch(u){console.error("Failed to save database to localStorage",u),u instanceof DOMException&&u.name==="QuotaExceededError"&&alert("Error: Storage quota exceeded. Please try deleting some old projects.")}},Gm=o=>new Promise((u,v)=>{const r=new FileReader;r.readAsDataURL(o),r.onload=()=>u(r.result),r.onerror=h=>v(h)}),ru=o=>{var v;return((v=Fn()[o])==null?void 0:v.projects)||[]},Ym=(o,u)=>{const v=Fn();v[o]||(v[o]={projects:[]});const r=v[o].projects,h=r.findIndex(S=>S.id===u.id);h>-1?r[h]=u:r.push(u),v[o].projects=r,ui(v)},pg=async(o,u,v,r)=>{const h=v.map(async({file:P,level:K},q)=>{const te=await Gm(P),R={id:`${o}_pdf_${Date.now()}_${q}`,name:P.name,level:K||"",data:te};return await an.savePdf(R.id,te),R}),S=await Promise.all(h);let f=[],E=[{id:"disc_1",name:"Electrical",parentId:null},{id:"disc_2",name:"Plumbing",parentId:null},{id:"disc_3",name:"HVAC",parentId:null}],p=[],y=[],g=[],A=[],j=[],T=[],Z=[];if(r){const K=ru(o).find(q=>q.id===r);if(K){E=JSON.parse(JSON.stringify(K.disciplines)),p=JSON.parse(JSON.stringify(K.areas)),g=JSON.parse(JSON.stringify(K.measurementGroups||[])),A=JSON.parse(JSON.stringify(K.daliNetworks||[])),T=JSON.parse(JSON.stringify(K.ecdTypes||[])),Z=JSON.parse(JSON.stringify(K.daliNetworkTemplates||[])),y=[],j=[];const q=JSON.parse(JSON.stringify(K.symbols)),te=[];S.forEach(R=>{const J=new Map;q.filter(z=>!z.parentId).forEach(z=>{const Q=`sym_${R.id}_${Date.now()}_${Math.random()}`;J.set(z.id,Q),te.push({...z,id:Q,pdfId:R.id,count:0,locations:[],status:"done",parentId:null})}),q.filter(z=>z.parentId).forEach(z=>{if(z.parentId){const Q=J.get(z.parentId);if(Q){const ee=`sym_${R.id}_${Date.now()}_${Math.random()}`;te.push({...z,id:ee,parentId:Q,pdfId:R.id,count:0,locations:[],status:"done"})}}})}),f=te}}const _={id:`proj_${Date.now()}`,name:u,pdfs:S,symbols:f,disciplines:E,areas:p,measurements:y,measurementGroups:g,daliNetworks:A,daliDevices:j,ecdTypes:T,daliNetworkTemplates:Z,createdAt:Date.now()},Y=Fn();return Y[o]||(Y[o]={projects:[]}),Y[o].projects.push(_),ui(Y),_},yg=async(o,u,v)=>{const r=v.map(async({file:f,level:E},p)=>{const y=await Gm(f),g={id:`${o}_pdf_${Date.now()}_${p}_add`,name:f.name,level:E||"",data:y};return await an.savePdf(g.id,y),g}),h=await Promise.all(r),S={...u,pdfs:[...u.pdfs,...h]};return Ym(o,S),S},bg=async(o,u)=>{const v=Fn();if(!v[o])return;const r=v[o].projects.find(h=>h.id===u);if(r){const h=r.pdfs.map(S=>S.id);await an.deletePdfs(h)}v[o].projects=v[o].projects.filter(h=>h.id!==u),ui(v)},xg=async(o,u,v)=>{const r=Fn();if(!r[o])return null;const h=r[o].projects.findIndex(T=>T.id===u);if(h===-1)return null;const S=r[o].projects[h];if(!S.pdfs.find(T=>T.id===v))return S;const E=S.pdfs.filter(T=>T.id!==v),p=S.symbols.filter(T=>T.pdfId!==v),y=S.areas.filter(T=>T.pdfId!==v),g=S.measurements.filter(T=>T.pdfId!==v),A=(S.daliDevices||[]).filter(T=>T.pdfId!==v);await an.deletePdfs([v]);const j={...S,pdfs:E,symbols:p,areas:y,measurements:g,daliDevices:A};return r[o].projects[h]=j,ui(r),j},vg=async o=>{const v=Fn()[o];if(!v||!v.projects||v.projects.length===0)throw new Error("No data to back up for this user.");const r=v.projects.flatMap(A=>A.pdfs.map(j=>j.id)),h=await an.getPdfsByIds(r),S={projects:v.projects,pdfStore:h},f=JSON.stringify(S,null,2),E=new Blob([f],{type:"application/json"}),p=URL.createObjectURL(E),y=document.createElement("a");y.href=p;const g=new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");y.download=`smart-count-full-backup-${g}.json`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(p)},wg=async(o,u)=>{const r=ru(o).find(T=>T.id===u);if(!r)throw new Error("Project not found.");const h=r.pdfs.map(T=>T.id),S=await an.getPdfsByIds(h),E=JSON.stringify({type:"singleProjectBackup",version:"1.0",project:r,pdfStore:S},null,2),p=new Blob([E],{type:"application/json"}),y=URL.createObjectURL(p),g=document.createElement("a");g.href=y;const A=r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),j=new Date().toISOString().slice(0,10);g.download=`smart-count-backup_${A}_${j}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(y)},Sg=async(o,u)=>new Promise((v,r)=>{const h=new FileReader;h.onload=async S=>{var f;try{const E=(f=S.target)==null?void 0:f.result;if(typeof E!="string")throw new Error("Failed to read file content.");const p=JSON.parse(E);if(p.type==="singleProjectBackup")throw new Error('This appears to be a single project backup. Please use the "Restore Single Project" option.');if(!p.projects||!p.pdfStore||!Array.isArray(p.projects))throw new Error('Invalid backup file format for "All Projects".');const y=Fn(),g=y[o];if(g&&g.projects){const j=g.projects.flatMap(T=>T.pdfs.map(Z=>Z.id));await an.deletePdfs(j)}y[o]={projects:p.projects};const A=p.pdfStore.map(j=>an.savePdf(j.id,j.data));await Promise.all(A),ui(y),v({success:!0,message:"Backup restored successfully. The application will now reload."})}catch(E){console.error("Backup restore failed:",E),r({success:!1,message:E.message||"Failed to parse or restore backup file."})}},h.onerror=()=>{r({success:!1,message:"Error reading file."})},h.readAsText(u)}),jg=async(o,u)=>new Promise((v,r)=>{const h=new FileReader;h.onload=async S=>{var f;try{const E=(f=S.target)==null?void 0:f.result;if(typeof E!="string")throw new Error("Failed to read file content.");const p=JSON.parse(E);if(p.type!=="singleProjectBackup"||!p.project||!p.pdfStore)throw new Error("This does not appear to be a valid single project backup file.");const y=Fn();y[o]||(y[o]={projects:[]});const g=y[o].projects,A=p.project;if(g.some(T=>T.id===A.id))throw new Error(`A project with the same internal ID (${A.id}) already exists. This is highly unusual. Please contact support or backup and restore all projects.`);if(g.some(T=>T.name.toLowerCase()===A.name.toLowerCase()))throw new Error(`A project named "${A.name}" already exists. Please rename the existing project before restoring this one.`);const j=p.pdfStore.map(T=>an.savePdf(T.id,T.data));await Promise.all(j),g.push(A),ui(y),v({success:!0,message:`Project "${A.name}" restored successfully. Please reload the application to see it in your list.`})}catch(E){console.error("Single project restore failed:",E),r({success:!1,message:E.message||"Failed to parse or restore the project backup file."})}},h.onerror=()=>{r({success:!1,message:"Error reading file."})},h.readAsText(u)}),El={getProjects:ru,createProject:pg,saveProject:Ym,deleteProject:bg,addPdfsToProject:yg,deletePdfFromProject:xg,getPdfData:an.getPdf,exportAllBackup:vg,importAllBackup:Sg,exportSingleProjectBackup:wg,importSingleProjectBackup:jg},Ng=({projects:o,onCreate:u,onLoad:v,onDelete:r,onRestoreSingleProject:h})=>{const[S,f]=H.useState(""),[E,p]=H.useState([]),[y,g]=H.useState([]),[A,j]=H.useState(null),[T,Z]=H.useState(""),_=H.useRef(null),Y=R=>{if(R.preventDefault(),!S.trim()){Z("Please enter a project name.");return}if(E.length===0){Z("Please select at least one PDF file.");return}const J=E.map((z,Q)=>({file:z,level:y[Q]||""}));u(S.trim(),J,A),f(""),p([]),g([]),j(null),Z("")},P=R=>{const J=R.target.files?Array.from(R.target.files):[];p(J),g(Array(J.length).fill(""))},K=()=>{var R;(R=_.current)==null||R.click()},q=R=>{var z;const J=(z=R.target.files)==null?void 0:z[0];J&&(h(J),_.current&&(_.current.value=""))},te=[...o].sort((R,J)=>J.createdAt-R.createdAt);return s.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center p-8",children:s.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-4xl font-bold text-center text-gray-800 mb-2",children:cu}),s.jsx("p",{className:"text-lg text-center text-gray-500 mb-12",children:Lm}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-6",children:"Create New Project"}),T&&s.jsx("p",{className:"text-red-500 mb-4",children:T}),s.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"project-name",className:"block text-sm font-medium text-gray-600 mb-2",children:"Project Name"}),s.jsx("input",{id:"project-name",type:"text",value:S,onChange:R=>f(R.target.value),placeholder:"e.g., Hospital Wing A Floor Plan",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-gray-600 mb-2",children:"PDF Floor Plan(s)"}),s.jsxs("label",{htmlFor:"file-upload",className:"w-full cursor-pointer bg-gray-50 text-gray-500 rounded-lg flex items-center justify-center px-4 py-3 border-2 border-dashed border-gray-300 hover:border-blue-500 hover:bg-blue-50 transition-all",children:[s.jsx(C0,{}),s.jsx("span",{className:"ml-3 font-semibold truncate",children:E.length>0?`${E.length} file(s) selected`:"Select PDF file(s)"})]}),s.jsx("input",{id:"file-upload",type:"file",accept:".pdf",multiple:!0,className:"hidden",onChange:P}),E.length>0&&s.jsxs("div",{className:"mt-3 text-sm text-gray-500 space-y-2 max-h-24 overflow-y-auto p-2 border rounded-lg bg-gray-50",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Assign levels to your documents:"}),E.map((R,J)=>s.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[s.jsx("p",{className:"truncate flex-grow",title:R.name,children:R.name}),s.jsx("input",{type:"text",placeholder:"Level (e.g., L01)",value:y[J]||"",onChange:z=>{const Q=[...y];Q[J]=z.target.value,g(Q)},className:"p-1 border border-gray-300 rounded-md text-xs w-28"})]},R.name))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"template-select",className:"block text-sm font-medium text-gray-600 mb-2",children:"Use Template (Optional)"}),s.jsxs("select",{id:"template-select",value:A||"",onChange:R=>j(R.target.value||null),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 bg-white",children:[s.jsx("option",{value:"",children:"No Template"}),te.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id))]})]}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold text-lg hover:bg-blue-700 transition-all shadow-md",children:"Start Project"})]})]}),s.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-700 mb-6",children:"Existing Projects"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:"file",ref:_,className:"hidden",accept:".json",onChange:q}),s.jsx("button",{onClick:K,className:"w-full py-2.5 bg-green-600 text-white rounded-lg font-semibold text-md hover:bg-green-700 transition-all shadow-md",children:"Restore Single Project"})]}),te.length===0?s.jsxs("div",{className:"text-center text-gray-500 py-10",children:[s.jsx("p",{children:"You have no saved projects."}),s.jsx("p",{children:"Create a new one to get started!"})]}):s.jsx("div",{className:"space-y-3 max-h-[350px] overflow-y-auto pr-2 -mr-4",children:te.map(R=>s.jsxs("div",{className:"group flex items-center justify-between p-4 rounded-lg bg-gray-50 hover:bg-blue-50 transition-colors",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-gray-800",children:R.name}),s.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:R.pdfs.map(J=>J.name).join(", ")})]}),s.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>v(R.id),className:"px-4 py-2 text-sm font-semibold bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Load"}),s.jsx("button",{onClick:J=>{J.stopPropagation(),window.confirm(`Are you sure you want to delete "${R.name}"?`)&&r(R.id)},className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-100 rounded-full","aria-label":"Delete project",children:s.jsx(nn,{})})]})]},R.id))})]})]})]})})},Dg=({isOpen:o,onClose:u,onCopy:v,symbolToCopy:r,pdfsInProject:h})=>{const[S,f]=H.useState([]);if(H.useEffect(()=>{o&&f([])},[o]),!o||!r)return null;const E=g=>{f(A=>A.includes(g)?A.filter(j=>j!==g):[...A,g])},p=()=>{S.length>0&&v(S)},y=h.filter(g=>g.id!==r.pdfId);return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all",onClick:g=>g.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Copy Symbol"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Copy ",s.jsx("span",{className:"font-semibold",children:r.name})," to other documents in this project."]}),s.jsx("div",{className:"mb-6 max-h-60 overflow-y-auto border rounded-lg p-3 space-y-2",children:y.length>0?y.map(g=>s.jsxs("label",{className:"flex items-center space-x-3 p-2 rounded-md hover:bg-gray-50 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:S.includes(g.id),onChange:()=>E(g.id),className:"h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-700 font-medium truncate",children:g.name})]},g.id)):s.jsx("p",{className:"text-center text-gray-500 p-4",children:"No other documents available to copy to."})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsxs("button",{onClick:p,disabled:S.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:["Copy to ",S.length>0?S.length:""," Document",S.length!==1?"s":""]})]})]})})},Eg=({isOpen:o,onClose:u,onAdd:v,files:r})=>{const[h,S]=H.useState([]);if(H.useEffect(()=>{r&&S(Array(r.length).fill(""))},[r]),!o)return null;const f=(p,y)=>{const g=[...h];g[p]=y,S(g)},E=()=>{const p=r.map((y,g)=>({file:y,level:h[g]||""}));v(p)};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg transform transition-all",onClick:p=>p.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Assign Levels to New Documents"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide a level for each of the documents you are adding. This can be a floor number (e.g., L01, G, 2) or any other identifier."}),s.jsx("div",{className:"mb-6 max-h-80 overflow-y-auto border rounded-lg p-3 space-y-3",children:r.map((p,y)=>s.jsxs("div",{className:"flex items-center space-x-4 p-2 rounded-md bg-gray-50",children:[s.jsx("span",{className:"flex-1 text-gray-700 font-medium truncate",title:p.name,children:p.name}),s.jsx("input",{type:"text",placeholder:"e.g., Level 1",value:h[y]||"",onChange:g=>f(y,g.target.value),className:"w-48 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]},p.name))}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{onClick:E,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold",children:"Add Documents"})]})]})})},qm="smart-count-users",nu="smart-count-session",Mm=()=>{try{const o=localStorage.getItem(qm);return o?JSON.parse(o):{}}catch(o){return console.error("Failed to load users from localStorage",o),{}}},Cg=o=>{try{localStorage.setItem(qm,JSON.stringify(o))}catch(u){console.error("Failed to save users to localStorage",u)}},hs={async register(o,u){const v=Mm();return!o||!u?{success:!1,message:"Email and password cannot be empty."}:v[o]?{success:!1,message:"User with this email already exists."}:(v[o]={password:u},Cg(v),{success:!0,message:"Registration successful. Please log in."})},async login(o,u){const r=Mm()[o];return r?r.password!==u?{success:!1,message:"Incorrect password."}:(this.saveCurrentUser(o),{success:!0,message:"Login successful."}):{success:!1,message:"User not found."}},logout(){try{sessionStorage.removeItem(nu)}catch(o){console.error("Failed to clear session storage",o)}},getCurrentUser(){try{return sessionStorage.getItem(nu)}catch(o){return console.error("Failed to get user from session storage",o),null}},saveCurrentUser(o){try{sessionStorage.setItem(nu,o)}catch(u){console.error("Failed to save user to session storage",u)}}},Tg=({onLoginSuccess:o})=>{const[u,v]=H.useState("login"),[r,h]=H.useState(""),[S,f]=H.useState(""),[E,p]=H.useState(""),[y,g]=H.useState(""),[A,j]=H.useState(""),[T,Z]=H.useState(!1),_=async P=>{if(P.preventDefault(),g(""),j(""),Z(!0),u==="register"){if(S!==E){g("Passwords do not match."),Z(!1);return}const K=await hs.register(r,S);K.success?(j(K.message),v("login")):g(K.message)}else{const K=await hs.login(r,S);K.success?o(r):g(K.message)}Z(!1)},Y=()=>{v(P=>P==="login"?"register":"login"),g(""),j(""),h(""),f(""),p("")};return s.jsx("div",{className:"w-full h-screen bg-gray-100 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md mx-auto bg-white p-8 rounded-2xl shadow-lg",children:[s.jsx("h1",{className:"text-3xl font-bold text-center text-gray-800 mb-2",children:cu}),s.jsx("p",{className:"text-lg text-center text-gray-500 mb-8",children:Lm}),y&&s.jsx("p",{className:"bg-red-100 text-red-700 p-3 rounded-lg mb-4 text-sm text-center",children:y}),A&&s.jsx("p",{className:"bg-green-100 text-green-700 p-3 rounded-lg mb-4 text-sm text-center",children:A}),s.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-600 mb-2",children:"Email Address"}),s.jsx("input",{id:"email",type:"email",value:r,onChange:P=>h(P.target.value),required:!0,placeholder:"you@example.com",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-600 mb-2",children:"Password"}),s.jsx("input",{id:"password",type:"password",value:S,onChange:P=>f(P.target.value),required:!0,placeholder:"••••••••",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),u==="register"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-600 mb-2",children:"Confirm Password"}),s.jsx("input",{id:"confirm-password",type:"password",value:E,onChange:P=>p(P.target.value),required:!0,placeholder:"••••••••",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsx("button",{type:"submit",disabled:T,className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold text-lg hover:bg-blue-700 transition-all shadow-md disabled:bg-gray-400",children:T?"Processing...":u==="login"?"Log In":"Register"})]}),s.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[u==="login"?"Don't have an account?":"Already have an account?",s.jsx("button",{onClick:Y,className:"font-semibold text-blue-600 hover:underline ml-1",children:u==="login"?"Register here":"Log in here"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-8 text-center",children:"Note: For demonstration purposes, user data is stored locally in your browser and is not secured. Do not use real passwords."})]})})},Ag=({isOpen:o,onClose:u,onConfirm:v,isExporting:r})=>o?s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all",onClick:h=>h.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Export Options"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Choose which symbols to include in your Excel export."}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:()=>v(!1),disabled:r,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Exporting...":"Export All Symbols"}),s.jsx("button",{onClick:()=>v(!0),disabled:r,className:"w-full px-4 py-3 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Exporting...":"Export Only Symbols with Count > 0"})]}),s.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:s.jsx("button",{onClick:u,disabled:r,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold disabled:opacity-50",children:"Cancel"})})]})}):null,Mg=({isOpen:o,onClose:u,onConfirm:v,isExporting:r})=>o?s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md transform transition-all",onClick:h=>h.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"PDF Export Options"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Choose whether to include symbol labels on the exported PDF."}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:()=>v(!0),disabled:r,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Exporting...":"Export with Labels"}),s.jsx("button",{onClick:()=>v(!1),disabled:r,className:"w-full px-4 py-3 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:r?"Exporting...":"Export without Labels"})]}),s.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:s.jsx("button",{onClick:u,disabled:r,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold disabled:opacity-50",children:"Cancel"})})]})}):null,_g=({isOpen:o,onClose:u,onConfirm:v,currentSymbol:r,availableSymbols:h,disciplines:S})=>{const[f,E]=H.useState(null);if(H.useEffect(()=>{o&&E(null)},[o]),!o||!r)return null;const p=()=>{f&&v(f)},y=j=>s.jsxs("div",{onClick:()=>E(j.id),className:`flex items-center space-x-3 p-2 rounded-md cursor-pointer transition-colors ${f===j.id?"bg-blue-100 ring-2 ring-blue-500":"hover:bg-gray-200"}`,children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-md flex items-center justify-center p-1 border flex-shrink-0",children:s.jsx("img",{src:j.image,alt:j.name,className:"max-w-full max-h-full object-contain"})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("p",{className:"font-semibold text-gray-800 truncate",children:j.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Count: ",j.count]})]}),s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center flex-shrink-0",children:f===j.id&&s.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"})})]},j.id),g=(j,T=0)=>S.filter(_=>_.parentId===j).sort((_,Y)=>_.name.localeCompare(Y.name)).map(_=>{const P=(te=>{const R=new Set,J=[te];for(;J.length>0;){const z=J.shift();R.has(z)||(R.add(z),S.filter(Q=>Q.parentId===z).forEach(Q=>J.push(Q.id)))}return R})(_.id);if(h.filter(te=>te.disciplineId&&P.has(te.disciplineId)).length===0)return null;const q=h.filter(te=>te.disciplineId===_.id).sort((te,R)=>te.name.localeCompare(R.name));return s.jsxs("div",{style:{paddingLeft:`${T*1}rem`},children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 mt-3 mb-1 px-2",children:_.name}),s.jsx("div",{className:"space-y-1",children:q.map(y)}),g(_.id,T+1)]},_.id)}),A=h.filter(j=>!j.disciplineId).sort((j,T)=>j.name.localeCompare(T.name));return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg transform transition-all",onClick:j=>j.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Reassign Symbol Pin"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Move one pin from ",s.jsx("span",{className:"font-semibold",children:r.name})," to a different symbol within the same discipline."]}),s.jsx("div",{className:"mb-6 max-h-80 overflow-y-auto border rounded-lg p-2 space-y-1 bg-gray-50",children:h.length>0?s.jsxs(s.Fragment,{children:[g(null),A.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 mt-3 mb-1 px-2",children:"Uncategorized"}),s.jsx("div",{className:"space-y-1",children:A.map(y)})]})]}):s.jsx("p",{className:"text-center text-gray-500 p-4",children:"No other symbols available in this discipline branch to reassign to."})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{onClick:p,disabled:!f,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Reassign Pin"})]})]})})},Rg=({isOpen:o,onClose:u,onConfirm:v})=>{const[r,h]=H.useState("");if(H.useEffect(()=>{o&&h("")},[o]),!o)return null;const S=f=>{f.preventDefault(),r.trim()&&v(r.trim())};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm transform transition-all",onClick:f=>f.stopPropagation(),children:s.jsxs("form",{onSubmit:S,children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Name Your Area"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Please provide a unique name for this area (e.g., "Apartment 101", "Zone A").'}),s.jsx("input",{type:"text",value:r,onChange:f=>h(f.target.value),placeholder:"Area Name",autoFocus:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 mb-6"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!r.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Save Area"})]})]})})})},Xm=(o,u,v,r=0)=>{const S=Array.from(u.values()).filter(p=>p.refSymbol.disciplineId===o.id).sort((p,y)=>p.refSymbol.name.localeCompare(y.refSymbol.name)).map(p=>{const g=[p,...Array.from(p.children.values())].reduce((A,j)=>A+j.counts.total,0);return g===0?null:s.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[s.jsx("td",{className:"py-2 px-4 text-gray-800",style:{paddingLeft:`${2.5+r*1.5}rem`},children:p.refSymbol.name}),s.jsx("td",{className:"py-2 px-4 text-center font-semibold text-gray-800",children:g})]},p.refSymbol.id)}).filter(Boolean),E=v.filter(p=>p.parentId===o.id).sort((p,y)=>p.name.localeCompare(y.name)).flatMap(p=>Xm(p,u,v,r+1));return S.length===0&&E.length===0?[]:[s.jsx("tr",{className:"bg-gray-100 sticky top-0",children:s.jsx("td",{colSpan:2,className:"py-2 px-4 font-bold text-gray-700",style:{paddingLeft:`${1+r*1.5}rem`},children:o.name})},o.id),...S,...E]},Og=({isOpen:o,onClose:u,project:v})=>{const{symbolRows:r,grandTotal:h,measurementRows:S,daliRows:f,hasContent:E}=H.useMemo(()=>{if(!v)return{symbolRows:[],grandTotal:0,measurementRows:[],daliRows:[],hasContent:!1};const p=zm(v.symbols);let y=0;const A=v.disciplines.filter(z=>!z.parentId).sort((z,Q)=>z.name.localeCompare(Q.name)).flatMap(z=>Xm(z,p,v.disciplines)),j=Array.from(p.values()).filter(z=>!z.refSymbol.disciplineId).sort((z,Q)=>z.refSymbol.name.localeCompare(Q.refSymbol.name));let T=[];j.some(z=>z.counts.total+Array.from(z.children.values()).reduce((Q,ee)=>Q+ee.counts.total,0)>0)&&(T.push(s.jsx("tr",{className:"bg-gray-100 sticky top-0",children:s.jsx("td",{colSpan:2,className:"py-2 px-4 font-bold text-gray-700",children:"Uncategorized"})},"uncategorized-header")),j.forEach(z=>{const ee=[z,...Array.from(z.children.values())].reduce((ce,ge)=>ce+ge.counts.total,0);ee!==0&&T.push(s.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[s.jsx("td",{className:"py-2 px-4 text-gray-800 pl-10",children:z.refSymbol.name}),s.jsx("td",{className:"py-2 px-4 text-center font-semibold text-gray-800",children:ee})]},z.refSymbol.id))})),Array.from(p.values()).forEach(z=>{const Q=[z,...Array.from(z.children.values())];y+=Q.reduce((ee,ce)=>ee+ce.counts.total,0)});const Z=[...A,...T],_=new Map(v.pdfs.map(z=>[z.id,z])),Y=v.measurementGroups||[],P=(z,Q=0)=>Y.filter(ce=>ce.parentId===z).sort((ce,ge)=>ce.name.localeCompare(ge.name)).flatMap(ce=>{const ge=v.measurements.filter(fe=>fe.groupId===ce.id).sort((fe,L)=>fe.name.localeCompare(L.name)),ie=P(ce.id,Q+1);if(ge.length===0&&ie.length===0)return[];const be=s.jsx("tr",{className:"bg-gray-100 sticky top-0",children:s.jsx("td",{colSpan:3,className:"py-2 px-4 font-bold text-gray-700",style:{paddingLeft:`${1+Q*1.5}rem`},children:ce.name})},ce.id),ke=ge.map(fe=>{const L=_.get(fe.pdfId),V=yt.calculateTotalLength(fe,L==null?void 0:L.scaleInfo);return s.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[s.jsx("td",{className:"py-2 px-4 text-gray-800",style:{paddingLeft:`${2.5+Q*1.5}rem`},children:fe.name}),s.jsx("td",{className:"py-2 px-4 text-gray-800",children:(L==null?void 0:L.name)||"Unknown"}),s.jsx("td",{className:"py-2 px-4 text-center font-semibold",style:{color:fe.color},children:yt.formatLength(V)})]},fe.id)});return[be,...ke,...ie]}),K=P(null),q=v.measurements.filter(z=>!z.groupId).sort((z,Q)=>z.name.localeCompare(Q.name));let te=[...K];q.length>0&&(te.push(s.jsx("tr",{className:"bg-gray-100 sticky top-0",children:s.jsx("td",{colSpan:3,className:"py-2 px-4 font-bold text-gray-700",children:"Ungrouped"})},"ungrouped-measure-header")),q.forEach(z=>{const Q=_.get(z.pdfId),ee=yt.calculateTotalLength(z,Q==null?void 0:Q.scaleInfo);te.push(s.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[s.jsx("td",{className:"py-2 px-4 text-gray-800 pl-10",children:z.name}),s.jsx("td",{className:"py-2 px-4 text-gray-800",children:(Q==null?void 0:Q.name)||"Unknown"}),s.jsx("td",{className:"py-2 px-4 text-center font-semibold",style:{color:z.color},children:yt.formatLength(ee)})]},z.id))}));const R=(v.daliNetworks||[]).sort((z,Q)=>z.name.localeCompare(Q.name)).map(z=>{const Q=(v.daliDevices||[]).filter(ce=>ce.networkId===z.id&&ce.type==="ECG").length,ee=(v.daliDevices||[]).filter(ce=>ce.networkId===z.id&&ce.type==="ECD").length;return Q===0&&ee===0?null:s.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[s.jsx("td",{className:"py-2 px-4 font-semibold text-gray-800",children:z.name}),s.jsx("td",{className:"py-2 px-4 text-center text-gray-800",children:Q}),s.jsx("td",{className:"py-2 px-4 text-center text-gray-800",children:ee})]},z.id)}).filter(Boolean),J=Z.length>0||te.length>0||R.length>0;return{symbolRows:Z,grandTotal:y,measurementRows:te,daliRows:R,hasContent:J}},[v]);return!o||!v?null:s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl transform transition-all flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Project Summary"}),s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 text-2xl font-bold",children:"×"})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto max-h-[70vh] space-y-8",children:[!E&&s.jsx("p",{className:"text-center py-12 text-gray-500",children:"No counted symbols or measurements in this project."}),r.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Symbol Counts"}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Total Count"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r}),r.length>0&&s.jsx("tfoot",{className:"sticky bottom-0",children:s.jsxs("tr",{className:"bg-gray-100 font-bold ",children:[s.jsx("td",{className:"py-3 px-4 text-right text-gray-800",children:"Grand Total"}),s.jsx("td",{className:"py-3 px-4 text-center text-gray-800",children:h})]})})]})})]}),S.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Linear Measurements"}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Measurement Name"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-1/3",children:"Document"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Total Length"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S})]})})]}),f.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"DALI Networks"}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Network Name"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ECG Count"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ECD Count"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f})]})})]})]}),s.jsx("div",{className:"flex justify-end space-x-3 mt-6",children:s.jsx("button",{onClick:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold",children:"Close"})})]})})},Lg=({isOpen:o,onClose:u,onConfirm:v})=>{const[r,h]=H.useState(""),[S,f]=H.useState("");if(H.useEffect(()=>{o&&(h(""),f(""))},[o]),!o)return null;const E=p=>{p.preventDefault();const y=parseFloat(r)||0,g=parseFloat(S)||0;if(y>0||g>0){const A=y+g/100;v(A)}};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm transform transition-all",onClick:p=>p.stopPropagation(),children:s.jsxs("form",{onSubmit:E,children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Set Scale"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the real-world length of the line you just drew."}),s.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"meters",className:"block text-sm font-medium text-gray-700",children:"Meters"}),s.jsx("input",{id:"meters",type:"number",step:"any",value:r,onChange:p=>h(p.target.value),placeholder:"e.g., 2",autoFocus:!0,className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"centimeters",className:"block text-sm font-medium text-gray-700",children:"Centimeters"}),s.jsx("input",{id:"centimeters",type:"number",step:"any",value:S,onChange:p=>f(p.target.value),placeholder:"e.g., 50",className:"mt-1 w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!(parseFloat(r)>0||parseFloat(S)>0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Set Scale"})]})]})})})},zg=({isOpen:o,onClose:u,onConfirm:v,initialLength:r})=>{const[h,S]=H.useState("");if(H.useEffect(()=>{o&&S(r?String(r):"")},[o,r]),!o)return null;const f=E=>{E.preventDefault();const p=parseFloat(h);!isNaN(p)&&p>0?v(p):r&&v(0)};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm transform transition-all",onClick:E=>E.stopPropagation(),children:s.jsxs("form",{onSubmit:f,children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:[r?"Edit":"Add"," Manual Length"]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Enter a vertical distance (e.g., a rise or fall) to add to this measurement's total length. Enter 0 to delete."}),s.jsx("input",{type:"number",step:"any",min:"0",value:h,onChange:E=>S(E.target.value),placeholder:"Length in meters",autoFocus:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 mb-6"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:!h.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:[r?"Update":"Add"," Length"]})]})]})})})},kg=({isOpen:o,onClose:u,onConfirm:v,project:r})=>{const[h,S]=H.useState(null),[f,E]=H.useState(""),p=H.useMemo(()=>{if(!r)return[];const j=r.disciplines.find(T=>T.name===ci&&!T.parentId);return j?r.symbols.filter(T=>T.disciplineId===j.id):[]},[r]);if(H.useEffect(()=>{o&&(S(null),E(""))},[o]),!o||!r)return null;const y=()=>{h?v({existingSymbolId:h}):f.trim()&&v({newComponentName:f.trim()})},g=!h&&!f.trim(),A=j=>s.jsxs("div",{onClick:()=>{S(j.id),E("")},className:`flex items-center space-x-3 p-2 rounded-md cursor-pointer transition-colors ${h===j.id?"bg-blue-100 ring-2 ring-blue-500":"hover:bg-gray-200"}`,children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-md flex items-center justify-center p-1 border flex-shrink-0",children:s.jsx("img",{src:j.image,alt:j.name,className:"max-w-full max-h-full object-contain"})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("p",{className:"font-semibold text-gray-800 truncate",children:j.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Count: ",j.count]})]}),s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center flex-shrink-0",children:h===j.id&&s.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"})})]},j.id);return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg transform transition-all",onClick:j=>j.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Add Linear Component"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Add a component like a bend or fitting to this point. Select an existing type or create a new one."}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Create New Component"}),s.jsx("input",{type:"text",placeholder:'e.g., "90 Degree Bend"',value:f,onChange:j=>{E(j.target.value),S(null)},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),s.jsx("div",{className:"text-center text-sm text-gray-500 my-4",children:"OR"}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-600 mb-2",children:"Select Existing Component"}),s.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-lg p-2 space-y-1 bg-gray-50",children:p.length>0?p.map(A):s.jsx("p",{className:"text-center text-gray-500 p-4",children:"No linear components have been created yet."})})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{onClick:y,disabled:g,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Add Component"})]})]})})};async function Ug(o,u,v){return new Promise((r,h)=>{const S=new Image;S.onload=()=>{const f=document.createElement("canvas"),E=3;f.width=u*E,f.height=v*E;const p=f.getContext("2d");if(!p)return h(new Error("Canvas context not available"));p.drawImage(S,0,0,f.width,f.height),r(f.toDataURL("image/png"))},S.onerror=f=>h(f),S.src=o})}function Hg(o,u,v,r,h,S){const{rgb:f}=PDFLib,E=-S*Math.PI/180,p=Math.cos(E),y=Math.sin(E),g=(R,J)=>({x:R*p-J*y,y:R*y+J*p}),A={x:-r,y:2*r},j={x:r,y:2*r},T={x:0,y:2*r},Z=g(A.x,A.y),_=g(j.x,j.y),Y=g(T.x,T.y),P={x:u+Z.x,y:v+Z.y},K={x:u+_.x,y:v+_.y},q={x:u+Y.x,y:v+Y.y},te=`M ${u} ${v} L ${P.x} ${P.y} L ${K.x} ${K.y} Z`;o.drawSvgPath(te,{color:f(h.r,h.g,h.b),borderColor:f(0,0,0),borderWidth:.5}),o.drawCircle({x:q.x,y:q.y,size:r,color:f(h.r,h.g,h.b),borderColor:f(0,0,0),borderWidth:.5})}const Bg=async(o,u,v)=>{if(typeof PDFLib>"u")throw new Error("PDF generation library (pdf-lib) failed to load. Please check your internet connection and try again.");const{PDFDocument:r,rgb:h,StandardFonts:S}=PDFLib,f=o.pdfs.find(be=>be.id===u);if(!f)throw new Error("Could not find the specified PDF in the project.");const E=await El.getPdfData(u);if(!E)throw new Error("Could not load PDF data from storage.");const p=Uint8Array.from(atob(E.split(",")[1]),be=>be.charCodeAt(0)),y=await r.load(p),g=await y.embedFont(S.Helvetica),A=await y.embedFont(S.HelveticaBold),j=y.getPages()[v-1],{width:T,height:Z}=j.getSize(),_=j.getRotation().angle,Y=be=>({x:be.x,y:Z-be.y}),P=(o.daliDevices||[]).filter(be=>be.pdfId===u&&be.page===v),K=new Map((o.daliNetworks||[]).map(be=>[be.id,be]));P.forEach(be=>{const ke=K.get(be.networkId);if(ke!=null&&ke.isVisible){const fe=be.type==="ECG",L=jn(fe?"#f97316":"#06b6d4"),V=5,ue=be.location,xe=ue.x+ue.width/2,b=ue.y+ue.height,X=b-V*3,re=Y({x:xe,y:X}),I=fe?String(be.shortAddress).padStart(2,"0"):be.shortAddress,de=`${ke.name}.${I}`;if(j.drawText(de,{x:re.x-10,y:re.y+2,font:g,size:8,color:h(0,0,0)}),fe){const Se=b-V,se=Y({x:xe,y:Se});j.drawCircle({x:se.x,y:se.y,size:V,color:h(L.r,L.g,L.b),borderColor:h(0,0,0),borderWidth:.5})}else{const Se=b-V*2,se=Y({x:xe-V,y:Se});j.drawRectangle({x:se.x,y:se.y-V*2,width:V*2,height:V*2,color:h(L.r,L.g,L.b),borderColor:h(0,0,0),borderWidth:.5})}}});const q=15,te=220;let R;_===90||_===270?R=q:R=T-te-q;let J=q;const z=new Map;P.forEach(be=>{const ke=K.get(be.networkId);if(ke&&ke.isVisible){z.has(ke.id)||z.set(ke.id,{name:ke.name,ecg:0,ecd:0});const fe=z.get(ke.id);be.type==="ECG"?fe.ecg++:fe.ecd++}});const Q=Array.from(z.values()).sort((be,ke)=>be.name.localeCompare(ke.name));if(Q.length>0){const fe=q*2+20+40+Q.length*16+q;j.drawRectangle({x:R,y:J,width:te,height:fe,color:h(1,1,1),opacity:.85,borderColor:h(.8,.8,.8),borderWidth:1});let L=J+fe-q;j.drawText("DALI Legend",{x:R+q,y:L-12,font:A,size:14,color:h(0,0,0)}),L-=20+q/2;const V=jn("#f97316"),ue=jn("#06b6d4");j.drawCircle({x:R+q+6,y:L,size:6,color:h(V.r,V.g,V.b)}),j.drawText("ECG (Electronic Control Gear)",{x:R+q+20,y:L-4,font:g,size:9}),L-=20,j.drawRectangle({x:R+q,y:L-6,width:12,height:12,color:h(ue.r,ue.g,ue.b)}),j.drawText("ECD (Electronic Control Device)",{x:R+q+20,y:L-4,font:g,size:9}),L-=20+q/2,Q.forEach(xe=>{j.drawText(`${xe.name} - ECG: ${xe.ecg}, ECD: ${xe.ecd}`,{x:R+q,y:L-4,font:g,size:9}),L-=16})}const ee=await y.save(),ce=new Blob([ee],{type:"application/pdf"}),ge=URL.createObjectURL(ce),ie=document.createElement("a");ie.href=ge,ie.download=`${f.name.replace(".pdf","")}-DALI-Report-Page-${v}.pdf`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie),URL.revokeObjectURL(ge)},Gg=async(o,u,v,r={})=>{if(typeof PDFLib>"u")throw new Error("PDF generation library (pdf-lib) failed to load. Please check your internet connection and try again.");const{PDFDocument:h,rgb:S,StandardFonts:f}=PDFLib,E=o.pdfs.find(fe=>fe.id===u);if(!E)throw new Error("Could not find the specified PDF in the project.");const p=await El.getPdfData(u);if(!p)throw new Error("Could not load PDF data from storage.");const y=Uint8Array.from(atob(p.split(",")[1]),fe=>fe.charCodeAt(0)),g=await h.load(y),A=await g.embedFont(f.Helvetica),j=await g.embedFont(f.HelveticaBold),T=g.getPages()[v-1],{width:Z,height:_}=T.getSize(),Y=T.getRotation().angle,P=fe=>({x:fe.x,y:_-fe.y}),K=o.symbols.filter(fe=>fe.pdfId===u&&fe.page===v),q=o.areas.filter(fe=>fe.pdfId===u&&fe.isVisible),te=o.measurements.filter(fe=>fe.pdfId===u&&fe.isVisible);q.forEach(fe=>{const L=fe.points.map(P),V=jn(fe.color);T.drawPolygon({points:L,color:S(V.r,V.g,V.b),opacity:.2,borderColor:S(V.r,V.g,V.b),borderOpacity:.8,borderWidth:1.5})}),te.forEach(fe=>{const L=jn(fe.color);fe.points.forEach(V=>{if(V.length<2)return;const ue=V.map(P);for(let xe=0;xe<ue.length-1;xe++)T.drawLine({start:ue[xe],end:ue[xe+1],thickness:2,color:S(L.r,L.g,L.b),opacity:.8})})}),K.forEach(fe=>{const L=jn(fe.color);fe.locations.forEach(V=>{const ue=P({x:V.x+V.width/2,y:V.y+V.height});if(Hg(T,ue.x,ue.y,4,L,Y),r.withLabels){const xe=fe.name,b=6,X=ue.x+5,re=ue.y+5;T.drawText(xe,{x:X,y:re,font:A,size:b,color:S(0,0,0)})}})});const R=15,J=220;let z;Y===90||Y===270?z=R:z=Z-J-R;let Q=R;const ee=new Map;K.forEach(fe=>{const L=fe.name,V=ee.get(L);V?V.count+=fe.locations.length:fe.locations.length>0&&ee.set(L,{symbol:fe,count:fe.locations.length})});let ce=0;if(ee.size>0){ce=R*2+20+ee.size*30,T.drawRectangle({x:z,y:Q,width:J,height:ce,color:S(1,1,1),opacity:.85,borderColor:S(.8,.8,.8),borderWidth:1}),T.drawText("Takeoff Legend",{x:z+R,y:Q+ce-R-12,font:j,size:14,color:S(0,0,0)});let V=Q+ce-R-20-30;for(const ue of Array.from(ee.values())){const{symbol:xe,count:b}=ue,X=jn(xe.color);let re;try{xe.image.startsWith("data:image/svg+xml")?re=(await Ug(xe.image,20,20)).split(",")[1]:re=xe.image.split(",")[1];const de=await g.embedPng(re);T.drawImage(de,{x:z+R,y:V+10/2,width:20,height:20})}catch(de){console.warn(`Could not embed image for symbol ${xe.name}`,de),T.drawRectangle({x:z+R,y:V+10/2,width:20,height:20,color:S(X.r,X.g,X.b),borderColor:S(.5,.5,.5),borderWidth:.5})}const I=`${xe.name}: ${b}`;T.drawText(I,{x:z+R+20+10,y:V+20/2,font:A,size:10,color:S(0,0,0)}),V-=30}Q+=ce+R}if(te.length>0){const V=R*2+20+te.length*20;T.drawRectangle({x:z,y:Q,width:J,height:V,color:S(1,1,1),opacity:.85,borderColor:S(.8,.8,.8),borderWidth:1}),T.drawText("Measurements",{x:z+R,y:Q+V-R-12,font:j,size:14,color:S(0,0,0)});let ue=Q+V-R-20-20;const xe=E==null?void 0:E.scaleInfo;for(const b of te){const X=jn(b.color);T.drawRectangle({x:z+R,y:ue+8/2,width:12,height:12,color:S(X.r,X.g,X.b)});const re=yt.calculateTotalLength(b,xe),I=yt.formatLength(re),de=`${b.name}: ${I}`;T.drawText(de,{x:z+R+12+10,y:ue+10/2,font:A,size:10,color:S(0,0,0)}),ue-=20}}const ge=await g.save(),ie=new Blob([ge],{type:"application/pdf"}),be=URL.createObjectURL(ie),ke=document.createElement("a");ke.href=be,ke.download=`${E.name.replace(".pdf","")}-Report-Page-${v}.pdf`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(be)};function jn(o){const u=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return u?{r:parseInt(u[1],16)/255,g:parseInt(u[2],16)/255,b:parseInt(u[3],16)/255}:{r:0,g:0,b:0}}const Yg=({isOpen:o,onClose:u,onConfirm:v,ecdTypes:r,device:h})=>{const[S,f]=H.useState(null);if(H.useEffect(()=>{o&&h&&f(h.ecdTypeId||null)},[o,h]),!o||!h)return null;const E=()=>{S&&v(S)};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg transform transition-all",onClick:p=>p.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Assign ECD Type"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select a type from the schedule for this ECD device."}),s.jsx("div",{className:"mb-6 max-h-80 overflow-y-auto border rounded-lg p-2 space-y-1 bg-gray-50",children:r.length>0?r.map(p=>s.jsxs("div",{onClick:()=>f(p.id),className:`flex items-center justify-between p-3 rounded-md cursor-pointer transition-colors ${S===p.id?"bg-blue-100 ring-2 ring-blue-500":"hover:bg-gray-100"}`,children:[s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("p",{className:"font-bold text-gray-800",children:p.reference}),s.jsx("p",{className:"text-xs text-gray-600 truncate",title:p.productCode,children:p.productCode||"No product code"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",title:p.description,children:p.description||"No description"})]}),s.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[s.jsxs("p",{className:"font-semibold text-blue-600",children:[p.busCurrent," mA"]}),s.jsx("div",{className:"mt-2 w-5 h-5 rounded-full border-2 border-gray-300 flex items-center justify-center flex-shrink-0 mx-auto",children:S===p.id&&s.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"})})]})]},p.id)):s.jsx("p",{className:"text-center text-gray-500 p-4",children:"No ECD types have been defined in the schedule."})}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{onClick:E,disabled:!S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Assign Type"})]})]})})},qg=({isOpen:o,onClose:u,ecdTypes:v,onAdd:r,onUpdate:h,onDelete:S})=>{const[f,E]=H.useState({});if(H.useEffect(()=>{o||E({})},[o]),!o)return null;const p=(j,T)=>{E(Z=>({...Z,[j]:T}))},y=j=>{j.preventDefault();const{id:T,reference:Z,productCode:_,description:Y,busCurrent:P}=f,K=parseFloat(String(P||""));if(Z!=null&&Z.trim()&&!isNaN(K)){const q={reference:Z.trim(),productCode:(_==null?void 0:_.trim())||"",description:(Y==null?void 0:Y.trim())||"",busCurrent:K};T?h({...q,id:T}):r(q),E({})}},g=j=>{E(j)},A=()=>{E({})};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl transform transition-all flex flex-col",onClick:j=>j.stopPropagation(),children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"ECD Type Schedule"}),s.jsxs("div",{className:"flex-grow overflow-y-auto max-h-[60vh]",children:[s.jsx("div",{className:"max-h-60 overflow-y-auto mb-4 border rounded-lg",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-gray-200 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"Ref"}),s.jsx("th",{className:"p-2",children:"Product Code"}),s.jsx("th",{className:"p-2",children:"Description"}),s.jsx("th",{className:"p-2",children:"Current (mA)"}),s.jsx("th",{className:"p-2",children:"Actions"})]})}),s.jsxs("tbody",{className:"bg-white",children:[(v||[]).map(j=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2 font-medium",children:j.reference}),s.jsx("td",{className:"p-2 truncate",title:j.productCode,children:j.productCode}),s.jsx("td",{className:"p-2 truncate",title:j.description,children:j.description}),s.jsx("td",{className:"p-2",children:j.busCurrent}),s.jsxs("td",{className:"p-2 space-x-2 whitespace-nowrap",children:[s.jsx("button",{onClick:()=>g(j),className:"text-blue-600 hover:underline",children:"Edit"}),s.jsx("button",{onClick:()=>S(j.id),className:"text-red-600 hover:underline",children:"Del"})]})]},j.id)),(v||[]).length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-4 text-gray-500",children:"No ECD types defined."})})]})]})}),s.jsxs("form",{onSubmit:y,className:"space-y-3 text-sm p-4 border rounded-lg bg-gray-50",children:[s.jsx("h4",{className:"font-semibold text-base",children:f.id?"Edit Type":"Add New Type"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Reference*"}),s.jsx("input",{type:"text",value:f.reference||"",onChange:j=>p("reference",j.target.value),className:"w-full p-1.5 border rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Bus Current (mA)*"}),s.jsx("input",{type:"number",step:"any",value:f.busCurrent||"",onChange:j=>p("busCurrent",j.target.value),className:"w-full p-1.5 border rounded-md"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Product Code"}),s.jsx("input",{type:"text",value:f.productCode||"",onChange:j=>p("productCode",j.target.value),className:"w-full p-1.5 border rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block font-medium",children:"Description"}),s.jsx("input",{type:"text",value:f.description||"",onChange:j=>p("description",j.target.value),className:"w-full p-1.5 border rounded-md"})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[f.id&&s.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-200 rounded-md font-semibold text-gray-800 hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md font-semibold hover:bg-blue-700",children:f.id?"Update Type":"Add Type"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-4 mt-4 border-t",children:s.jsx("button",{onClick:u,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors font-semibold",children:"Close"})})]})})},Xg=({isOpen:o,onClose:u,onConfirm:v,initialLocation:r})=>{const[h,S]=H.useState("");if(H.useEffect(()=>{o&&S(r||"")},[o,r]),!o)return null;const f=E=>{E.preventDefault(),v(h)};return s.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 transition-opacity",onClick:u,children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm transform transition-all",onClick:E=>E.stopPropagation(),children:s.jsxs("form",{onSubmit:f,children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit PSU Location"}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:'Enter the location for this Power Supply Unit (e.g., "Level 2 - SDB2", "Riser 1").'}),s.jsx("input",{type:"text",value:h,onChange:E=>S(E.target.value),placeholder:"PSU Location Description",autoFocus:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 mb-6"}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-semibold",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-semibold",children:"Save Location"})]})]})})})},Hl=8,Zg=()=>{var Ms,_a,An,_s,Di;const[o,u]=H.useState(()=>hs.getCurrentUser()),[v,r]=H.useState([]),[h,S]=H.useState(null),[f,E]=H.useState(null),[p,y]=H.useState(null),[g,A]=H.useState(!1),[j,T]=H.useState(!1),[Z,_]=H.useState(null),[Y,P]=H.useState(null),[K,q]=H.useState(1),[te,R]=H.useState(null),[J,z]=H.useState("idle"),[Q,ee]=H.useState(null),[ce,ge]=H.useState(null),[ie,be]=H.useState(null),[ke,fe]=H.useState(!1),[L,V]=H.useState(!1),[ue,xe]=H.useState(!1),[b,X]=H.useState([]),[re,I]=H.useState(!1),[de,Se]=H.useState(!1),[se,Ge]=H.useState(!1),[Ie,_t]=H.useState(!1),[nl,al]=H.useState(null),[Be,it]=H.useState(null),[Kt,Yt]=H.useState(null),[qt,wt]=H.useState(null),[Ql,tl]=H.useState(!1),[il,gl]=H.useState(null),[Cl,Tl]=H.useState(null),[sn,on]=H.useState(1),[Me,je]=H.useState(null),[Ce,Ye]=H.useState(null),[Re,gt]=H.useState(!1),[Ue,sl]=H.useState(null),[Fe,Dt]=H.useState(null),[Rt,Jt]=H.useState(null),[Vl,$e]=H.useState(!0),[Xt,ol]=H.useState(null),[Ot,cn]=H.useState(null),[kt,pl]=H.useState([]),[bt,yl]=H.useState([]),w=H.useMemo(()=>v.find(m=>m.id===h),[v,h]),It=H.useMemo(()=>w==null?void 0:w.pdfs.find(m=>m.id===f),[w,f]),ve=(m,x=!1)=>{!x&&w&&(pl(D=>[...D.slice(-29),w]),yl([])),r(D=>D.map(M=>M.id===m.id?m:M))},St=H.useCallback(()=>{if(kt.length===0)return;const m=[...kt],x=m.pop();x&&w&&(yl(D=>[...D,w]),ve(x,!0),pl(m))},[kt,w]),Tt=H.useCallback(()=>{if(bt.length===0)return;const m=[...bt],x=m.pop();x&&w&&(pl(D=>[...D,w]),ve(x,!0),yl(m))},[bt,w]);H.useEffect(()=>{const m=x=>{const D=x.target,M=D.tagName==="INPUT"||D.tagName==="TEXTAREA"||D.tagName==="SELECT";if(J!=="idle"){(x.key==="Enter"||x.key==="Escape")&&(x.preventDefault(),J==="drawing_area"&&b.length>2&&x.key==="Enter"?Da():J==="setting_scale"&&b.length>=2&&x.key==="Enter"?xt():J==="drawing_measurement"&&b.length>=2&&x.key==="Enter"?Ae():(z("idle"),X([]),it(null),je(null),Dt(null),ol(null),Jt(null)));return}M||((x.ctrlKey||x.metaKey)&&(x.key.toLowerCase()==="z"&&(x.preventDefault(),x.shiftKey?Tt():St()),x.key.toLowerCase()==="y"&&(x.preventDefault(),Tt())),x.key.toLowerCase()==="p"&&(x.preventDefault(),gi()))};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[J,b,St,Tt]),H.useEffect(()=>{o?(A(!0),r(El.getProjects(o)),A(!1)):(S(null),E(null),r([]))},[o]),H.useEffect(()=>{if(f){let m=!1;return A(!0),_(null),y(null),El.getPdfData(f).then(x=>{m||(x?y(x):_(`Could not load PDF data for ${(It==null?void 0:It.name)||"the selected document"}. It may be missing from storage.`))}).catch(x=>{m||(console.error("Failed to fetch PDF data:",x),_("An error occurred while loading the PDF."))}).finally(()=>{m||A(!1)}),()=>{m=!0}}else y(null)},[f,It==null?void 0:It.name]),H.useEffect(()=>{w&&o&&El.saveProject(o,w)},[w,o]);const Pl=m=>{hs.saveCurrentUser(m),u(m)},ea=()=>{hs.logout(),u(null)},di=async(m,x,D)=>{var ae;if(!o)return;const M=await El.createProject(o,m,x,D);r(ne=>[...ne,M]),S(M.id),E(((ae=M.pdfs[0])==null?void 0:ae.id)||null),pl([]),yl([])},va=m=>{var D;const x=v.find(M=>M.id===m);x&&(S(m),E(((D=x.pdfs[0])==null?void 0:D.id)||null),z("idle"),P(null),R(null),je(null),q(1),_(null),pl([]),yl([]))},ta=async m=>{o&&(await El.deleteProject(o,m),r(x=>x.filter(D=>D.id!==m)),h===m&&(S(null),E(null)))},ye=m=>{E(m),q(1),P(null),R(null),je(null),z("idle")},le=async m=>{!w||!o||m.length===0||be(m)},oe=async m=>{if(!w||!o)return;const x=await El.addPdfsToProject(o,w,m);ve(x);const D=x.pdfs[x.pdfs.length-1];D&&ye(D.id),be(null)},Qe=(m,x)=>{if(!w)return;const D={...w,pdfs:w.pdfs.map(M=>M.id===m?{...M,level:x}:M)};ve(D)},pe=async m=>{if(!(!w||!o)&&window.confirm("Are you sure you want to delete this document and all of its associated symbols and areas? This action cannot be undone.")){A(!0);try{const x=await El.deletePdfFromProject(o,w.id,m);x&&(ve(x),f===m&&(x.pdfs.length>0?ye(x.pdfs[0].id):E(null)))}catch(x){console.error("Failed to delete PDF:",x),_("An error occurred while deleting the document.")}finally{A(!1)}}},he=m=>{on(m)},Ee=()=>{z("setting_scale"),X([])},xt=()=>{al(b),_t(!0),z("idle"),X([])},tt=m=>{if(!f||!nl||nl.length<2||!w)return;const x=nl[0],D=nl[1],ae={linePixels:Math.sqrt(Math.pow(D.x-x.x,2)+Math.pow(D.y-x.y,2)),knownLength:m},ne={...w,pdfs:w.pdfs.map(me=>me.id===f?{...me,scaleInfo:ae}:me)};ve(ne),_t(!1),al(null)},Le=()=>{z("drawing_measurement"),Yt(null),it(null),X([])},qe=m=>{z("drawing_measurement"),Yt(null),it(m),X([])},ft=m=>{Yt(m)},Ae=()=>{if(!f||b.length<2||!w)return;let m;if(Be){const x=w.measurements.map(D=>D.id===Be?{...D,points:[...D.points,b]}:D);m={...w,measurements:x}}else{const x=["#8b5cf6","#ef4444","#3b82f6","#22c55e","#eab308","#ec4899"],D={id:`measure_${Date.now()}`,pdfId:f,name:`Measurement ${w.measurements.length+1}`,color:x[w.measurements.length%x.length],points:[b],isVisible:!0,manualEntries:[],groupId:null};m={...w,measurements:[...w.measurements,D]}}ve(m),z("idle"),X([]),it(null)},at=(m,x)=>{if(!w)return;const D={...w,measurements:w.measurements.map(M=>M.id===m?{...M,...x}:M)};ve(D)},Ut=m=>{if(!w)return;const x={...w,measurements:w.measurements.filter(D=>D.id!==m)};ve(x),Kt===m&&Yt(null)},He=(m,x)=>{if(!w)return;const D=[...w.measurements],M=D.findIndex(De=>De.id===m);if(M===-1)return;const ae=D[M],ne=ae.points.filter((De,Ne)=>Ne!==x),me=(ae.manualEntries||[]).filter(De=>De.segmentIndex!==x).map(De=>De.segmentIndex>x?{...De,segmentIndex:De.segmentIndex-1}:De);ne.length===0?(D.splice(M,1),Kt===m&&Yt(null)):D[M]={...ae,points:ne,manualEntries:me},ve({...w,measurements:D})},We=(m,x,D)=>{Tl({measurementId:m,segmentIndex:x,pointIndex:D})},st=m=>{if(!Cl||!w)return;const{measurementId:x,segmentIndex:D,pointIndex:M}=Cl,ae={...w,measurements:w.measurements.map(ne=>{if(ne.id===x){const me=[...ne.points],De=[...me[D]];return De[M]=m,me[D]=De,{...ne,points:me}}return ne})};ve(ae)},cl=()=>{Tl(null)},Bl=(m,x,D,M)=>{wt({measurementId:m,segmentIndex:x,pointIndex:D,entryId:M==null?void 0:M.id})},rl=m=>{if(!qt||!w)return;const{measurementId:x,segmentIndex:D,pointIndex:M,entryId:ae}=qt,ne=w.measurements.map(me=>{if(me.id===x){const De=me.manualEntries||[];if(m<=0)return{...me,manualEntries:De.filter(Ne=>Ne.id!==ae)};if(ae)return{...me,manualEntries:De.map(Ne=>Ne.id===ae?{...Ne,length:m}:Ne)};{const Ne={id:`manual_${Date.now()}`,length:m,segmentIndex:D,pointIndex:M};return{...me,manualEntries:[...De,Ne]}}}return me});ve({...w,measurements:ne}),wt(null)},fi=(m,x)=>{if(!w)return;const D={...w,measurements:w.measurements.map(M=>M.id===m?{...M,manualEntries:(M.manualEntries||[]).filter(ae=>ae.id!==x)}:M)};ve(D)},mi=(m,x)=>{if(!w)return;const D=w.measurementGroups||[];if(m.trim()&&!D.some(M=>M.name.toLowerCase()===m.trim().toLowerCase()&&M.parentId===x)){const M={id:`mgroup_${Date.now()}`,name:m.trim(),parentId:x};ve({...w,measurementGroups:[...D,M]})}},ko=(m,x)=>{if(!x.trim()||!w)return;const D=w.measurementGroups||[],M=D.find(me=>me.id===m);if(!M)return;if(D.some(me=>me.id!==m&&me.parentId===M.parentId&&me.name.toLowerCase()===x.trim().toLowerCase())){_(`A measurement group named "${x.trim()}" already exists at this level.`),setTimeout(()=>_(null),3e3);return}const ne={...w,measurementGroups:D.map(me=>me.id===m?{...me,name:x.trim()}:me)};ve(ne)},gs=m=>{if(!window.confirm("Are you sure you want to delete this group and all its sub-groups? Measurements within will become ungrouped.")||!w)return;const x=w.measurementGroups||[],D=new Set([m]),M=me=>{x.forEach(De=>{De.parentId===me&&(D.add(De.id),M(De.id))})};M(m);const ae=x.filter(me=>!D.has(me.id)),ne=w.measurements.map(me=>me.groupId&&D.has(me.groupId)?{...me,groupId:null}:me);ve({...w,measurementGroups:ae,measurements:ne})},ul=(m,x)=>{if(!w)return;const D={...w,measurements:w.measurements.map(M=>M.id===m?{...M,groupId:x}:M)};ve(D)},ps=(m,x)=>{if(!w)return;const D=w.measurementGroups||[];if(m===x)return;const M=(ne,me)=>{if(!ne)return!1;if(ne===me)return!0;const De=D.find(Ne=>Ne.id===ne);return!De||!De.parentId?!1:M(De.parentId,me)};if(x&&M(x,m)){_("Cannot move a group into one of its own children."),setTimeout(()=>_(null),3e3);return}const ae={...w,measurementGroups:D.map(ne=>ne.id===m?{...ne,parentId:x}:ne)};ve(ae)},Uo=m=>{gl(m),tl(!0)},wa=({newComponentName:m,existingSymbolId:x})=>{if(!il||!f||!w)return;let D={...w},M=D.disciplines.find(ne=>ne.name===ci&&!ne.parentId);M||(M={id:`disc_linear_${Date.now()}`,name:ci,parentId:null},D.disciplines=[...D.disciplines,M]);let ae=x;if(m){const ne=["#8b5cf6","#ef4444","#3b82f6","#22c55e","#eab308","#ec4899"],me=ne[D.symbols.filter(Pe=>Pe.disciplineId===M.id).length%ne.length],De=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect width="80" height="80" x="10" y="10" rx="20" ry="20" fill="${me}" /></svg>`,Ne={id:`sym_linear_${Date.now()}`,name:m,image:`data:image/svg+xml;base64,${btoa(De)}`,count:0,locations:[],color:me,page:K,pdfId:f,disciplineId:M.id,type:"manual",parentId:null};D.symbols.push(Ne),ae=Ne.id}if(ae){const ne=D.symbols.findIndex(me=>me.id===ae);if(ne>-1){let me={x:il.x-Hl,y:il.y-Hl*3,width:Hl*2,height:Hl*3};me=Jl(me,f,D.areas),D.symbols[ne].locations.push(me),D.symbols[ne].count++}}ve(D),tl(!1),gl(null)},ys=m=>{if(!w)return;const x=w.daliNetworks||[],M=(w.daliNetworkTemplates||[]).find(De=>De.id===m),ae=x.map(De=>parseInt(De.name.replace("DA",""),10)).filter(De=>!isNaN(De)),ne=ae.length>0?Math.max(...ae)+1:1,me={id:`dali_net_${Date.now()}`,name:`DA${ne}`,isVisible:!0,ecgLimit:M?M.ecgLimit:55,ecdLimit:M?M.ecdLimit:20,powerSupplyCapacity:M?M.powerSupplyCapacity:250,defaultEcdTypeId:M?M.defaultEcdTypeId:null};ve({...w,daliNetworks:[...x,me]})},Sa=(m,x)=>{if(!w)return;const D=(w.daliNetworks||[]).map(M=>M.id===m?{...M,...x}:M);ve({...w,daliNetworks:D})},Ho=m=>{if(!w)return;const x=(w.daliNetworks||[]).filter(M=>M.id!==m),D=(w.daliDevices||[]).filter(M=>M.networkId!==m);ve({...w,daliNetworks:x,daliDevices:D})},dl=(m,x)=>{z("placing_dali_device"),je({networkId:m,deviceType:x}),P(null),R(null),Yt(null),ol(null)},ja=(m,x)=>{if(!x||!w||!f)return;const{networkId:D,deviceType:M,ecdTypeId:ae}=x;let ne={...w};const me=[...ne.daliNetworks||[]],De=me.findIndex(Ml=>Ml.id===D);if(De===-1)return;let Ne={...me[De]};const Pe=ne.daliDevices||[],bl=Pe.filter(Ml=>Ml.networkId===D),Al=bl.filter(Ml=>Ml.type==="ECG"),Rs=bl.filter(Ml=>Ml.type==="ECD");if(M==="ECG"){if(Al.length>=Ne.ecgLimit)if(Ne.ecgLimit<64)if(window.confirm(`You are about to exceed the recommended DALI ECG device limit of 55 for network "${Ne.name}".

Continuing will raise the limit to the maximum of 64 for this network. Do you want to proceed?`))Ne.ecgLimit=64,me[De]=Ne;else return;else{_(`Cannot add more ECG devices. Maximum limit of 64 reached for network ${Ne.name}.`),setTimeout(()=>_(null),4e3);return}}else if(Rs.length>=Ne.ecdLimit)if(Ne.ecdLimit<32)if(window.confirm(`You are about to exceed the recommended DALI ECD device limit of 20 for network "${Ne.name}".

Continuing will raise the limit to the maximum of 32 for this network. Do you want to proceed?`))Ne.ecdLimit=32,me[De]=Ne;else return;else{_(`Cannot add more ECD devices. Maximum limit of 32 reached for network ${Ne.name}.`),setTimeout(()=>_(null),4e3);return}const Ra=M==="ECG"?Al:Rs,Os=new Set(Ra.map(Ml=>Ml.shortAddress));let Oa=M==="ECG"?0:100;for(;Os.has(Oa);)Oa++;const Mn=5,Ei={id:`dali_dev_${Date.now()}`,networkId:D,type:M,shortAddress:Oa,pdfId:f,page:K,location:{x:m.x-Mn,y:m.y-Mn*3,width:Mn*2,height:Mn*3},ecdTypeId:M==="ECD"&&(ae||Ne.defaultEcdTypeId)||void 0};ve({...ne,daliNetworks:me,daliDevices:[...Pe,Ei]})},bs=m=>{ja(m,Me)},hi=m=>{ja(m,Fe)},Nn=m=>{w&&ve({...w,daliDevices:(w.daliDevices||[]).filter(x=>x.id!==m)})},gi=()=>{z("selecting_dali_painter_source"),P(null),R(null),Yt(null),je(null),ol(null),Dt(null),Jt(null)},xs=m=>{m&&(Dt({networkId:m.networkId,deviceType:m.type,ecdTypeId:m.ecdTypeId}),z("painting_dali_device"))},Dn=m=>{var x,D;if(!((D=(x=m.psuLocation)==null?void 0:x.location)!=null&&D.trim())){_("The selected PSU has no location description to copy."),setTimeout(()=>_(null),4e3),z("idle");return}Jt(m.psuLocation.location),z("painting_dali_psu_location")},Bo=m=>{if(!w||Rt===null)return;const x=(w.daliNetworks||[]).map(D=>{if(D.id===m&&D.psuLocation){if(D.psuLocation.location===Rt)return D;const M={...D.psuLocation,location:Rt};return{...D,psuLocation:M}}return D});ve({...w,daliNetworks:x})},vs=()=>{$e(m=>!m)},ws=m=>{z("placing_dali_psu"),ol(m),P(null),R(null),Yt(null),je(null)},pi=m=>{if(!w||!Xt||!f)return;const x=(w.daliNetworks||[]).map(D=>{var M;if(D.id===Xt){const ne={x:m.x-10,y:m.y-10,width:20,height:20,pdfId:f,page:K,location:(M=D.psuLocation)==null?void 0:M.location};return{...D,psuLocation:ne}}return D});ve({...w,daliNetworks:x}),z("idle"),ol(null)},Ss=m=>{if(!w)return;const x=(w.daliNetworks||[]).map(D=>{if(D.id===m){const{psuLocation:M,...ae}=D;return ae}return D});ve({...w,daliNetworks:x})},Go=m=>{var D;const x=(D=w==null?void 0:w.daliNetworks)==null?void 0:D.find(M=>M.id===m);x&&x.psuLocation&&cn(x)},Na=m=>{if(!w||!Ot||!Ot.psuLocation)return;const x={...Ot.psuLocation,location:m.trim()},D=(w.daliNetworks||[]).map(M=>M.id===Ot.id?{...M,psuLocation:x}:M);ve({...w,daliNetworks:D}),cn(null)},yi=m=>{if(!w||!window.confirm("Are you sure you want to re-address all devices on this network? This will re-sequence all ECGs from 0 and ECDs from 100."))return;let x=[...w.daliDevices||[]];const D=x.filter(Ne=>Ne.networkId===m),M=D.filter(Ne=>Ne.type==="ECG").sort((Ne,Pe)=>Ne.shortAddress-Pe.shortAddress),ae=D.filter(Ne=>Ne.type==="ECD").sort((Ne,Pe)=>Ne.shortAddress-Pe.shortAddress);let ne=0,me=100;const De=new Set;M.forEach(Ne=>{x=x.map(Pe=>Pe.id===Ne.id?{...Pe,shortAddress:ne++}:Pe),De.add(Ne.id)}),ae.forEach(Ne=>{x=x.map(Pe=>Pe.id===Ne.id?{...Pe,shortAddress:me++}:Pe),De.add(Ne.id)}),ve({...w,daliDevices:x})},bi=m=>{var ne;if(!w)return;const x=(ne=w.daliNetworks)==null?void 0:ne.find(me=>me.id===m);if(!x)return;const D=window.prompt("Enter a name for this network template:",x.name);if(!D||!D.trim())return;const M={id:`dali_template_${Date.now()}`,name:D.trim(),ecgLimit:x.ecgLimit,ecdLimit:x.ecdLimit,powerSupplyCapacity:x.powerSupplyCapacity,defaultEcdTypeId:x.defaultEcdTypeId||null},ae=[...w.daliNetworkTemplates||[],M];ve({...w,daliNetworkTemplates:ae})},En=m=>{if(!w)return;const x={id:`ecdtype_${Date.now()}`,...m},D=[...w.ecdTypes||[],x];ve({...w,ecdTypes:D})},Cn=m=>{if(!w)return;const x=(w.ecdTypes||[]).map(D=>D.id===m.id?m:D);ve({...w,ecdTypes:x})},js=m=>{if(!w)return;const x=(w.ecdTypes||[]).filter(M=>M.id!==m),D=(w.daliDevices||[]).map(M=>M.ecdTypeId===m?{...M,ecdTypeId:void 0}:M);ve({...w,ecdTypes:x,daliDevices:D})},xi=m=>{var D;const x=(D=w==null?void 0:w.daliDevices)==null?void 0:D.find(M=>M.id===m);x&&x.type==="ECD"&&Ye(x)},Ns=m=>{if(!w||!Ce)return;const x=(w.daliDevices||[]).map(D=>D.id===Ce.id?{...D,ecdTypeId:m}:D);ve({...w,daliDevices:x}),Ye(null)},la=()=>{z("drawing_area"),X([]),P(null),R(null)},Gl=m=>{J==="setting_scale"&&b.length>=2||X(x=>[...x,m])},Da=()=>{b.length>2?xe(!0):Yl()},Yl=()=>{z("idle"),X([]),xe(!1),_t(!1),al(null),it(null),je(null),Dt(null),Jt(null),ol(null)},Kl=m=>{if(!f||!w)return;const x=["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6","#ec4899","#f97316","#14b8a6"],D={id:`area_${Date.now()}`,name:m,pdfId:f,points:b,isVisible:!0,color:x[w.areas.length%x.length]},M=[...w.areas,D],ae=Ca(w.symbols,f,M);ve({...w,areas:M,symbols:ae}),Yl()},vi=(m,x)=>{if(!w)return;const D={...w,areas:w.areas.map(M=>M.id===m?{...M,...x}:M)};ve(D)},Ea=m=>{if(!window.confirm("Are you sure you want to delete this area? Pins inside will become unassigned.")||!w)return;const x=w.areas.filter(M=>M.id!==m),D=w.symbols.map(M=>{const ae=M.locations.map(ne=>ne.areaId===m?{...ne,areaId:void 0}:ne);return{...M,locations:ae}});ve({...w,areas:x,symbols:D})},Ds=(m,x)=>{let D=!1;for(let M=0,ae=x.length-1;M<x.length;ae=M++){const ne=x[M].x,me=x[M].y,De=x[ae].x,Ne=x[ae].y;me>m.y!=Ne>m.y&&m.x<(De-ne)*(m.y-me)/(Ne-me)+ne&&(D=!D)}return D},Jl=(m,x,D)=>{const M={x:m.x+m.width/2,y:m.y+m.height/2},ae=D.filter(ne=>ne.pdfId===x&&ne.isVisible);for(const ne of ae)if(Ds(M,ne.points))return{...m,areaId:ne.id};return{...m,areaId:void 0}},Ca=(m,x,D)=>m.map(M=>{if(M.pdfId!==x)return M;const ae=M.locations.map(ne=>Jl(ne,x,D));return{...M,locations:ae}}),Tn=m=>{m!==null&&R(null),P(m)},$t=m=>{R(m),P(null)},rn=()=>{!w||!f||(Tn(null),z("selecting_manual"),_(null))},Ta=H.useCallback(async m=>{if(!(!w||!f)&&J==="selecting_manual"){z("idle");const x=`sym_manual_${Date.now()}`,D=w.symbols.length,M=["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6","#ec4899"][D%6],ae={id:x,name:`Manual Symbol ${D+1}`,image:m,count:0,locations:[],color:M,page:K,pdfId:f,disciplineId:te,type:"manual",parentId:null};ve({...w,symbols:[...w.symbols,ae]}),Tn(x),z("placing_dots")}},[K,J,te,w,f]),na=m=>{if(J!=="placing_dots"||!Y||!f||!w)return;const x=w.symbols.map(D=>{if(D.id===Y){let M={x:m.x-Hl,y:m.y-Hl*3,width:Hl*2,height:Hl*3};M=Jl(M,f,w.areas);const ae=[...D.locations,M];return{...D,locations:ae,count:ae.length}}return D});ve({...w,symbols:x})},Yo=m=>{var M;if(J!=="idle"||!Y||!w||!f)return;const x=w.symbols.find(ae=>ae.id===Y);if(!x)return;if(x.pdfId!==f||x.page!==K){const ae=((M=w.pdfs.find(ne=>ne.id===x.pdfId))==null?void 0:M.name)||"the correct document";_(`To add pins for "${x.name}", please switch to page ${x.page} of ${ae}.`),setTimeout(()=>_(null),5e3);return}const D=w.symbols.map(ae=>{if(ae.id===Y){let ne={x:m.x-Hl,y:m.y-Hl*3,width:Hl*2,height:Hl*3};ne=Jl(ne,f,w.areas);const me=[...ae.locations,ne];return{...ae,locations:me,count:me.length}}return ae});ve({...w,symbols:D})},wi=(m,x)=>{if(!w)return;const D=JSON.parse(JSON.stringify(w.symbols)),M=D.find(ae=>ae.id===m);if(!M||!M.locations[x]){console.warn("Symbol or location not found for deletion.");return}M.locations.splice(x,1),M.count--,ve({...w,symbols:D})},Si=(m,x)=>{ge({symbolId:m,locationIndex:x})},aa=m=>{if(!ce||!w||!f)return;const{symbolId:x,locationIndex:D}=ce,M=w.symbols.find(Pe=>Pe.id===x),ae=w.symbols.find(Pe=>Pe.id===m);if(!M||!ae||M.id===ae.id){ge(null);return}let ne=M.locations[D];if(!ne){ge(null);return}ne=Jl(ne,f,w.areas);const me=JSON.parse(JSON.stringify(w.symbols)),De=me.find(Pe=>Pe.id===x);De.locations.splice(D,1),De.count--;const Ne=me.find(Pe=>Pe.id===m);Ne.locations.push(ne),Ne.count++,ve({...w,symbols:me}),ge(null)},Aa=m=>{if(!w)return;const x=w.symbols.find(D=>D.id===m);x&&(Tn(m),z("placing_dots"),q(x.page))},Es=(m,x)=>{w&&ve({...w,symbols:w.symbols.map(D=>D.id===m?{...D,name:x}:D)})},qo=(m,x)=>{w&&ve({...w,symbols:w.symbols.map(D=>D.id===m?{...D,color:x}:D)})},Xo=(m,x)=>{if(!w||!x)return;const D=new FileReader;D.onload=M=>{var ne;const ae=(ne=M.target)==null?void 0:ne.result;if(ae){const me={...w,symbols:w.symbols.map(De=>De.id===m?{...De,image:ae}:De)};ve(me)}},D.onerror=M=>{console.error("Failed to read image file:",M),_("Could not update symbol image.")},D.readAsDataURL(x)},Zo=m=>{!w||!w.symbols.find(D=>D.id===m)||(Y===m&&(Tn(null),z("idle")),ve({...w,symbols:w.symbols.filter(D=>D.id!==m)}))},ji=(m,x)=>{if(w&&m.trim()&&!w.disciplines.some(D=>D.name.toLowerCase()===m.trim().toLowerCase())){const D={id:`disc_${Date.now()}`,name:m.trim(),parentId:x};ve({...w,disciplines:[...w.disciplines,D]})}},Qo=(m,x)=>{if(!x.trim()||!w)return;const D=w.disciplines.find(ne=>ne.id===m);if(!D)return;if(w.disciplines.some(ne=>ne.id!==m&&ne.parentId===D.parentId&&ne.name.toLowerCase()===x.trim().toLowerCase())){_(`A discipline named "${x.trim()}" already exists at this level.`),setTimeout(()=>_(null),3e3);return}const ae={...w,disciplines:w.disciplines.map(ne=>ne.id===m?{...ne,name:x.trim()}:ne)};ve(ae)},Vo=(m,x)=>{w&&ve({...w,symbols:w.symbols.map(D=>D.id===m?{...D,disciplineId:x}:D)})},Po=m=>{if(!window.confirm("Are you sure you want to delete this discipline and all its sub-disciplines? Symbols within will become uncategorized.")||!w)return;const x=new Set([m]),D=ne=>{w.disciplines.forEach(me=>{me.parentId===ne&&(x.add(me.id),D(me.id))})};D(m);const M=w.disciplines.filter(ne=>!x.has(ne.id)),ae=w.symbols.map(ne=>ne.disciplineId&&x.has(ne.disciplineId)?{...ne,disciplineId:null}:ne);te&&x.has(te)&&R(null),ve({...w,disciplines:M,symbols:ae})},Ko=(m,x)=>{if(!w||m===x)return;const D=(ae,ne)=>{if(!ae)return!1;if(ae===ne)return!0;const me=w.disciplines.find(De=>De.id===ae);return!me||!me.parentId?!1:D(me.parentId,ne)};if(x&&D(x,m)){const ae="Cannot move a discipline into one of its own children.";console.warn(ae),_(ae),setTimeout(()=>_(null),3e3);return}const M=w.disciplines.map(ae=>ae.id===m?{...ae,parentId:x}:ae);ve({...w,disciplines:M})},Jo=()=>{w&&fe(!0)},Cs=async m=>{if(w){fe(!1),A(!0),_(null);try{await cg(w,m)}catch(x){console.error("Failed to export Excel:",x),_(x.message||"Failed to export Excel.")}finally{A(!1)}}},Io=()=>{w&&V(!0)},$o=async m=>{if(!(!w||!f)){Se(!0),_(null);try{await Gg(w,f,K,{withLabels:m})}catch(x){console.error("Failed to export PDF report:",x),_(x.message||"Failed to generate PDF report.")}finally{Se(!1),V(!1)}}},Wo=async()=>{if(!(!w||!f)){Ge(!0),_(null);try{await Bg(w,f,K)}catch(m){console.error("Failed to export DALI PDF report:",m),_(m.message||"Failed to generate DALI PDF report.")}finally{Ge(!1)}}},Fo=m=>{if(!w)return;const x=w.symbols.find(D=>D.id===m);x&&ee(x)},Ma=()=>{ee(null)},ec=m=>{if(!w||!Q)return;const x=w.symbols.find(M=>M.id===Q.id);if(!x)return;let D=[];m.forEach(M=>{const ae={...x,id:`sym_manual_${M}_${Date.now()}_${Math.random()}`,pdfId:M,count:0,locations:[]};D.push(ae)}),ve({...w,symbols:[...w.symbols,...D]}),Ma()},tc=async()=>{if(o){A(!0),_(null);try{await El.exportAllBackup(o)}catch(m){console.error("Backup failed:",m),_(m.message||"Failed to create backup.")}finally{A(!1)}}},lc=async()=>{if(!(!o||!h)){A(!0),_(null);try{await El.exportSingleProjectBackup(o,h)}catch(m){console.error("Single project backup failed:",m),_(m.message||"Failed to create project backup.")}finally{A(!1)}}},Ts=async m=>{if(o&&window.confirm("Restoring from a full backup will overwrite ALL your current projects and data for this user. This cannot be undone. Are you sure you want to continue?")){T(!0),_(null);try{const x=await El.importAllBackup(o,m);x.success?(alert(x.message),window.location.reload()):_(x.message)}catch(x){console.error("Restore failed:",x),_(x.message||"An unexpected error occurred during restore.")}finally{T(!1)}}},nc=async m=>{if(o){T(!0),_(null);try{const x=await El.importSingleProjectBackup(o,m);x.success?(alert(x.message),window.location.reload()):_(x.message)}catch(x){console.error("Single project restore failed:",x),_(x.message||"An unexpected error occurred during project restore.")}finally{T(!1)}}},ac=H.useMemo(()=>{if(!ce||!w||!f)return[];const m=w.symbols.find(M=>M.id===ce.symbolId);if(!m)return[];const x=w.symbols.filter(M=>M.pdfId===f&&M.id!==ce.symbolId),D=m.disciplineId;if(D){const M=De=>{let Ne=w.disciplines.find(Pe=>Pe.id===De);for(;Ne&&Ne.parentId;){const Pe=w.disciplines.find(bl=>bl.id===Ne.parentId);if(Pe)Ne=Pe;else break}return Ne?Ne.id:De},ae=De=>{const Ne=new Set,Pe=[De];for(;Pe.length>0;){const bl=Pe.pop();Ne.add(bl),w.disciplines.filter(Al=>Al.parentId===bl).forEach(Al=>Pe.push(Al.id))}return Ne},ne=M(D),me=ae(ne);return x.filter(De=>De.disciplineId&&me.has(De.disciplineId))}else return x.filter(M=>!M.disciplineId)},[ce,w,f]),ic=H.useMemo(()=>{if(!w||!f)return[];if(J==="placing_dots"&&Y){const m=w.symbols.find(x=>x.id===Y);if(!m||m.page!==K||m.pdfId!==f)return[];if(m.disciplineId){const x=(M,ae)=>{ae.add(M),w.disciplines.forEach(ne=>{ne.parentId===M&&x(ne.id,ae)})},D=new Set;return x(m.disciplineId,D),w.symbols.filter(M=>M.disciplineId&&D.has(M.disciplineId)&&M.page===K&&M.pdfId===f)}return[m]}if(J!=="idle"&&!J.startsWith("selecting")&&!J.startsWith("painting")&&!J.startsWith("placing_dali"))return[];if(Y){const m=w.symbols.find(x=>x.id===Y);return m&&m.page===K&&m.pdfId===f?[m]:[]}if(te){const m=(D,M)=>{M.add(D),w.disciplines.forEach(ae=>{ae.parentId===D&&m(ae.id,M)})},x=new Set;return m(te,x),w.symbols.filter(D=>D.disciplineId&&x.has(D.disciplineId)&&D.page===K&&D.pdfId===f)}return[]},[w,f,J,Y,K,te]);if(!o)return s.jsx(Tg,{onLoginSuccess:Pl});if(!w)return s.jsx(Ng,{projects:v,onCreate:di,onLoad:va,onDelete:ta,onRestoreSingleProject:nc});const sc=(Ms=w.symbols.find(m=>m.id===Y))==null?void 0:Ms.color,oc=w.areas.filter(m=>m.pdfId===f),As=w.measurements.filter(m=>m.pdfId===f),Ni=qt?(An=(_a=w.measurements.find(m=>m.id===qt.measurementId))==null?void 0:_a.manualEntries)==null?void 0:An.find(m=>m.id===qt.entryId):void 0,cc=()=>{var m,x;if(J==="selecting_manual")return s.jsx("div",{className:"absolute top-4 bg-blue-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Draw a box around the symbol to add manually. Press 'Escape' to cancel."});if(J==="placing_dots")return s.jsx("div",{className:"absolute top-4 bg-blue-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Click to place pins. Press 'Enter' or 'Escape' to finish."});if(J==="drawing_area")return s.jsx("div",{className:"absolute top-4 bg-green-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Click to draw polygon points. Press 'Enter' to finish or 'Escape' to cancel."});if(J==="setting_scale")return s.jsx("div",{className:"absolute top-4 bg-purple-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Draw a line over a known distance. Press 'Enter' when done or 'Escape' to cancel."});if(J==="drawing_measurement"){const D=Be?"Click to add a new segment. Press 'Enter' to save.":"Click to draw measurement points. Press 'Enter' to save.";return s.jsxs("div",{className:"absolute top-4 bg-purple-500 text-white p-3 rounded-lg shadow-lg z-50",children:[D," Press 'Escape' to cancel."]})}if(J==="placing_dali_device"){const D=(m=w==null?void 0:w.daliNetworks)==null?void 0:m.find(ae=>ae.id===(Me==null?void 0:Me.networkId)),M=(Me==null?void 0:Me.deviceType)==="ECG"?"ECG (Gear)":"ECD (Control)";return s.jsxs("div",{className:"absolute top-4 bg-cyan-500 text-white p-3 rounded-lg shadow-lg z-50",children:["Click to place a ",M," for network ",D==null?void 0:D.name,". Press 'Enter' or 'Escape' to finish."]})}if(J==="selecting_dali_painter_source")return s.jsx("div",{className:"absolute top-4 bg-violet-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Click on a DALI device or PSU to copy its properties. Press 'Escape' to cancel."});if(J==="painting_dali_device")return s.jsx("div",{className:"absolute top-4 bg-violet-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Click to place copies. Press 'Enter' or 'Escape' to finish."});if(J==="painting_dali_psu_location")return s.jsx("div",{className:"absolute top-4 bg-violet-500 text-white p-3 rounded-lg shadow-lg z-50",children:"Click on other PSUs to apply the location. Press 'Enter' or 'Escape' to finish."});if(J==="placing_dali_psu"){const D=(x=w==null?void 0:w.daliNetworks)==null?void 0:x.find(M=>M.id===Xt);return s.jsxs("div",{className:"absolute top-4 bg-indigo-500 text-white p-3 rounded-lg shadow-lg z-50",children:["Click to place a Power Supply Unit for network ",D==null?void 0:D.name,". Press 'Escape' to finish."]})}return null};return s.jsxs("div",{className:"flex h-screen bg-gray-100 font-sans",children:[s.jsx(I0,{projects:v,activeProject:w,onSwitchProject:va,onCreateNewProject:()=>{S(null),E(null)},onDeleteProject:ta,onLogout:ea,activePdfId:f,currentPage:K,onSwitchPdf:ye,onAddPdfs:le,onUpdatePdfLevel:Qe,onDeletePdf:pe,onStartManualSelection:rn,onExportExcel:Jo,onExportPdfReport:Io,onExportDaliPdfReport:Wo,onViewCounts:()=>I(!0),isExporting:g,isExportingPdf:de,isExportingDaliPdf:se,isLoading:g||j,mode:J,onSymbolNameChange:Es,onSymbolColorChange:qo,onSymbolImageChange:Xo,onSymbolDelete:Zo,onAddPoints:Aa,onOpenCopyModal:Fo,activeSymbolId:Y,setActiveSymbolId:Tn,onAddDiscipline:ji,onUpdateDisciplineName:Qo,onAssignDiscipline:Vo,activeDisciplineId:te,setActiveDisciplineId:$t,onDeleteDiscipline:Po,onUpdateDisciplineParent:Ko,onBackupAll:tc,onBackupSingleProject:lc,onRestoreAll:Ts,onStartAreaDrawing:la,onDeleteArea:Ea,onUpdateArea:vi,onStartSetScale:Ee,onStartMeasure:Le,onStartAddToMeasurement:qe,onUpdateMeasurement:at,onDeleteMeasurement:Ut,measurements:As,measurementGroups:w.measurementGroups,onAddMeasurementGroup:mi,onUpdateMeasurementGroupName:ko,onDeleteMeasurementGroup:gs,onAssignMeasurementToGroup:ul,onUpdateMeasurementGroupParent:ps,scaleInfo:It==null?void 0:It.scaleInfo,selectedMeasurementId:Kt,onSelectMeasurement:ft,onOpenManualLengthModal:Bl,onDeleteManualEntry:fi,pdfOpacity:sn,onPdfOpacityChange:he,onAddDaliNetwork:ys,onUpdateDaliNetwork:Sa,onDeleteDaliNetwork:Ho,onStartDaliPlacement:dl,onOpenEcdSchedule:()=>gt(!0),onDaliNetworkHover:sl,onStartDaliPaintSelection:gi,showDaliLabels:Vl,onToggleDaliLabels:vs,onStartPlacePsu:ws,onDeletePsu:Ss,onRenumberDaliNetwork:yi,onSaveDaliNetworkAsTemplate:bi}),s.jsxs("main",{className:"flex-1 flex flex-col items-center justify-center p-4 bg-gray-200 overflow-auto",children:[Z&&s.jsx("div",{className:"absolute top-4 bg-red-500 text-white p-3 rounded-lg shadow-lg z-50 animate-pulse",onClick:()=>_(null),children:Z}),cc(),s.jsx(ig,{pdfData:p,mode:J,onSymbolSelected:Ta,onPlaceDot:na,onQuickPlaceDot:Yo,onLocationDelete:wi,onStartReassignPin:Si,symbolsToHighlight:ic,activeSymbolId:Y,activeSymbolColor:sc,currentPage:K,setCurrentPage:q,onCancelSelection:Yl,onFinishAreaDrawing:Da,areas:oc,drawingPoints:b,onDrawPoint:Gl,measurements:As,scaleInfo:It==null?void 0:It.scaleInfo,activeDrawingMeasurementId:Be,selectedMeasurementId:Kt,onOpenManualLengthModal:Bl,onStartCreateLinearComponent:Uo,onDeleteMeasurementSegment:He,onStartDragMeasurementNode:We,onUpdateMeasurementPoint:st,onEndDragMeasurementNode:cl,pdfOpacity:sn,daliNetworks:w.daliNetworks||[],daliDevices:((_s=w.daliDevices)==null?void 0:_s.filter(m=>m.pdfId===f))||[],ecdTypes:w.ecdTypes||[],onPlaceDaliDevice:bs,onDeleteDaliDevice:Nn,onStartEditEcdDevice:xi,activeDaliPlacement:Me,hoveredDaliNetworkId:Ue,onDaliNetworkHover:sl,onDaliDevicePickedForPainting:xs,onDaliPsuPickedForPainting:Dn,onPaintDaliDevice:hi,onPaintDaliPsuLocation:Bo,daliDeviceToPaint:Fe,daliPsuLocationToPaint:Rt,showDaliLabels:Vl,onPlacePsu:pi,onDeletePsu:Ss,onStartEditPsuLocation:Go,activeDaliPsuPlacementNetworkId:Xt,activePdfId:f})]}),s.jsx(Dg,{isOpen:!!Q,onClose:Ma,onCopy:ec,symbolToCopy:Q,pdfsInProject:w.pdfs}),s.jsx(Eg,{isOpen:!!ie,onClose:()=>be(null),onAdd:oe,files:ie||[]}),s.jsx(Ag,{isOpen:ke,onClose:()=>fe(!1),onConfirm:Cs,isExporting:g}),s.jsx(Mg,{isOpen:L,onClose:()=>V(!1),onConfirm:$o,isExporting:de}),s.jsx(_g,{isOpen:!!ce,onClose:()=>ge(null),onConfirm:aa,currentSymbol:w.symbols.find(m=>m.id===(ce==null?void 0:ce.symbolId)),availableSymbols:ac,disciplines:w.disciplines}),s.jsx(Rg,{isOpen:ue,onClose:Yl,onConfirm:Kl}),s.jsx(Og,{isOpen:re,onClose:()=>I(!1),project:w}),s.jsx(Lg,{isOpen:Ie,onClose:Yl,onConfirm:tt}),s.jsx(zg,{isOpen:!!qt,onClose:()=>wt(null),onConfirm:rl,initialLength:Ni==null?void 0:Ni.length}),s.jsx(kg,{isOpen:Ql,onClose:()=>tl(!1),onConfirm:wa,project:w}),s.jsx(Yg,{isOpen:!!Ce,onClose:()=>Ye(null),onConfirm:Ns,ecdTypes:w.ecdTypes||[],device:Ce}),s.jsx(qg,{isOpen:Re,onClose:()=>gt(!1),ecdTypes:w.ecdTypes||[],onAdd:En,onUpdate:Cn,onDelete:js}),s.jsx(Xg,{isOpen:!!Ot,onClose:()=>cn(null),onConfirm:Na,initialLocation:(Di=Ot==null?void 0:Ot.psuLocation)==null?void 0:Di.location})]})},Zm=document.getElementById("root");if(!Zm)throw new Error("Could not find root element to mount to");const Qg=E0.createRoot(Zm);Qg.render(s.jsx(b0.StrictMode,{children:s.jsx(Zg,{})}));
